{
  "comments": [
    {
      "key": {
        "uuid": "9d92b62c_2e6b8862",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 96,
      "author": {
        "id": 7833
      },
      "writtenOn": "2018-09-12T10:49:45Z",
      "side": 1,
      "message": "This should apply only when building object files that goes into the webrtc library, so is this the right place? It looks like it is included also for tests and examples.\n\nI\u0027d prefer WEBRTC_LIBRARY or WEBRTC_LIBRARY_IMPLEMENTATION. E.g., I consider unit tests part of the implementation, and those shouldn\u0027t have this define.",
      "range": {
        "startLine": 96,
        "startChar": 16,
        "endLine": 96,
        "endChar": 37
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0a05d5a_05ecd771",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 96,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-09-12T11:57:11Z",
      "side": 1,
      "message": "\u003e This should apply only when building object files that goes into the webrtc library, so is this the right place? It looks like it is included also for tests and examples.\n\nYou are right. It is fine for now but in case we will officially support a shared library this will cause problems. Let me move it out of here.\n\n\u003e I\u0027d prefer WEBRTC_LIBRARY or WEBRTC_LIBRARY_IMPLEMENTATION. E.g., I consider unit tests part of the implementation, and those shouldn\u0027t have this define.\n\nI don\u0027t have strong opinions here, is WEBRTC_LIBRARY_IMPL ok? (I prefer if it is a little bit shorter shorter).",
      "parentUuid": "9d92b62c_2e6b8862",
      "range": {
        "startLine": 96,
        "startChar": 16,
        "endLine": 96,
        "endChar": 37
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72a6913f_cc56b1b2",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 96,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-09-12T12:13:05Z",
      "side": 1,
      "message": "Done in PS#9.",
      "parentUuid": "f0a05d5a_05ecd771",
      "range": {
        "startLine": 96,
        "startChar": 16,
        "endLine": 96,
        "endChar": 37
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8e49ba2_686a5b04",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 371,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-09-12T10:28:17Z",
      "side": 1,
      "message": "Not related to this CL, but perhaps it\u0027s time to drop this presubmit check if you\u0027ve given up the war on public_deps.",
      "range": {
        "startLine": 371,
        "startChar": 21,
        "endLine": 371,
        "endChar": 59
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "086a061d_b9ebaf30",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 371,
      "author": {
        "id": 7833
      },
      "writtenOn": "2018-09-12T10:49:45Z",
      "side": 1,
      "message": "Why is the promotion from deps to public_deps needed for this cl?",
      "parentUuid": "e8e49ba2_686a5b04",
      "range": {
        "startLine": 371,
        "startChar": 21,
        "endLine": 371,
        "endChar": 59
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f55bd7f_32a90397",
        "filename": "BUILD.gn",
        "patchSetId": 8
      },
      "lineNbr": 371,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-09-12T11:54:20Z",
      "side": 1,
      "message": "\u003e Not related to this CL, but perhaps it\u0027s time to drop this presubmit check if you\u0027ve given up the war on public_deps.\n\nI still think we have to avoid them internally (and the presubmit helps us to avoid regressions). In this situation, libwebrtc is grouping together build targets in order to create a shared library or a static library and I think public_deps is the right tool for the job in order to propagate WebRTC internal public_configs (and headers) to external build targets.\n\n\u003e Why is the promotion from deps to public_deps needed for this cl?\n\nBecause WEBRTC_SHARED_LIBRARY\u003d1 is set using public_configs (in order to propagate the macro definition one step further in the build graph). Using public_deps propagates public_configs another step up in the build graph, so for example:\n\nA -\u003e //:webrtc -\u003e //api:transport_api\n\n//api:transport_api\u0027s public_configs will be propagated to //:webrtc but not to A. If //:webrtc public_dep on //api:transport_api then A will also get //api:transport_api\u0027s public_configs (this is definitely complex but it is how GN works: https://gn.googlesource.com/gn/+/master/docs/reference.md#public_configs + https://gn.googlesource.com/gn/+/master/docs/reference.md#public_deps).",
      "parentUuid": "086a061d_b9ebaf30",
      "range": {
        "startLine": 371,
        "startChar": 21,
        "endLine": 371,
        "endChar": 59
      },
      "revId": "86342fa102210c56ad8532fb497aea01bdf65347",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}