{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a188a7ab_54cb5da1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 8038
      },
      "writtenOn": "2023-05-03T20:02:34Z",
      "side": 1,
      "message": "I think one problem with using the SourceTracker is that it only updates when new packets are decoded, so it doesn\u0027t necessary reflect what is played out.\n\nOne suggestion is to use the audio level that is computed in ChannelReceive instead that measures the audio samples that are played out. GetSpeechOutputLevelFullRange (https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:third_party/webrtc/audio/channel_receive.h;l\u003d107;drc\u003de0e0d24aaa54727dc0a8bc4b159ccdf80d3f5d8d) has some smoothing built in that may or may not be desirable.\n\nWe could calculate the energy using only the frame directly otherwise. This is already done in the mixer so it would be nice to avoid doing it multiple times: https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:third_party/webrtc/modules/audio_mixer/audio_mixer_impl.cc;l\u003d53;drc\u003de0e0d24aaa54727dc0a8bc4b159ccdf80d3f5d8d",
      "revId": "2c6a001c78f4bdf41b1e6e2a0dba677d0270e336",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}