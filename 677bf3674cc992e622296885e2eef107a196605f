{
  "comments": [
    {
      "key": {
        "uuid": "9ac74a54_c75762db",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "nit: Would be nice to have a comment somewhere that summarizes the goals of this test, explaining that it\u0027s a more end-to-end version of rampup_tests.cc that also tests different ICE paths, etc.",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "723bbde4_760ed7c8",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ac74a54_c75762db",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba88952c_2f8a1f7a",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 5525
      },
      "writtenOn": "2018-05-23T11:25:54Z",
      "side": 1,
      "message": "rampup",
      "range": {
        "startLine": 40,
        "startChar": 31,
        "endLine": 40,
        "endChar": 42
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcbba455_4b5b8477",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-23T23:19:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba88952c_2f8a1f7a",
      "range": {
        "startLine": 40,
        "startChar": 31,
        "endLine": 40,
        "endChar": 42
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "98f2c2e4_d880d0e9",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "Can use FakePeriodicVideoTrackSource now to simplify this; see https://webrtc-review.googlesource.com/c/src/+/76961",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c164b732_38730e20",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Awesome, thanks for letting me know of the update.",
      "parentUuid": "98f2c2e4_d880d0e9",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2aa7bc6_f24a2d03",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "If every test is just going to use a single network interface, we don\u0027t really need this method; could just call AddInterface when the FakeNetworkManager is constructed.",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "391452b9_38a870cc",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Sounds good. I put this here in case we wanted to use it later when setting up different ICE paths (this is done in peerconnection_ice_unittest.cc), but I guess that probably won\u0027t be necessary. If it is we can add it back later.",
      "parentUuid": "d2aa7bc6_f24a2d03",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02f99b05_4d404e45",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 5525
      },
      "writtenOn": "2018-05-23T11:25:54Z",
      "side": 1,
      "message": "Would the test code be easier to follow if we did:\nFakePeriodicVideoSource::Config config;\n// Set max frame rate to 10fps to reduce the risk of test flakiness.\nconfig.frame_interval_ms \u003d 100;\nAddTrack(CreateLocalTrack(CreateFakeVideoSource(config)))\n\ninstead of\n\nAddLocalVideoTRackWithFakeSource()\n?",
      "range": {
        "startLine": 95,
        "startChar": 3,
        "endLine": 95,
        "endChar": 0
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6074740a_b39f4d9a",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-23T23:19:58Z",
      "side": 1,
      "message": "Sounds good, I changed this to be similar to peerconnection_integrationtest.cc:\nFakePeriodicVideoSource::Config config;\n// Set max frame rate to 10fps to reduce the risk of test flakiness.\nconfig.frame_interval_ms \u003d 100;\ncaller-\u003eAddTrack(caller_-\u003eCreateLocalVideoTrack(config));",
      "parentUuid": "02f99b05_4d404e45",
      "range": {
        "startLine": 95,
        "startChar": 3,
        "endLine": 95,
        "endChar": 0
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ccde440_709425d8",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 5525
      },
      "writtenOn": "2018-05-23T11:25:54Z",
      "side": 1,
      "message": "Same here",
      "range": {
        "startLine": 106,
        "startChar": 3,
        "endLine": 106,
        "endChar": 0
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "935454f2_4a40f5aa",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-23T23:19:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5ccde440_709425d8",
      "range": {
        "startLine": 106,
        "startChar": 3,
        "endLine": 106,
        "endChar": 0
      },
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3bd58564_daef56b7",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "Only adding the last candidate may not work for other test cases, where multiple candidates are gathered. I\u0027d suggest just adding all of them.",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e4821de_a7e3a0d6",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3bd58564_daef56b7",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22c98e23_ded31ce5",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 199,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "nit: Replace 3000 with \"kIceConnectTimeout\" (or even just kDefaultTimeout, I don\u0027t think it makes a difference here)",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "997f0c92_d654c4b9",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 199,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "22c98e23_ded31ce5",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56871d39_2ece5760",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "Is this just used for the debug output?",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "551d97bb_59641c15",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Yeah, I took it out along with the other debug stuff.",
      "parentUuid": "56871d39_2ece5760",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77b7c6eb_25ea5692",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 229,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "Remember to remove before landing",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17a862a3_152e1e67",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 229,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77b7c6eb_25ea5692",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03bfa119_ad35166e",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 234,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "nit: Could just check test_state_ and do rtc::Thread::ProcessMessages(kPollIntervalMs), don\u0027t really need an event.",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6e13d3d_fd815ec7",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 234,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03bfa119_ad35166e",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d43af663_43da8e57",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 263,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "One difference between VirtualSocketServer and FakeNetworkPipe is that FakeNetworkPipe will continue to simulate delay as the simulated queue is drained, whereas VirtualSocketServer will just instantly stop simulating delay. Meaning you\u0027d suddenly start seeing old and new packets interleaved, I\u0027d assume.\n\nWe may want to fix this; I wouldn\u0027t be surprised if that\u0027s why you\u0027re only seeing a couple rendered frames during the second rampup. More generally, it would be ideal if VirtualSocketServer and FakeNetworkPipe shared as much logic as possible (maybe VirtualSocketServer could be written on top of SimulatedNetwork?), but I don\u0027t expect you to do that in this CL.",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7d96f27_3f60e2f4",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 263,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Ah I see this, thanks for pointing that out Taylor. It seems like there\u0027s two things we would like to update for VirtualSocketServer:\n-2 queues (one for each direction)\n-Same implementation for the send delay as FakeNetworkPipe\n\nThe preferred fix here would be to probably incorporate the SimulatedNetwork into the VirtualSocketServer. This could require a larger effort - the FakeNetworkPipe/Simulated network were really designed for sending/receiving at the call level, while the VirtualSocketServer is designed at the socket level. Although, I think it could be possible to use the SimulatedNetwork in the VirtualSocketServer. I was thinking the VirtualSocketServer could be the interface between the sockets and the network, where the underlying network would be the SimulatedNetwork. It would control network configurations and enqueue/dequeue packets appropriately. \n\nAs we discussed with Qingsi, it\u0027s probably best to hold off on this for now because this will probably be part of a larger effort for creating a unified network simulation, and it\u0027s best not to hastily throw something together now just for the test to run as we hope. A smaller fix could be updating the VirtualSocketServer to implement the 2 things I mentioned above. WDYT?\n\nOne small thing to note is this test (\u0026 others) will probably break when we incorporate a more \"real\" simulated networks into the VirtualSocketServer.",
      "parentUuid": "d43af663_43da8e57",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ffd783a_bebad228",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 282,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-05-24T01:00:48Z",
      "side": 1,
      "message": "If the test is updated to potentially have multiple candidate pairs, you\u0027ll need to find the RTCTransportStats instead, then look up the RTCIceCandidatePairStats that matches selected_candidate_pair_id",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a1c8508_83b4c63e",
        "filename": "pc/peerconnection_rampup_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 282,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-05-26T02:06:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ffd783a_bebad228",
      "revId": "677bf3674cc992e622296885e2eef107a196605f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}