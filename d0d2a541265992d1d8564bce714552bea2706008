{
  "comments": [
    {
      "key": {
        "uuid": "4d1be2b3_457ce58a",
        "filename": "pc/jseptransport.cc",
        "patchSetId": 1
      },
      "lineNbr": 650,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Why is it signaled when it\u0027s closed?  And why not when it\u0027s pending?\n\nBased on the name of the signal, I would expect it to be called only when the media transport becomes writable.  Should it be renamed SignalMediaTransportStateChanged() (and fire when it changes to pending)?",
      "range": {
        "startLine": 650,
        "startChar": 6,
        "endLine": 650,
        "endChar": 51
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78b01fad_9c937260",
        "filename": "pc/jseptransport.cc",
        "patchSetId": 1
      },
      "lineNbr": 650,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "Not when pending, because we don\u0027t allow going from \u0027writable\u0027 to \u0027pending\u0027. Removed callback when it\u0027s closed for now.",
      "parentUuid": "4d1be2b3_457ce58a",
      "range": {
        "startLine": 650,
        "startChar": 6,
        "endLine": 650,
        "endChar": 51
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c60e165d_61193d08",
        "filename": "pc/jseptransport.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Can I hook PeerConnection to this for data-channel-over-media-transport state?",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e5ceb0e2_94a57c6c",
        "filename": "pc/jseptransport.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "Yes, that\u0027s the intention.",
      "parentUuid": "c60e165d_61193d08",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18dda190_21b2f69f",
        "filename": "pc/jseptransport.h",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Nit: variable.",
      "range": {
        "startLine": 272,
        "startChar": 45,
        "endLine": 272,
        "endChar": 52
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4b97b18_d3ea91eb",
        "filename": "pc/jseptransport.h",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18dda190_21b2f69f",
      "range": {
        "startLine": 272,
        "startChar": 45,
        "endLine": 272,
        "endChar": 52
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ebc9fe5_d4249cc9",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1241,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Nit: please lower-case.",
      "range": {
        "startLine": 1241,
        "startChar": 31,
        "endLine": 1241,
        "endChar": 34
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b34a8862_44c462ed",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1241,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5ebc9fe5_d4249cc9",
      "range": {
        "startLine": 1241,
        "startChar": 31,
        "endLine": 1241,
        "endChar": 34
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32dc3659_b3398fcc",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1242,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Suggestion: change this to \"dtls transport might be absent\".\n\nI feel that wording would be clearer, but that may simply be my preference.  It\u0027s kind of like the \"use positive booleans\" thing.  I find it easier to read \"x is absent\" than \"x is not present\" or \"no xs are present\".",
      "range": {
        "startLine": 1242,
        "startChar": 23,
        "endLine": 1242,
        "endChar": 58
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa2b4cd1_0b67af25",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1242,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "It\u0027s definitely like \"use positive booleans\". Followed suggestion.",
      "parentUuid": "32dc3659_b3398fcc",
      "range": {
        "startLine": 1242,
        "startChar": 23,
        "endLine": 1242,
        "endChar": 58
      },
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6276128_98428ee8",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1279,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Should we handle kClosed by ORing it with any_failed?  Closed does\u0027t necessarily mean failed, it could just mean we\u0027re wrapping up the call and disconnected.  However, since we currently don\u0027t close deliberately until the media transport is deleted, it seems reasonable to interpret closed as failed.",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3776a203_c5043b91",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1279,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:48:45Z",
      "side": 1,
      "message": "Good question - I\u0027ve been wondering the same thing. If media transport gets closed by the remote party and we get the \u0027close\u0027 packet sooner than signaling delivers information about closure (not sure how ICE detects disconnects), should we put the connection state in failed state?",
      "parentUuid": "d6276128_98428ee8",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "812080c8_df3144bc",
        "filename": "pc/jseptransportcontroller.cc",
        "patchSetId": 1
      },
      "lineNbr": 1279,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T21:28:17Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "3776a203_c5043b91",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a855fcdb_5902afa8",
        "filename": "pc/jseptransportcontroller_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 825,
      "author": {
        "id": 5599
      },
      "writtenOn": "2018-10-31T18:40:17Z",
      "side": 1,
      "message": "Maybe add tests for what happens when media transport goes to closed?  And should we test what happens if one goes back to pending (since we allow that)?",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fb27ab3_5014931f",
        "filename": "pc/jseptransportcontroller_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 825,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T18:52:12Z",
      "side": 1,
      "message": "What do you think should happen?\n\n1) DTLS doesn\u0027t allow to flip\u0026flop. In fact, there is no event for going to non-writable\n\n2) should we expose the event on every state change? right now, we only recompute global state when the event is triggered in jsep transport.\n\nI think, if we can agree on following assumptions, I can change the implementation:\n\n1) JsepTransport::MediaTransportState should only go from pending-\u003ewritable-\u003eclosed\n\nalternatively, if it goes back to pending, we should have ice state _checking_.\n\n2) if media transport is closed, we will treat it as failed (we expect media transport to only be closed during destruction).",
      "parentUuid": "a855fcdb_5902afa8",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8703632e_5e33a1d1",
        "filename": "pc/jseptransportcontroller_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 825,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-10-31T21:28:17Z",
      "side": 1,
      "message": "Done (2).",
      "parentUuid": "6fb27ab3_5014931f",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52877cac_9cae797a",
        "filename": "pc/jseptransportcontroller_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 825,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-10-31T21:35:57Z",
      "side": 1,
      "message": "Do you want the state change to kIceConnectionConnecting due to going back to pending? Maybe it\u0027s worth asking Qingsi because he understands the ICE states well. But I don\u0027t know if the ICE state should change to \"checking\" because QUIC connection is blocked. This also depends on when the media transport can go back to a \"pending\" state, which I don\u0027t understand.\n\nIt looks like you\u0027re correct about the media transport state changing to closed, the IceConnectionState should go to failed:\nhttps://cs.chromium.org/chromium/src/third_party/webrtc/pc/jseptransportcontroller.h?q\u003dpc/jseptransportcontroller.h+package:%5Echromium$\u0026dr\u0026l\u003d178\n\nPerhaps you should add this as well and test it?",
      "parentUuid": "6fb27ab3_5014931f",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0dd7ae2d_f92e651a",
        "filename": "pc/jseptransportcontroller_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 825,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-10-31T21:38:04Z",
      "side": 1,
      "message": "Race condition - Looks like you did (2) already :p.",
      "parentUuid": "52877cac_9cae797a",
      "revId": "d0d2a541265992d1d8564bce714552bea2706008",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}