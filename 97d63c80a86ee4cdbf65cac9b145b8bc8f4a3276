{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7ca20ced_4f9f9b28",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "This name is too abstract. FramerateTrackerAdapter/FramerateTracker are clearer IMHO.\n\nOr do you have any other ideas?",
      "range": {
        "startLine": 34,
        "startChar": 6,
        "endLine": 34,
        "endChar": 14
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "39775bef_ef00cf13",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-29T09:30:21Z",
      "side": 1,
      "message": "Yeah agree. I went for AdapterMode abstracting concrete modes of the cadence adapter. Hope it\u0027s good enough.",
      "parentUuid": "7ca20ced_4f9f9b28",
      "range": {
        "startLine": 34,
        "startChar": 6,
        "endLine": 34,
        "endChar": 14
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c89d9a5_c42054c0",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 39,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "OnFrame is currently identical between two Adaters. Do you plan to have a third mode or add some different logic in here?\n\nIf not, it would be best to remove this method. Then Adapter could get a better name, e.g. FramerateTracker.",
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e12738ae_bf75e7ff",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 39,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-26T16:15:00Z",
      "side": 1,
      "message": "As I wrote in the zero-hertz implementation, there\u0027s a todo to fill with details.",
      "parentUuid": "1c89d9a5_c42054c0",
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dbe10fc3_7bca28b9",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "nit: please rephrase. I understand what it means, but it\u0027s not easy to read.\n\nE.g. \n  suitable constraints are set (min fps is 0, max fps is \u003e 0)",
      "range": {
        "startLine": 132,
        "startChar": 21,
        "endLine": 132,
        "endChar": 57
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "009c4ed4_5ebbae96",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-29T09:30:21Z",
      "side": 1,
      "message": "Did an attempt.",
      "parentUuid": "dbe10fc3_7bca28b9",
      "range": {
        "startLine": 132,
        "startChar": 21,
        "endLine": 132,
        "endChar": 57
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f344a79_87360aa4",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "Introducing class hierarchy with overloaded virtual methods implies that you will store pointers to a parent class.\n\nStoring them both here is a little counter intuitive.\n\nI suggest you to store one pointer to a parent class instead.\n\nI see |current_adapter_| doing exaclty that. Plus there\u0027s some kind of caching.\nYet, the some adapters are recreated every time.\n\nHow often can zero mode be toggled on or off? Maybe all this caching is not really needed?",
      "range": {
        "startLine": 150,
        "startChar": 2,
        "endLine": 151,
        "endChar": 55
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "506ee053_2c8fe819",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-26T16:15:00Z",
      "side": 1,
      "message": "I need to store the two adapters somewhere. I can\u0027t feed them in since the |callback_| is fed first at initialization time. I can\u0027t change this because VideoSendStream creates the FCA (this is for mocking in the VSE unit tests), but the VideoStreamEncoder must be able to set itself as receptor (in the initialize call).\n\nWithout storing them optionally or dynamically, I have to support two modes in each adapter: needs-initialize and initialized and will have to remove constness of Callback. I think the design is better this way and I can have nice RAII objects with \n\nAs for the cache: 0Hz mode is activated by 7 conditions being true (see added method below), so I figure I don\u0027t want to check that every time I do a call to one of the adapters.\n\nI create the 0Hz adapter first when needed (in MaybeReconfigureAdapters, which can happen in two spots below), and the passthrough as soon as I can.\n\nWhere do you see the adapters getting recreated all the time?",
      "parentUuid": "0f344a79_87360aa4",
      "range": {
        "startLine": 150,
        "startChar": 2,
        "endLine": 151,
        "endChar": 55
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee6f4fbd_7740c874",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T16:47:25Z",
      "side": 1,
      "message": "L288-289. When zero mode is enabled from disabled, |zero_hertz_adapter_| is recreated. passthrough_adapter_ however isn\u0027t.\n\nIf you have it all the time it may be better instead of adapters to have If statement in FrameCadenceAdapterImpl::GetInputFramerateFps, which either returns max_fps or an internal rate estimator value.\n\nBut I won\u0027t push that.",
      "parentUuid": "506ee053_2c8fe819",
      "range": {
        "startLine": 150,
        "startChar": 2,
        "endLine": 151,
        "endChar": 55
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ac0ba8b_daf13dd7",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "This test is hard to understand. It looks like it tries to enable the zero-hertz mode at the second run, but it doesn\u0027t because there\u0027s no constraints.\n\nPlease simplify it. Only one iteration will be enough. If you want to check that not providing constraints result in a disabled zero-rate experience, make it a separate test. It should have field trial explicitly enabled.",
      "range": {
        "startLine": 103,
        "startChar": 30,
        "endLine": 103,
        "endChar": 75
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7e22609_5f5aff93",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-26T16:15:00Z",
      "side": 1,
      "message": "Read closer :) I need to verify that the rate stats work both when feature is disabled, and also when no field trial is present. Do you still want me to separate it?",
      "parentUuid": "8ac0ba8b_daf13dd7",
      "range": {
        "startLine": 103,
        "startChar": 30,
        "endLine": 103,
        "endChar": 75
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "416f53c5_534ac928",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T16:47:25Z",
      "side": 1,
      "message": "Two tests with different names would be clearer.",
      "parentUuid": "b7e22609_5f5aff93",
      "range": {
        "startLine": 103,
        "startChar": 30,
        "endLine": 103,
        "endChar": 75
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21cab6a0_31a75794",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-29T09:30:21Z",
      "side": 1,
      "message": "Done, separated.",
      "parentUuid": "416f53c5_534ac928",
      "range": {
        "startLine": 103,
        "startChar": 30,
        "endLine": 103,
        "endChar": 75
      },
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "158db03b_87b30448",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 5117
      },
      "writtenOn": "2021-11-26T15:24:30Z",
      "side": 1,
      "message": "It would be clearer if you unroll the last iteration (or rather add one more after the loop). You\u0027ll have to add 3 broilerplate lines, but will remove 2 lines for condition, so it won\u0027t even be that longer.",
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "895d4e34_9b42ad1e",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 9515
      },
      "writtenOn": "2021-11-29T09:30:21Z",
      "side": 1,
      "message": "That\u0027s a really good suggestion, done!",
      "parentUuid": "158db03b_87b30448",
      "revId": "97d63c80a86ee4cdbf65cac9b145b8bc8f4a3276",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}