{
  "comments": [
    {
      "key": {
        "uuid": "52b9eb57_5d51d0bc",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 976,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Hate to suggest another large change but I have a suggestion :)\n\nInstead of having MediaExpectations take in the caller and callee wrappers, just have this class store the expected frame counts and expose them to ExpectNewFrames as public fields/getters or whatever (since it already knows who the caller and callee are). The actual logic for verifying the new received frames (by checking min_video_frames_received, etc.) would stay in ExpectNewFrames.\n\nWhat do you think?",
      "range": {
        "startLine": 976,
        "startChar": 2,
        "endLine": 976,
        "endChar": 19
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63291b0f_6a0b9ac9",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 976,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "As discussed offline - agreed this makes sense for the GE check \u0026 setting the expectations not being dependent upon when they are called (because they grab the current frame counts). The logic isn\u0027t quite as clean, but I think those reasons justify the change :). Done.",
      "parentUuid": "52b9eb57_5d51d0bc",
      "range": {
        "startLine": 976,
        "startChar": 2,
        "endLine": 976,
        "endChar": 19
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdcfe0f3_594eaa8f",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 985,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Maybe also add ExpectBidirectionalAudioAndVideo since it\u0027s a common case.",
      "range": {
        "startLine": 985,
        "startChar": 7,
        "endLine": 985,
        "endChar": 31
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fbe51de_e4677154",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 985,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdcfe0f3_594eaa8f",
      "range": {
        "startLine": 985,
        "startChar": 7,
        "endLine": 985,
        "endChar": 31
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7549db78_5db061d4",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1005,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "nit: Suggestion instead: \"CallerExpectsSomeAudioAndVideo\"",
      "range": {
        "startLine": 1005,
        "startChar": 7,
        "endLine": 1005,
        "endChar": 28
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78ec73bd_dfa26253",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1005,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7549db78_5db061d4",
      "range": {
        "startLine": 1005,
        "startChar": 7,
        "endLine": 1005,
        "endChar": 28
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ba7727d_9b153b22",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1134,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Initialize these ints to 0.",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f6ff604_b1b34af8",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1134,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ba7727d_9b153b22",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee5ed8d4_9df49b67",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1327,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Have this return a bool so that callers can ASSERT_TRUE. This will stop the test when it doesn\u0027t meet the expectation and make it easier to troubleshoot.",
      "range": {
        "startLine": 1327,
        "startChar": 2,
        "endLine": 1327,
        "endChar": 6
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "281576bf_458c2a57",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1327,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Good idea for debugging. Done.",
      "parentUuid": "ee5ed8d4_9df49b67",
      "range": {
        "startLine": 1327,
        "startChar": 2,
        "endLine": 1327,
        "endChar": 6
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "811ccb85_9c1186cb",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1334,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "I think it might be useful to see the actual frames received vs. expected if there\u0027s a failure here. The old method would tell you that because it used EXPECT_GE (which would output the arguments if the expectation was false). You could do the same here by moving the logic for CallerHasExpectedAudioFrames, etc. to this method and using EXPECT_GE instead of EXPECT_TRUE(... \u003e\u003d ...).",
      "range": {
        "startLine": 1334,
        "startChar": 4,
        "endLine": 1334,
        "endChar": 15
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20a40719_9acffab2",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1334,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "811ccb85_9c1186cb",
      "range": {
        "startLine": 1334,
        "startChar": 4,
        "endLine": 1334,
        "endChar": 15
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5dbd85f_5297fae9",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1714,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Might be worth checking that the caller doesn\u0027t receive any frames.",
      "range": {
        "startLine": 1714,
        "startChar": 2,
        "endLine": 1714,
        "endChar": 20
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8678a33_9071c754",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1714,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f5dbd85f_5297fae9",
      "range": {
        "startLine": 1714,
        "startChar": 2,
        "endLine": 1714,
        "endChar": 20
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5ff79d2_4cba8df9",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1741,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Should verify that there\u0027s no video frames since it was rejected.",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c3eea4a_2d83b031",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1741,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f5ff79d2_4cba8df9",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4cfe68b4_1ffbf28d",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1888,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "I would suggest not reusing the expectation objects since they are mutable. If the variable name clashing is a problem (since you can\u0027t define multiple media_expectations in the same scope), an option is to use a block like this:\n\n{\n  MediaExpectations expectations;\n  ...\n  ExpectNewFrames(expectations);\n}",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51647ffe_86ad3c5b",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1888,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4cfe68b4_1ffbf28d",
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a758a8d5_5196da7b",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 2166,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "Maybe also check that  the caller is receiving video frames.",
      "range": {
        "startLine": 2166,
        "startChar": 2,
        "endLine": 2166,
        "endChar": 20
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc313e16_bfd7ad04",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 2166,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "I don\u0027t think the caller should be receiving video in this case. There\u0027s no video track added on the callee side, so it\u0027s receive only. I think the test just wants to check the callee is receiving based upon the test header.",
      "parentUuid": "a758a8d5_5196da7b",
      "range": {
        "startLine": 2166,
        "startChar": 2,
        "endLine": 2166,
        "endChar": 20
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18532963_35d70aa2",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 2166,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-20T19:10:22Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "bc313e16_bfd7ad04",
      "range": {
        "startLine": 2166,
        "startChar": 2,
        "endLine": 2166,
        "endChar": 20
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9b36096_22bdb6ff",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 2446,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-16T18:58:23Z",
      "side": 1,
      "message": "50 or 25?",
      "range": {
        "startLine": 2446,
        "startChar": 14,
        "endLine": 2446,
        "endChar": 16
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdd2551d_cde203a1",
        "filename": "pc/peerconnection_integrationtest.cc",
        "patchSetId": 2
      },
      "lineNbr": 2446,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-20T18:36:43Z",
      "side": 1,
      "message": "This one\u0027s good- the comment originally said 50, but I just copied over the original value of 25 here without looking at the comment itself. Nice catch, they can now align \u003e:).",
      "parentUuid": "e9b36096_22bdb6ff",
      "range": {
        "startLine": 2446,
        "startChar": 14,
        "endLine": 2446,
        "endChar": 16
      },
      "revId": "665bbd79f685c693c2f0cde56a07b106a86e8c96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}