{
  "comments": [
    {
      "key": {
        "uuid": "75bd38e5_63a777ff",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 26,
        "startChar": 20,
        "endLine": 26,
        "endChar": 25
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d09884fb_e9911add",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "A \u0027const float\u0027 parameter type would be ignored by the compiler. https://abseil.io/tips/109",
      "parentUuid": "75bd38e5_63a777ff",
      "range": {
        "startLine": 26,
        "startChar": 20,
        "endLine": 26,
        "endChar": 25
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7caabd85_f568c0eb",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Not sure about the convention in WebRTC, but as per style guide this should be the last argument (I assume target_gain and input_noise_level_dbfs const).",
      "range": {
        "startLine": 46,
        "startChar": 23,
        "endLine": 46,
        "endChar": 53
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "648bec7e_d6ab0542",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 46,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Good point!",
      "parentUuid": "7caabd85_f568c0eb",
      "range": {
        "startLine": 46,
        "startChar": 23,
        "endLine": 46,
        "endChar": 53
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2215f9bd_4cfc5844",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const (also for the previous arg)",
      "range": {
        "startLine": 48,
        "startChar": 23,
        "endLine": 48,
        "endChar": 28
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fc123fd_aac0a01b",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Same as above",
      "parentUuid": "2215f9bd_4cfc5844",
      "range": {
        "startLine": 48,
        "startChar": 23,
        "endLine": 48,
        "endChar": 28
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7c8348a_5f5bffa1",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 51,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "I find error-prone that LimitGainByNoise() assumes that attenuation is not permitted. I think a better design is to enforce that in AdaptiveDigitalGainApplier. If we ever need to allow attenuation, we need to also remove 0.f as lower bound.\n\nInstead of using SafeClamp, I would just use std::min(target_gain, std::max(noise_headroom_db, 0.f)). WDYT?",
      "range": {
        "startLine": 51,
        "startChar": 44,
        "endLine": 51,
        "endChar": 47
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e205e4a_cac279eb",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 51,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7c8348a_5f5bffa1",
      "range": {
        "startLine": 51,
        "startChar": 44,
        "endLine": 51,
        "endChar": 47
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "deee4435_411387d5",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 57,
        "startChar": 35,
        "endLine": 57,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4266c65_bd0de01c",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "deee4435_411387d5",
      "range": {
        "startLine": 57,
        "startChar": 35,
        "endLine": 57,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d637cef0_56dd02ea",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 58,
        "startChar": 35,
        "endLine": 58,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf080655_7da82f39",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d637cef0_56dd02ea",
      "range": {
        "startLine": 58,
        "startChar": 35,
        "endLine": 58,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "343e06de_8b22280d",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "gain_increase_allowed",
      "range": {
        "startLine": 59,
        "startChar": 41,
        "endLine": 59,
        "endChar": 63
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29d6d2b7_7a785e87",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const bool\n      ^ (not float!)",
      "range": {
        "startLine": 59,
        "startChar": 35,
        "endLine": 59,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bf675b1_01b1f5be",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "343e06de_8b22280d",
      "range": {
        "startLine": 59,
        "startChar": 41,
        "endLine": 59,
        "endChar": 63
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b7231be_a4705f58",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Thanks! Good catch!",
      "parentUuid": "29d6d2b7_7a785e87",
      "range": {
        "startLine": 59,
        "startChar": 35,
        "endLine": 59,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0609c57_56f4ff34",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "GainCloseToOne",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 15
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6354cce_812f789a",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "inline?",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 71,
        "endChar": 4
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "834a54bc_68672a5a",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0609c57_56f4ff34",
      "range": {
        "startLine": 71,
        "startChar": 5,
        "endLine": 71,
        "endChar": 15
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cab15998_a9057853",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 71,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "No, .cc files shouldn\u0027t have inline functions: http://go/totw/125#inline-in-cc-files",
      "parentUuid": "f6354cce_812f789a",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 71,
        "endChar": 4
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55582e1d_994a239e",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 76,
        "startChar": 26,
        "endLine": 76,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b598d28_d0807fd1",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "55582e1d_994a239e",
      "range": {
        "startLine": 76,
        "startChar": 26,
        "endLine": 76,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7fb4c420_03b1e3fc",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "I guess this is a linear (non db) gain; name the variable accordingly (consistent with last_gain_linear)",
      "range": {
        "startLine": 77,
        "startChar": 32,
        "endLine": 77,
        "endChar": 52
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41a5b144_651792d6",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 77,
        "startChar": 26,
        "endLine": 77,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdc9802a_b5f6d453",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7fb4c420_03b1e3fc",
      "range": {
        "startLine": 77,
        "startChar": 32,
        "endLine": 77,
        "endChar": 52
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af20fed4_3f6a97db",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "41a5b144_651792d6",
      "range": {
        "startLine": 77,
        "startChar": 26,
        "endLine": 77,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3eb10eeb_23527370",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 124,
        "startChar": 2,
        "endLine": 124,
        "endChar": 7
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62746954_54ffea59",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3eb10eeb_23527370",
      "range": {
        "startLine": 124,
        "startChar": 2,
        "endLine": 124,
        "endChar": 7
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0988161_f692ba8b",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "First, as discussed offline, add a TODO since at some point we will end up using the new VAD which always outputs one probability for every 10 ms frame.\n\nThen, just a general thought about using multiple VAD results for the time being.\nUsing a soft-OR logic may not be safe for an AGC in general, although for preventing changes during non-speech parts it can be fine. For sure, I would not update the speech level estimation if just one VAD says there is speech - better being conservative.\nBriefly, consider switching to soft-AND logic to set |gain_change_up_allowed_| below.",
      "range": {
        "startLine": 130,
        "startChar": 33,
        "endLine": 131,
        "endChar": 57
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2dcfad0_19e59f80",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.cc",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "I contemplated this for a while and now think that you are right. \u0027all_of\u0027 instead of \u0027any_of\u0027.",
      "parentUuid": "f0988161_f692ba8b",
      "range": {
        "startLine": 130,
        "startChar": 33,
        "endLine": 131,
        "endChar": 57
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5a96e6f_c29a2ed2",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "variable\n    ^",
      "range": {
        "startLine": 40,
        "startChar": 35,
        "endLine": 40,
        "endChar": 42
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d44aa0fd_2b0b14ed",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b5a96e6f_c29a2ed2",
      "range": {
        "startLine": 40,
        "startChar": 35,
        "endLine": 40,
        "endChar": 42
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "766b28dc_0733ce41",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "maybe |gain_increase_allowed_|?\n\nAlso, I\u0027m not sure the comment helps. if you accept |gain_increase_allowed_|, I would find that self-explanatory.",
      "range": {
        "startLine": 42,
        "startChar": 7,
        "endLine": 42,
        "endChar": 30
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "564593e9_1b75daf0",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "766b28dc_0733ce41",
      "range": {
        "startLine": 42,
        "startChar": 7,
        "endLine": 42,
        "endChar": 30
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ca20ea9_5af05e80",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "The names are tied to the usage, which i don\u0027t find immediate however.\nI would add a comment explaining that these values are used in place of estimated noise levels.\n\nAlso, kHighNoiseDbfs -\u003e kWithNoiseDbfs (since there is no low noise level - so it\u0027s just with vs without)",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 39
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "257e72ff_f350a9ae",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1ca20ea9_5af05e80",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 39
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4c07688d_96e8655f",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 44,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Is this trivially destructible? I guess so, but if not, don\u0027t define as constexpr here, but in each test function where it\u0027s used.",
      "range": {
        "startLine": 44,
        "startChar": 44,
        "endLine": 44,
        "endChar": 54
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62b8906a_4f186fc8",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 44,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Good point! Thanks, this made me read the relevant style guide sections. It is trivially destructible, so we can leave it as is.",
      "parentUuid": "4c07688d_96e8655f",
      "range": {
        "startLine": 44,
        "startChar": 44,
        "endLine": 44,
        "endChar": 54
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba1f84ac_08ffadbc",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Didn\u0027t we call this DbfsToLinear for the fixed digital? Or is it sth else?",
      "range": {
        "startLine": 69,
        "startChar": 28,
        "endLine": 69,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7359df75_895b250b",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "DbToRatio(x_db) \u003d 10 ** (x_db / 20)\nRatioToDb(x_ratio) \u003d 20 * log10(x_ratio)\n\nI think this is correct. We compare two ratios or quotients. One of them happens to be in the dB-scale. The difference between two dBFS values is a ratio, and we translate it to the linear scale.",
      "parentUuid": "ba1f84ac_08ffadbc",
      "range": {
        "startLine": 69,
        "startChar": 28,
        "endLine": 69,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a574b3df_6f6fd61e",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "I wonder if switching to relative error gives more insights on which precision is achieved. But the comparison is in the linear scale (not dBFS), so 0.1 absolute error seems perfectly fine.",
      "range": {
        "startLine": 84,
        "startChar": 51,
        "endLine": 84,
        "endChar": 55
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fad7bce7_41f4c350",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a574b3df_6f6fd61e",
      "range": {
        "startLine": 84,
        "startChar": 51,
        "endLine": 84,
        "endChar": 55
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66b91713_a867c749",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Add dBFS suffix. Also, I\u0027m not sure constants defined in a function should be named as k... using camel case (that might only apply to file constants). If so, initial_level_dbfs is fine (and fix all the other constants in the test functions).",
      "range": {
        "startLine": 94,
        "startChar": 18,
        "endLine": 94,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1985609_368ed852",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 94,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "66b91713_a867c749",
      "range": {
        "startLine": 94,
        "startChar": 18,
        "endLine": 94,
        "endChar": 31
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "798e3d78_18c3da57",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Add SCOPED_TRACE(i); above",
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d2bcc56_b1299850",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 103,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "798e3d78_18c3da57",
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0db3bfe1_2007c55b",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 110,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Nice test!",
      "range": {
        "startLine": 109,
        "startChar": 4,
        "endLine": 110,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c1fcf9e_5faa358c",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "The whole loop seems the same as the above one except for the initial level.\nConsider defining a function to remove duplicated code (either in the anon NS or in this test method if not exploited elsewhere).",
      "range": {
        "startLine": 115,
        "startChar": 2,
        "endLine": 115,
        "endChar": 47
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6869d49_19ae6d55",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "I tried that after your suggestion. Because the function contains \u0027EXPECT\u0027, I thought it was less clear what happens and what we test for.",
      "parentUuid": "2c1fcf9e_5faa358c",
      "range": {
        "startLine": 115,
        "startChar": 2,
        "endLine": 115,
        "endChar": 47
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f2bb26f_3ff47afe",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 116,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Add SCOPED_TRACE(i); above",
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d300fcf7_fd6bb069",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 116,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3f2bb26f_3ff47afe",
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d643022_fa4c80a3",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Why? Round-off or failing at bounding the adaptation rate?",
      "range": {
        "startLine": 123,
        "startChar": 38,
        "endLine": 123,
        "endChar": 46
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3402ccc_b42c2f58",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 123,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "The dB conversion functions behave a little different on e.g. Android. I\u0027ll remove the slack and check if the test passes on the bots.",
      "parentUuid": "4d643022_fa4c80a3",
      "range": {
        "startLine": 123,
        "startChar": 38,
        "endLine": 123,
        "endChar": 46
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f403c759_c790bb5b",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "Why? (similar to one of my previous comments)",
      "range": {
        "startLine": 151,
        "startChar": 54,
        "endLine": 151,
        "endChar": 59
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d127fd40_1923f2b8",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 151,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f403c759_c790bb5b",
      "range": {
        "startLine": 151,
        "startChar": 54,
        "endLine": 151,
        "endChar": 59
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "277879cf_f46e7ea5",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "add ASSERT_GT comparing to the maximum output noise level; we must guarantee that kHighNoiseDbfs triggers the noise capping behavior",
      "range": {
        "startLine": 165,
        "startChar": 23,
        "endLine": 165,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b37c7cb_eced67eb",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Sorry, I don\u0027t understand. Isn\u0027t it what we do here? We provide a high fake noise estimate, and check that the gain is not above 1.f",
      "parentUuid": "277879cf_f46e7ea5",
      "range": {
        "startLine": 165,
        "startChar": 23,
        "endLine": 165,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfaed60a_d79098af",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-04T13:55:07Z",
      "side": 1,
      "message": "What I mean is that |kWithNoiseDbfs| may not be loud enough to trigger the behavior you want to reproduce. Hence, I would add ASSERT_GT(kWithNoiseDbfs, kMaxNoiseLevelDbfs);\nIf that passes, then the test does what we want.\n\nI usually do this to make sure that the unit test does what I want and, if I change parameters, the test remains valid. Even better option:\nASSERT_GT(kWithNoiseDbfs, kMaxNoiseLevelDbfs) \u003c\u003c \"kWithNoiseDbfs is too low\";\nIn this way, when parameters change, we know how to fix :)",
      "parentUuid": "3b37c7cb_eced67eb",
      "range": {
        "startLine": 165,
        "startChar": 23,
        "endLine": 165,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a25c9b05_d63a21f6",
        "filename": "modules/audio_processing/agc2/adaptive_digital_gain_applier_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T15:45:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bfaed60a_d79098af",
      "range": {
        "startLine": 165,
        "startChar": 23,
        "endLine": 165,
        "endChar": 37
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b572eff5_d39d64e8",
        "filename": "modules/audio_processing/agc2/agc2_common.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "I would start with a higher value, say -20 dBFS, to limit the impact of the noise capping step. That could hide other AGC behaviors and make the adaptation ineffective. Once we\u0027re happy with the other params, then we could lower it a bit. Maybe add a TODO.",
      "range": {
        "startLine": 38,
        "startChar": 37,
        "endLine": 38,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23952c35_8646d55e",
        "filename": "modules/audio_processing/agc2/agc2_common.h",
        "patchSetId": 3
      },
      "lineNbr": 38,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "-50 is equivalent to the Level Controller\u0027s noise estimator tuning. When I tested, it worked reasonably well with the rest of the AGC. I\u0027d like to keep for now, and re-tune if we notice that it\u0027s a problem.",
      "parentUuid": "b572eff5_d39d64e8",
      "range": {
        "startLine": 38,
        "startChar": 37,
        "endLine": 38,
        "endChar": 40
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b655247_fb46f0b8",
        "filename": "modules/audio_processing/agc2/agc2_common.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 5122
      },
      "writtenOn": "2018-04-03T11:33:02Z",
      "side": 1,
      "message": "\"target gain reduction\" is a better wording since attenuation must not be done at all in AGC",
      "range": {
        "startLine": 42,
        "startChar": 24,
        "endLine": 42,
        "endChar": 35
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b76abc51_f971e177",
        "filename": "modules/audio_processing/agc2/agc2_common.h",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 5124
      },
      "writtenOn": "2018-04-04T12:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b655247_fb46f0b8",
      "range": {
        "startLine": 42,
        "startChar": 24,
        "endLine": 42,
        "endChar": 35
      },
      "revId": "4a7910fdbaf5795dc79e10ec04df315c61aad27b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}