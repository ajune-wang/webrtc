{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8536c29e_a9fcafde",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 18194
      },
      "writtenOn": "2021-09-13T10:51:19Z",
      "side": 1,
      "message": "Dear @Nikolaevskiy, @Persson,\n\nAs you already know, We\u0027ve modified the GetAlignmentAndMaybeAdjustScaleFactors() in alignment_adjuster.cc not to adjust scaling factors in simulcast layers when requested_alignment is same as kMaxAlignment(16).\n\nHowever, I\u0027ve encountered some issues with TEST_P(ResolutionAlignmentTest, SinkWantsAlignmentApplied) in video_stream_encoder_unittest.cc since it requires adjustments of scaling factors with requested_alignment greater than or equal to kMaxAlignment(16).\n\nSo I\u0027d like to suggest below alternatives to break down the obstacle.\n\n1. Simply eliminate the test cases with request_alignment \u003e\u003d 16\n2. Change the kMaxAlignment from 16 to 32(or greater) to recalculate the scaling factors and requested_alignment although we would suffer from modification of scaling factors from original ones.\n3. Adjust the simulcast layers\u0027s width \u0026 height to be multiple of GCD of original width/height and also be divisible by request_alignment in CreateSimulcastOrConferenceModeScreenshareStreams() in webrtc_video_engine.cc\n\nSince we\u0027ve let Android HardwareVideoEncoder\u0027s apply_alignment_to_all_simulcast_layers to False in following patch\n(https://webrtc-review.googlesource.com/c/src/+/229460/7), \nthere would hardly be such case of using request_alignment \u003d 16 with apply_alignment_to_all_simulcast_layers \u003d true. However, I\u0027d like to ask you for opinions before I go through. Any ideas would be appreciated.",
      "revId": "1721a13ea907431218fd39b425995734e9050204",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}