{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8bc8ca0a_20469091",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 17719
      },
      "writtenOn": "2021-10-15T15:05:17Z",
      "side": 1,
      "message": "Thank you for the comments!",
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb50d533_e389512c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 5125
      },
      "writtenOn": "2021-10-18T09:45:38Z",
      "side": 1,
      "message": "Still lgtm, but please take a look at comments.",
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5aaf39aa_d256352d",
        "filename": "modules/audio_processing/agc/analog_gain_stats_reporter.cc",
        "patchSetId": 13
      },
      "lineNbr": 45,
      "author": {
        "id": 5125
      },
      "writtenOn": "2021-10-18T09:45:38Z",
      "side": 1,
      "message": "Is it expected that the level could be beyond this region?\nIf not, I\u0027d suggest not doing the safe-clamp and instead DCHECK.\nThe safe-clamp costs some extra cycles and if no needed the input should not be clamped.\n\nAlso, the clamping can in itself hide errors in surrounding code.",
      "range": {
        "startLine": 45,
        "startChar": 2,
        "endLine": 45,
        "endChar": 78
      },
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bcb896b4_9205997d",
        "filename": "modules/audio_processing/agc/analog_gain_stats_reporter.cc",
        "patchSetId": 13
      },
      "lineNbr": 46,
      "author": {
        "id": 5125
      },
      "writtenOn": "2021-10-18T09:45:38Z",
      "side": 1,
      "message": "Extra parenthesis around this are not needed",
      "range": {
        "startLine": 46,
        "startChar": 29,
        "endLine": 46,
        "endChar": 69
      },
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c0586af_6286baff",
        "filename": "modules/audio_processing/agc/analog_gain_stats_reporter.cc",
        "patchSetId": 13
      },
      "lineNbr": 57,
      "author": {
        "id": 5125
      },
      "writtenOn": "2021-10-18T09:45:38Z",
      "side": 1,
      "message": "Nit\nI would suggest writing this as this instead\n\n  if (previous_analog_mic_level_.has_value() \u0026\u0026 level !\u003d previous_analog_mic_level_.value()) {\n    const int level_change \u003d level - previous_analog_mic_level_.value();\n    if (level_change \u003c 0) {\n      ++level_update_stats_.num_decreases;\n      level_update_stats_.sum_decreases -\u003d level_change;\n    } else {\n      ++level_update_stats_.num_increases;\n      level_update_stats_.sum_increases +\u003d level_change;\n    }\n  }\n\nWhat I prefer with the above is that it explicitly checks the previous_analog_mic_level_.has_value() in an if-statement before it is used.\n\n\nThe current version of the code works as well but as a reader I reacted on that on line 50 previous_analog_mic_level_.value() was used without checking whether it had a value.\nThat forced me to look further above. Indeed, this check is handled on line 46, but it is less explicit.\n\nTherefore, I\u0027d prefer the construct above instead.",
      "range": {
        "startLine": 46,
        "startChar": 2,
        "endLine": 57,
        "endChar": 5
      },
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34b082ee_3e80f988",
        "filename": "modules/audio_processing/agc/analog_gain_stats_reporter.h",
        "patchSetId": 13
      },
      "lineNbr": 54,
      "author": {
        "id": 5125
      },
      "writtenOn": "2021-10-18T09:45:38Z",
      "side": 1,
      "message": "This is only for testing, right?\nPlease then make a comment on that.\n\nAlso, since LevelUpdateStats is so small and this is only used for testing, it may make sense to return a copy of that instead of a reference, since that that then will not leave any doubt on what would happen if the reference is held while the UpdateStatistics are simultaneously called.",
      "range": {
        "startLine": 54,
        "startChar": 2,
        "endLine": 54,
        "endChar": 46
      },
      "revId": "b193bee798852f9dba1982c9a5dd2b70cf466ff5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}