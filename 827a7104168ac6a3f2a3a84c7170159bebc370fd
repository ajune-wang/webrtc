{
  "comments": [
    {
      "key": {
        "uuid": "c8d6796c_8ad49feb",
        "filename": "modules/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5027
      },
      "writtenOn": "2017-12-13T09:23:34Z",
      "side": 1,
      "message": "We\u0027re moving away from public_deps, but you\u0027re not really making anything worse here so let\u0027s go for that...",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 31,
        "endChar": 3
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "452b1dd5_22ef05f9",
        "filename": "modules/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5889
      },
      "writtenOn": "2017-12-19T19:56:04Z",
      "side": 1,
      "message": "Changed to \"deps\" to match change in master.",
      "parentUuid": "c8d6796c_8ad49feb",
      "range": {
        "startLine": 29,
        "startChar": 2,
        "endLine": 31,
        "endChar": 3
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f15b41eb_8861d520",
        "filename": "modules/audio_device/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 5027
      },
      "writtenOn": "2017-12-13T09:23:34Z",
      "side": 1,
      "message": "Why was this necessary? Are you sure it\u0027s always appropriate to set dummy build if we\u0027re not including the internal audio device?",
      "range": {
        "startLine": 362,
        "startChar": 4,
        "endLine": 364,
        "endChar": 5
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b79c9eec_b1f1b628",
        "filename": "modules/audio_device/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 5889
      },
      "writtenOn": "2017-12-13T09:30:04Z",
      "side": 1,
      "message": "While testing my changes, I was setting \"rtc_include_internal_audio_device \u003d false\" to also avoid dependencies on Pulse/Alsa. However the audio_device_unittest was always trying to create the device, so this define is now checked in the test (see https://webrtc-review.googlesource.com/c/src/+/32360/1/modules/audio_device/audio_device_unittest.cc#458) and no device created in this case.",
      "parentUuid": "f15b41eb_8861d520",
      "range": {
        "startLine": 362,
        "startChar": 4,
        "endLine": 364,
        "endChar": 5
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a839c75_c7fe0164",
        "filename": "modules/audio_device/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 5091
      },
      "writtenOn": "2017-12-13T10:02:04Z",
      "side": 1,
      "message": "How did you test and on what platforms?",
      "parentUuid": "b79c9eec_b1f1b628",
      "range": {
        "startLine": 362,
        "startChar": 4,
        "endLine": 364,
        "endChar": 5
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18978b93_e099bd46",
        "filename": "modules/audio_device/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 5889
      },
      "writtenOn": "2017-12-19T19:56:04Z",
      "side": 1,
      "message": "I\u0027m testing on Linux Ubuntu and bam uilding with system-provided libraries, i.e. not the sysroot from WebRTC/Chromium. As I also didn\u0027t have the various audio related libraries installed (pulse/alsa), I got linker errors without this define set because WebRTC is correctly built without the audio devices, but the tests still used them.\n\nError:\n$ ninja -C out/Default \nninja: Entering directory `out/Default\u0027\n[1/1] Regenerating ninja files\n[4/5] LINK ./modules_unittests\nFAILED: modules_unittests \npython \"../../build/toolchain/gcc_link_wrapper.py\" --output\u003d\"./modules_unittests\" -- ../../third_party/llvm-build/Release+Asserts/bin/clang++ -Wl,--fatal-warnings -fPIC -Wl,-z,noexecstack -Wl,-z,now -Wl,-z,relro -Wl,-z,defs -Wl,--no-as-needed -lpthread -Wl,--as-needed -fuse-ld\u003dlld -m64 -Werror -Wl,-O1 -Wl,--gc-sections -Wl,--gdb-index -nostdlib++ -Wl,-rpath-link\u003d. -Wl,--disable-new-dtags -o \"./modules_unittests\" -Wl,--start-group @\"./modules_unittests.rsp\"  -Wl,--end-group   -ldl -lpthread -lrt -lm \n/home/jojo/develop/google/webrtc/src/out/Default/../../third_party/llvm-build/Release+Asserts/bin/ld.lld: error: undefined symbol: webrtc::AudioDeviceModule::Create(webrtc::AudioDeviceModule::AudioLayer)\n\u003e\u003e\u003e referenced by audio_device_unittest.cc:465 (../../modules/audio_device/audio_device_unittest.cc:465)\n\u003e\u003e\u003e               obj/modules/audio_device/audio_device_unittests/audio_device_unittest.o:(webrtc::AudioDeviceTest::AudioDeviceTest())\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nninja: build stopped: subcommand failed.\n\nThinking about it, this change should probably be in a separate CL as it\u0027s not X11 related, what do you think?",
      "parentUuid": "6a839c75_c7fe0164",
      "range": {
        "startLine": 362,
        "startChar": 4,
        "endLine": 364,
        "endChar": 5
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c776398d_732e7d9d",
        "filename": "modules/audio_device/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 5091
      },
      "writtenOn": "2017-12-20T08:33:17Z",
      "side": 1,
      "message": "That was my initial feeling since afaik the ADM should not have any X11 dependency unless key-press detection requires it (https://cs.chromium.org/chromium/src/third_party/webrtc/modules/audio_device/win/audio_device_core_win.cc?sq\u003dpackage:chromium\u0026l\u003d4199).\n\nSo yes, if possible, please try to focus on only X11 in one CL and then come up with a more suitable title (and link to issue) for the rest.",
      "parentUuid": "18978b93_e099bd46",
      "range": {
        "startLine": 362,
        "startChar": 4,
        "endLine": 364,
        "endChar": 5
      },
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b84f5390_b153c4cc",
        "filename": "rtc_base/testutils.h",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 5077
      },
      "writtenOn": "2017-12-13T10:13:54Z",
      "side": 1,
      "message": "Would it be possible to pull these things out into their own file instead? That way we could avoid adding another #define and use the build config to include the file only in the targets requiring X11.",
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2cdff3d_e882a73c",
        "filename": "rtc_base/testutils.h",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 5889
      },
      "writtenOn": "2017-12-19T19:56:04Z",
      "side": 1,
      "message": "This code has been removed in https://webrtc.googlesource.com/src/+/aec6842b3141d1dd95597652e4c27cdfc0bd7418",
      "parentUuid": "b84f5390_b153c4cc",
      "revId": "827a7104168ac6a3f2a3a84c7170159bebc370fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}