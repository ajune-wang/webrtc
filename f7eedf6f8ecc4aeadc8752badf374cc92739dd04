{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "57042fbc_87ddc81b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-08-30T10:19:59Z",
      "side": 1,
      "message": "PTAL.",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ea3fad9_bee7a866",
        "filename": "p2p/client/basic_port_allocator_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-08-30T10:19:59Z",
      "side": 1,
      "message": "I\u0027m afraid I don\u0027t understand this part of the comment. Clarification welcome.",
      "range": {
        "startLine": 181,
        "startChar": 40,
        "endLine": 184,
        "endChar": 72
      },
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11c0b798_8996bd96",
        "filename": "p2p/client/basic_port_allocator_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 5053
      },
      "writtenOn": "2021-08-30T20:07:51Z",
      "side": 1,
      "message": "I think this is referring to something that happens in chromium, where we bind a socket to 0.0.0.0 and connect to 8.8.8.8 then use getsockname to see what local address is used, and use this for local STUN candidates. Apparently this address is sometimes different from the one that\u0027s used to connect to the STUN server?",
      "parentUuid": "5ea3fad9_bee7a866",
      "range": {
        "startLine": 181,
        "startChar": 40,
        "endLine": 184,
        "endChar": 72
      },
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a96b771b_cd3c69ca",
        "filename": "p2p/client/basic_port_allocator_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-08-31T07:39:08Z",
      "side": 1,
      "message": "Makes some sense (and webrtc does something similar in BasicNetworkManager::QueryDefaultLocalAddress). \n\nBut I don\u0027t get the phrase \"default local address\". I understand different source addresses might be used depending on destination address (even though it\u0027ll probably not be desirable behavior to use a different source address to the stun server, e.g., because it appears to be reachable some relatively local path).\n\nAnd in the case of the VirtualSocketServer, won\u0027t the specified source address be used in all cases where a socket is bound to the any address?",
      "parentUuid": "11c0b798_8996bd96",
      "range": {
        "startLine": 181,
        "startChar": 40,
        "endLine": 184,
        "endChar": 72
      },
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00191413_44e69c49",
        "filename": "p2p/client/basic_port_allocator_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 5053
      },
      "writtenOn": "2021-08-31T21:51:12Z",
      "side": 1,
      "message": "You\u0027re right, this doesn\u0027t really make sense in context of the VirtualSocketServer. Unless you consider \"0.0.0.0\" the \"default local address\", which I think is what\u0027s going on here.\n\nYou could replace this comment with what I described in the email: that this is stimulating a situation where we bind to 0.0.0.0 and getsockname/GetLocalAddress just returns 0.0.0.0, so the only way to actually learn the source address is from the STUN response.",
      "parentUuid": "a96b771b_cd3c69ca",
      "range": {
        "startLine": 181,
        "startChar": 40,
        "endLine": 184,
        "endChar": 72
      },
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ac9f8ce_0c5317b3",
        "filename": "p2p/client/basic_port_allocator_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 184,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-09-01T08:51:21Z",
      "side": 1,
      "message": "Rephrased along those lines.",
      "parentUuid": "00191413_44e69c49",
      "range": {
        "startLine": 181,
        "startChar": 40,
        "endLine": 184,
        "endChar": 72
      },
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76e001aa_5bb4c62f",
        "filename": "rtc_base/virtual_socket_server.cc",
        "patchSetId": 2
      },
      "lineNbr": 900,
      "author": {
        "id": 5053
      },
      "writtenOn": "2021-08-30T20:07:51Z",
      "side": 1,
      "message": "Why do we only want to do this for UDP?",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45b43db9_84330afe",
        "filename": "rtc_base/virtual_socket_server.cc",
        "patchSetId": 2
      },
      "lineNbr": 900,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-08-31T07:39:08Z",
      "side": 1,
      "message": "Hmm. I was under the impression TCP used the LookupConnection method instead, but it seems it uses both.\n\nI was also thinking that the selected source address was exposed only via RecvFrom, which isn\u0027t used with TCP. But I see now that it may have a subtle effect also on Accept and Disconnect code paths. \n\nI\u0027ve reverted this move, to keep the cl as a pure rename.",
      "parentUuid": "76e001aa_5bb4c62f",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "caa7221c_579f202f",
        "filename": "rtc_base/virtual_socket_server.cc",
        "patchSetId": 2
      },
      "lineNbr": 900,
      "author": {
        "id": 5053
      },
      "writtenOn": "2021-08-31T21:51:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "45b43db9_84330afe",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ede3ded5_726e537d",
        "filename": "rtc_base/virtual_socket_server.cc",
        "patchSetId": 2
      },
      "lineNbr": 1234,
      "author": {
        "id": 5053
      },
      "writtenOn": "2021-08-30T20:07:51Z",
      "side": 1,
      "message": "Change variable naming as well?",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "674059e1_b64e401e",
        "filename": "rtc_base/virtual_socket_server.cc",
        "patchSetId": 2
      },
      "lineNbr": 1234,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-08-31T07:39:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ede3ded5_726e537d",
      "revId": "f7eedf6f8ecc4aeadc8752badf374cc92739dd04",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}