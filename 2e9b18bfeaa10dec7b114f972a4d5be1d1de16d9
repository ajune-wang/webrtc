{
  "comments": [
    {
      "key": {
        "uuid": "909759e7_625a1a3c",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "Do we generally want to add the same file to multiple source sets? It probably works in this case, but I\u0027m worried that it might cause confusing \"multiple definition\" errors in the future.",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 39
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59ef7273_97d67190",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Ack. Instead of adding rtc_event_log_api to the deps of ice_log, the two headers were taken out and added to ice_log sources because we could not depend on rtc_event_log_api in the target rtc_p2p, which would be the case in the other CL (where ICE logging is activated with rtc_p2p depending on ice_log) if ice_log also depends on rtc_event_log_api. It would cause build failure when building with Chromium, likely due to cyclic dependency issues. In fact, rtc_p2p does not seem able to depend on system_wrappers (which is among the dependency of rtc_event_log_api). I also tried to take out several base headers from rtc_event_log_api and make a smaller target, which will be added to public_deps of both the refactored rtc_event_log_api and ice_log; however the gn check rules now prohibit the use of public_deps in WebRTC. We may need to break down several build targets to solve this issue.",
      "parentUuid": "909759e7_625a1a3c",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 39
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa69b288_dc2ae001",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-19T12:15:16Z",
      "side": 1,
      "message": "Hm, rtc_event_log used to use several things in system_wrappers/, but I\u0027m not sure that\u0027s the case anymore. Try to remove it?\n\nAdding phoglund@ for suggestions.",
      "parentUuid": "59ef7273_97d67190",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 39
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "950df366_446a1646",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-19T14:25:03Z",
      "side": 1,
      "message": "I created a CL that removes the system_wrappers dependency. (https://webrtc-review.googlesource.com/c/src/+/41261) Please let me know if it helps.",
      "parentUuid": "aa69b288_dc2ae001",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 39
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cc5072c_ab840321",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-20T00:20:16Z",
      "side": 1,
      "message": "The issue still exists and I figured the root cause is the dependency of rtc_event_log_api on media targets in call and modules, which depends on things like system_wrappers. It seems if we don\u0027t want the same headers in multiple source sets, we have to take these files out and make a new target that both rtc_event_log_api and ice_log can depend on, but like in my last reply comment, deps does not work in this case since sources in the media targets directly include these common headers, and public_deps is no longer allowed in WebRTC. One way that may get around the public_deps block is to create a meta-header as a source in rtc_event_log_api that includes the common ones, and refactor call/modules/media headers to include it instead of these small common headers. It feels more like a hack though. Is it possible to refactor the rtc_event_log_api target, so that the generic logging interface is a smaller target, and the events related to WebRTC implementations are separate targets, so that we may avoid inter-dependency among components of WebRTC because of using logging? Please let me know if you have other ideas to solve it.",
      "parentUuid": "950df366_446a1646",
      "range": {
        "startLine": 292,
        "startChar": 0,
        "endLine": 292,
        "endChar": 39
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c65c027_9d0cab9c",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 299,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "Same here.",
      "range": {
        "startLine": 299,
        "startChar": 0,
        "endLine": 299,
        "endChar": 36
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f24761a_ea551224",
        "filename": "logging/BUILD.gn",
        "patchSetId": 16
      },
      "lineNbr": 299,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8c65c027_9d0cab9c",
      "range": {
        "startLine": 299,
        "startChar": 0,
        "endLine": 299,
        "endChar": 36
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f583de33_6b97034e",
        "filename": "logging/rtc_event_log/icelogger.h",
        "patchSetId": 16
      },
      "lineNbr": 39,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "This makes it sound as if we\u0027re still going have ice events without a config in the log. As far as I can tell, the only way this can happen is if ~10000 events are inserted into the log after logging has been started but before the output thread has been executed. This is way outside normal operating parameters for the log. May I suggest replacing the entire comment by:\n\n// This method constructs a config event for each candidate pair with their\n// description and logs these config events. It is intended to be called when logging starts to // ensure that we have at least one config for each candidate pair id.",
      "range": {
        "startLine": 38,
        "startChar": 62,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d5aaec9_e288bbc6",
        "filename": "logging/rtc_event_log/icelogger.h",
        "patchSetId": 16
      },
      "lineNbr": 39,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f583de33_6b97034e",
      "range": {
        "startLine": 38,
        "startChar": 62,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfbacc1b_8e791440",
        "filename": "logging/rtc_event_log/icelogger.h",
        "patchSetId": 16
      },
      "lineNbr": 39,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-19T12:15:16Z",
      "side": 1,
      "message": "You didn\u0027t like my wording?",
      "parentUuid": "2d5aaec9_e288bbc6",
      "range": {
        "startLine": 38,
        "startChar": 62,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afc1cdaa_b5e8dc62",
        "filename": "logging/rtc_event_log/icelogger.h",
        "patchSetId": 16
      },
      "lineNbr": 39,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-20T00:20:16Z",
      "side": 1,
      "message": "Oh, sorry. That was a glitch in my patch and I missed the update.",
      "parentUuid": "bfbacc1b_8e791440",
      "range": {
        "startLine": 38,
        "startChar": 62,
        "endLine": 39,
        "endChar": 15
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f78f36c_057eddbc",
        "filename": "logging/rtc_event_log/rtc_event_log.proto",
        "patchSetId": 16
      },
      "lineNbr": 375,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "nit: I think there are too many uses of the variable name type. When reading \"event.type\", it isn\u0027t immediately clear whether it refers to Event::type IceCandidatePairConfig::type or IceCandidatePairEvent::type. Wdyt about candidate_type instead?",
      "range": {
        "startLine": 375,
        "startChar": 38,
        "endLine": 375,
        "endChar": 42
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10a8e39f_45ffbbc6",
        "filename": "logging/rtc_event_log/rtc_event_log.proto",
        "patchSetId": 16
      },
      "lineNbr": 375,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f78f36c_057eddbc",
      "range": {
        "startLine": 375,
        "startChar": 38,
        "endLine": 375,
        "endChar": 42
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0174a53_38b71b02",
        "filename": "logging/rtc_event_log/rtc_event_log.proto",
        "patchSetId": 16
      },
      "lineNbr": 408,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "nit: As above, wdyt about check_type or similar?",
      "range": {
        "startLine": 408,
        "startChar": 37,
        "endLine": 408,
        "endChar": 41
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85d71874_57cbc881",
        "filename": "logging/rtc_event_log/rtc_event_log.proto",
        "patchSetId": 16
      },
      "lineNbr": 408,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e0174a53_38b71b02",
      "range": {
        "startLine": 408,
        "startChar": 37,
        "endLine": 408,
        "endChar": 41
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9d2a2057_4819ae4c",
        "filename": "rtc_tools/event_log_visualizer/analyzer.h",
        "patchSetId": 16
      },
      "lineNbr": 112,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-18T18:46:52Z",
      "side": 1,
      "message": "Please add these 2 graph types and corresponding cmdline flags to the main.cc file in the same folder. They should probably be off by default.",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 40
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e06058e1_fdb26150",
        "filename": "rtc_tools/event_log_visualizer/analyzer.h",
        "patchSetId": 16
      },
      "lineNbr": 112,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-19T06:54:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9d2a2057_4819ae4c",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 40
      },
      "revId": "2e9b18bfeaa10dec7b114f972a4d5be1d1de16d9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}