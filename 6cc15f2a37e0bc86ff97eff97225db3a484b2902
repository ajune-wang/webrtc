{
  "comments": [
    {
      "key": {
        "uuid": "6b509fd7_ef58e0ce",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 249,
      "author": {
        "id": 9600
      },
      "writtenOn": "2020-05-06T22:52:26Z",
      "side": 1,
      "message": "Just a note I did try to solve the issue here first by changing the if to:\n\nif (!queue_.current_frame() || !queue_.current_frame()-\u003esize().equals(selected_monitor_rect_.size())) { ...\n\nThat is similar to how it\u0027s done in screen_capturer_win_gdi.cc, but for whatever reason that results in even worse crashing.\n\nI find the comment a bit confusing because it says \"from an older generation\" but the code actually just checks if current_frame() returned a nullptr.\n\nShould we change the comment? Maybe to something like:\n// Allocate the current frame buffer only if it is not already allocated.\n// Note we do not want to reallocate buffers at this point, since the caller\n// may still be reading from them.",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7c243d9_297c0a73",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 249,
      "author": {
        "id": 6236
      },
      "writtenOn": "2020-05-07T07:12:09Z",
      "side": 1,
      "message": "\u0027git show 3d34f66292a\u0027 seems to be back from 2013 and the same comment about \"older generation\" is the same in a few capturers including ScreenCapturerMac. I was looking if the code was changed after that the comment was added. But the above commit moves code from chromium/src to webrtc so we would need to follow the changes from chromium/src. But that\u0027s fine so yes please just change the comment to what you suggested, thx",
      "parentUuid": "6b509fd7_ef58e0ce",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5486c036_dc2ac1fa",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 249,
      "author": {
        "id": 9600
      },
      "writtenOn": "2020-05-07T21:13:05Z",
      "side": 1,
      "message": "Thanks for looking into that. I have changed top line of the comment.\n\nLooking at the code again while editing the comment I see that the crashes I was getting when I tried to fix the issue here may have been the result of the current frame having a matching size but incorrect top left for the monitor. I didn\u0027t verify that though because each recompile takes almost 20 minutes, and what we have works. There will be a lot of reallocation either way.",
      "parentUuid": "b7c243d9_297c0a73",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "76511618_42235bd8",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 6236
      },
      "writtenOn": "2020-05-06T14:41:22Z",
      "side": 1,
      "message": "The change looks good, I can see there is this Reset call in ScreenConfigurationChanged too.\nI understood the reason of why we need that in SelectSource after reading your explanation on the ticket https://bugs.chromium.org/p/chromium/issues/detail?id\u003d396091#c86 .\nWould it be possible to put this explanation here in a short comment or in the commit description ? Thx\n\nThinking another time, to clarify the reason, this is when SelectSource is called after the capturer is started right ?",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89a96312_c6444034",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 9600
      },
      "writtenOn": "2020-05-06T22:52:26Z",
      "side": 1,
      "message": "Yes, this is needed when SelectSource is called again after CaptureFrame.",
      "parentUuid": "76511618_42235bd8",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dda96b8_51ac5fd4",
        "filename": "modules/desktop_capture/linux/screen_capturer_x11.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 6236
      },
      "writtenOn": "2020-05-07T07:12:09Z",
      "side": 1,
      "message": "Thx for adding the comment.",
      "parentUuid": "89a96312_c6444034",
      "revId": "6cc15f2a37e0bc86ff97eff97225db3a484b2902",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}