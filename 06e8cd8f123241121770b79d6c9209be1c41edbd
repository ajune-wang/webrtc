{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1c4e5672_96d968c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 19549
      },
      "writtenOn": "2023-11-24T07:24:08Z",
      "side": 1,
      "message": "Mostly refactoring but I came up with a question",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32a9e905_ae7ac185",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2023-11-24T07:56:36Z",
      "side": 1,
      "message": "Seems straightforward, but is there an advantage in using RtpMediaContentDescription rather than just MediaContentDescription?",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9e257a5_b234aa19",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 5634
      },
      "writtenOn": "2023-11-24T07:56:36Z",
      "side": 1,
      "message": "Moving away from RtpMediaContentDescription is in conflict with bugs.webrtc.org/15214 (move RTP stuff from MediaContentDescription to RtpMediaContentDescription), I think.",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5073790b_c1097dea",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 19549
      },
      "writtenOn": "2023-11-24T08:14:05Z",
      "side": 1,
      "message": "Yeah but I question that TODO (fixing it would result in a lot of churn) or at least the approach. We currently do a lot of content-\u003emedia_description()-\u003eas_xxx(). The better way to break the inheritance might be to add a shortcut content-\u003ertp_description() and content-\u003esctp_description()",
      "parentUuid": "f9e257a5_b234aa19",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b243ce9_e590d6ad",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 5634
      },
      "writtenOn": "2023-11-24T08:53:29Z",
      "side": 1,
      "message": "There are places where dealing with a pure \"I don\u0027t know if this is RTP or not\" makes sense (mostly where you\u0027re using the MediaContentDescription to refer to transport parameters, which is probably a mistaken design).\n\n\"protocol\" is probably the accessor that makes sense\nas for moving up to content level .... I\u0027m unsure if that\u0027s less churnful.\n\nif you were to change as_audio and as_video into as_rtp everywhere, rather than deleting it, that would minimize churn....?",
      "parentUuid": "5073790b_c1097dea",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "785fb559_00cfd102",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 19549
      },
      "writtenOn": "2023-11-24T09:16:45Z",
      "side": 1,
      "message": "oh that design is Jingle\u0027s split of media description and transport description:\n\u003cjingle\u003e\n_\u003ccontent\u003e\n__\u003cdescription media\u003d\"audio\" xmlns\u003d\"...rtp\"/\u003e\n___\u003ctransport/\u003e\n...\n(and unsurprisingly the class hierarchy still reflects the xml)\n\nWhat I want to avoid is the content.media_description()-\u003eas_audio-\u003ecodecs() chain which is often done without explicitly checking for nullptr (I think we are good but might want to add DCHECKs where we return them).\n\nIntroducing a shortcut content.rtp_description() / content.sctp_description() might be a better way to avoid this.\nOTOH we generally iterate over the contents and most of them are RTP which is why I think the SCTP content can do some extra work even if this is at the expense of inheriting all the RTP things.\n\norphis suggested another alternative which sounds nice: the content could have the description as a std::variant.",
      "parentUuid": "3b243ce9_e590d6ad",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1423b3a4_7dbe9d5b",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 7036
      },
      "writtenOn": "2023-11-24T09:59:57Z",
      "side": 1,
      "message": "We discussed this yesterday and the consensus was that we want to get away from the specialized Audio and Video classes and most usage should be from the MediaContentDescription interface.\n\nAnd we agreed that having a class be possibly one of 3 things (RTP or SCTP or neither) makes things more complicated and forces us to have those as_* methods everywhere.\n\nA long term solution (though the transition might be complicated) would be to have an `rtp()` and `sctp()` accessor that returns content stored in a variant that describes everything that\u0027s needed.\n\nIn order to get there, we need to first get rid of those Audio/Video classes referenced explicitly from the code (they don\u0027t bring anything to the table), one way to get them was with those `as_audio()` and `as_video()` calls.",
      "parentUuid": "785fb559_00cfd102",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04c66fc7_bc5e9b57",
        "filename": "pc/channel.cc",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 5634
      },
      "writtenOn": "2023-11-24T11:56:10Z",
      "side": 1,
      "message": "At least externally making the MediaContentDescription a HasA(RTP) or HasA(SCTP) rather than being an IsA relationship? That may make sense....",
      "parentUuid": "1423b3a4_7dbe9d5b",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "211f7e76_1a64b7f4",
        "filename": "pc/sdp_offer_answer.cc",
        "patchSetId": 1
      },
      "lineNbr": 5306,
      "author": {
        "id": 19549
      },
      "writtenOn": "2023-11-24T07:24:08Z",
      "side": 1,
      "message": "It is not clear to me why it makes a distinction between audio and video and has separate counters? In particular since we should be rejecting payload type collisions in a bundle group elsewhere.",
      "revId": "06e8cd8f123241121770b79d6c9209be1c41edbd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}