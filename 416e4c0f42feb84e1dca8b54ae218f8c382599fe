{
  "comments": [
    {
      "key": {
        "uuid": "72198255_d13281e4",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "Yeah, that\u0027s obvious from the code. I think a more useful comment would be\n\n# Used by the WebRTC DEPS autoroller to update third_party/, build/ etc.",
      "range": {
        "startLine": 10,
        "startChar": 4,
        "endLine": 10,
        "endChar": 89
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad06367b_08c52df4",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "72198255_d13281e4",
      "range": {
        "startLine": 10,
        "startChar": 4,
        "endLine": 10,
        "endChar": 89
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "67c521e1_39bfdf8e",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "Can you elaborate on why you chose this solution rather than just checking out third_party on the side in the recipe runner and passing its path to the roll script? What do we gain by doing it this way?",
      "range": {
        "startLine": 79,
        "startChar": 6,
        "endLine": 79,
        "endChar": 47
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edcb13f4_455057c1",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "Checkouting third_party on the side will be more complicated comparing to this solution because of these points:\n1. We need to modify recipe to checkout third_party and put it somewhere on the build bot and configure not to do fresh checkout every time\n2. We need to pass this location to autoroller script\n3. During manual autoroller run user have to manually checkout third_party somewhere and pass its directory to the autoroller script. Also we have to provide some instructions (it can be done by error messages also)\n\nIn this solution all configuration will be done from the box, user just need to specify custom var in .gclient file. For autoroller bot it will require just simple modification: add custom var into recipe. It can take a bit more time during gclient sync, because of third_party checkout, but looks like this time for bot and manual rolls is not critical. But in such case this solution will use previously validated and work-proved methods to get required files properly.",
      "parentUuid": "67c521e1_39bfdf8e",
      "range": {
        "startLine": 79,
        "startChar": 6,
        "endLine": 79,
        "endChar": 47
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59aacfbf_dd89ccf7",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-05-03T07:00:05Z",
      "side": 1,
      "message": "1. Yes. Not sure what you mean by \"not do fresh checkout every time\" - you do need to git clone the repo on each run since we\u0027re always rolling to HEAD. Do you mean that the checkout should be cached so the git pull becomes incremental? That we should aim to do, and AFAIK there are caches for git repos on the bots that we can use. I can dig more there if you want.\n2. I don\u0027t think this is a problem. I think it makes the \"API\" between the script and DEPS clearer. Sure, the script already interacts with the DEPS file, but I think this solution is just a really convoluted way to run git clone.\n3. Also not a problem IMO: the user currently gets an error message about setting a variable, and instead they will get an error message \"run `git clone xyz /tmp/chromium_third_party` and pass --chromium-third-party-dir\u003d/tmp/chromium_third_party/third_party to this script\". That\u0027s a wash in my book. Note also that with the var solution, the user will need to remember to remove the variable from their .gclient when they\u0027re done, or their checkout will be slowed down slightly for all coming syncs.\n\nAs for the time it takes, it should take about the same time to run git clone by ourselves and syncing in DEPS. As for DEPS being a validated way of getting things: this is true, but I\u0027m pretty sure it just runs git clone :) Otherwise the complexity comes from conditions and recursing into other DEPS files, but we need neither here.",
      "parentUuid": "edcb13f4_455057c1",
      "range": {
        "startLine": 79,
        "startChar": 6,
        "endLine": 79,
        "endChar": 47
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8eb98ab_0dc67b00",
        "filename": "DEPS",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-03T08:21:11Z",
      "side": 1,
      "message": "Yes, they have very similar points, but using DEPS file has a batch of small improvements comparing to the side checkout. From my point of view it is much easier to manage all stuff, when it is staying together, then separate dependent parts. So I think the main advantage is that it will work out of the box after adding one-line config changes. It will simplify rolling bot maintenance and, I think, local runs (maybe only a bit).",
      "parentUuid": "59aacfbf_dd89ccf7",
      "range": {
        "startLine": 79,
        "startChar": 6,
        "endLine": 79,
        "endChar": 47
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7be6cd61_09db4515",
        "filename": "THIRD_PARTY_DEPS",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 5114
      },
      "writtenOn": "2018-05-02T13:48:25Z",
      "side": 1,
      "message": "Yes, nothing is using this structure, this should be just a list. Can still keep comments",
      "range": {
        "startLine": 1,
        "startChar": 48,
        "endLine": 1,
        "endChar": 67
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8075bf30_961893f8",
        "filename": "THIRD_PARTY_DEPS",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7be6cd61_09db4515",
      "range": {
        "startLine": 1,
        "startChar": 48,
        "endLine": 1,
        "endChar": 67
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ff73ed1_821b78e9",
        "filename": "THIRD_PARTY_DEPS",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "Hmm. This whole list and PLATFORM_DEPS seems like really unfortunate duplication of DEPS. Is there any way we can parse this information out of DEPS instead?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 15
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92421edd_9576bbcb",
        "filename": "THIRD_PARTY_DEPS",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "I\u0027m not sure, but I will think, how to fix it. I think it is better to roll first in this way to control all deps during such big change manually, and then try to figure out the way of automatic gathering of this list.",
      "parentUuid": "3ff73ed1_821b78e9",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 15
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "669bed3f_7312ecee",
        "filename": "THIRD_PARTY_DEPS",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-05-03T07:00:05Z",
      "side": 1,
      "message": "SGTM. Let\u0027s not put too much time on making this one look nice then; if we fail to generate this list later, we should investigate how we at least make it as concise and clear as possible.",
      "parentUuid": "92421edd_9576bbcb",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 15
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d8d7308_020032cd",
        "filename": "third_party/.gitignore",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "Looks like you\u0027re missing the first line from https://cs.chromium.org/chromium/src/third_party/.gitignore?q\u003dthird_party/.gi\u0026sq\u003dpackage:chromium\u0026l\u003d1 :)\n\nThis file will be automatically copied by the autoroller, right?",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 77
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b66a5769_ce355780",
        "filename": "third_party/.gitignore",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "We need to have separate ignore file because:\n1. We want to add own entries and not get conflicts during sync\n2. Don\u0027t accidentally ignore some deps, that will be ignored in chromium\n\nAlso looks like any missync in this file will be found because of more serious outages, like if some dep will be removed from chromium, we will fail to compile webrtc",
      "parentUuid": "1d8d7308_020032cd",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 77
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d5fe70d_2b01cc87",
        "filename": "tools_webrtc/autoroller/roll_deps.py",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "Nit: remove space",
      "range": {
        "startLine": 88,
        "startChar": 6,
        "endLine": 88,
        "endChar": 7
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bedb7174_4a45c7f5",
        "filename": "tools_webrtc/autoroller/roll_deps.py",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d5fe70d_2b01cc87",
      "range": {
        "startLine": 88,
        "startChar": 6,
        "endLine": 88,
        "endChar": 7
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1eca994a_95a6e4c1",
        "filename": "tools_webrtc/autoroller/roll_deps.py",
        "patchSetId": 1
      },
      "lineNbr": 397,
      "author": {
        "id": 5666
      },
      "writtenOn": "2018-05-02T13:56:34Z",
      "side": 1,
      "message": "ThirdParty",
      "range": {
        "startLine": 397,
        "startChar": 4,
        "endLine": 397,
        "endChar": 24
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0417ee93_ffa5bbc6",
        "filename": "tools_webrtc/autoroller/roll_deps.py",
        "patchSetId": 1
      },
      "lineNbr": 397,
      "author": {
        "id": 6337
      },
      "writtenOn": "2018-05-02T14:50:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1eca994a_95a6e4c1",
      "range": {
        "startLine": 397,
        "startChar": 4,
        "endLine": 397,
        "endChar": 24
      },
      "revId": "416e4c0f42feb84e1dca8b54ae218f8c382599fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}