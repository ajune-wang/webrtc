{
  "comments": [
    {
      "key": {
        "uuid": "425e3419_1e722bc4",
        "filename": "modules/desktop_capture/mac/desktop_frame_provider.mm",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 5029
      },
      "writtenOn": "2018-04-12T01:16:13Z",
      "side": 1,
      "message": "I remember I have asked a similar question before: won\u0027t OS immediately send us the updated frame after reconfiguration?",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 14
      },
      "revId": "8a7ccc48eef507936a96eb36636cf05e15b1aa96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5148345c_c2fb97c0",
        "filename": "modules/desktop_capture/mac/desktop_frame_provider.mm",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 6236
      },
      "writtenOn": "2018-04-12T05:48:09Z",
      "side": 1,
      "message": "Yes it will, why ? I am not sure to follow you, are you asking if we can change the line to \"io_surfaces_[display_id] \u003d SharedDesktopFrame::Wrap(std::move(desktop_frame_iosurface));\" ? thx!",
      "parentUuid": "425e3419_1e722bc4",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 14
      },
      "revId": "8a7ccc48eef507936a96eb36636cf05e15b1aa96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46762a83_c5bc8617",
        "filename": "modules/desktop_capture/mac/desktop_frame_provider.mm",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 6236
      },
      "writtenOn": "2018-04-12T18:12:02Z",
      "side": 1,
      "message": "I know see why you mentioned that (because of the CL description). In short if I add a trace here in the \"if (!frame_source) continue\"  https://chromium.googlesource.com/external/webrtc/+/master/modules/desktop_capture/mac/screen_capturer_mac.mm#415 then the trace continuously shows up without this CL and visually you will some missing parts instead of the 2 displays.\nI do not have a very concise explanation at the moment but it seems that CaptureFrame can be called a lot more than the handler and can be called in between stream handler for display A and stream handler for display B. So this CL ensures that the 2 frame sources (one for each display) are available when calling CaptureFrame.",
      "parentUuid": "5148345c_c2fb97c0",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 14
      },
      "revId": "8a7ccc48eef507936a96eb36636cf05e15b1aa96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5b871c5_727971bc",
        "filename": "modules/desktop_capture/mac/desktop_frame_provider.mm",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 6236
      },
      "writtenOn": "2018-04-12T18:13:58Z",
      "side": 1,
      "message": "Also it means it is really tight to the timing that is why sometimes it does not happen and this is why I did not see this issue earlier this week when we merged the other CL.",
      "parentUuid": "46762a83_c5bc8617",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 14
      },
      "revId": "8a7ccc48eef507936a96eb36636cf05e15b1aa96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f38d8187_ec2ec5b1",
        "filename": "modules/desktop_capture/mac/desktop_frame_provider.mm",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 5029
      },
      "writtenOn": "2018-04-12T22:25:41Z",
      "side": 1,
      "message": "Thank you for explaining my question. Yes, that means the OS won\u0027t send us the updated frame immediately. The delay of the first frame is sometimes noticeable.",
      "parentUuid": "b5b871c5_727971bc",
      "range": {
        "startLine": 58,
        "startChar": 0,
        "endLine": 59,
        "endChar": 14
      },
      "revId": "8a7ccc48eef507936a96eb36636cf05e15b1aa96",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}