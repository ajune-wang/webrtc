{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "af8713c0_57cff87a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5613
      },
      "writtenOn": "2022-09-26T19:26:34Z",
      "side": 1,
      "message": "thanks for feedback!\ni replied to the \"discussion invitation\" ðŸ˜Š",
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85079427_da778a8d",
        "filename": "api/video_codecs/video_encoder_config.h",
        "patchSetId": 3
      },
      "lineNbr": 138,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-09-26T16:33:14Z",
      "side": 1,
      "message": "This isn\u0027t a strict comment, but rather a discussion invitation.\n\nI see exactly one place, where this encoderInfo is actually populated with something non-empty.\n\nIt looks like it\u0027s used only for alignment, so maybe just pass alignment instead of the full EncoderInfo here? Or maybe can it be added to the VideoEncoderConfig?\n\nFinally, 4 parameters seems to be not enough to justify the wrapper struct, WDYT?",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 51
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec62cb15_9b28dcd3",
        "filename": "api/video_codecs/video_encoder_config.h",
        "patchSetId": 3
      },
      "lineNbr": 138,
      "author": {
        "id": 5613
      },
      "writtenOn": "2022-09-26T19:26:34Z",
      "side": 1,
      "message": "1) encoder info vs. alignment only\ni think it makes total sense to have encoder_config (aka what is to create the encoder) and encoder_ifo (aka info about the actually created encoder) as arguments. I would even argue that passing one without the other in weird (\nsince the encoder_config is incomplete information by definition).\n\n2) my next cl adds a 5th\nyou or someone else will add number 6.\nI think structs as argument for factories...is \"the right thing\"",
      "parentUuid": "85079427_da778a8d",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 51
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fd0367a_524632f2",
        "filename": "api/video_codecs/video_encoder_config.h",
        "patchSetId": 3
      },
      "lineNbr": 138,
      "author": {
        "id": 5613
      },
      "writtenOn": "2022-09-26T19:29:56Z",
      "side": 1,
      "message": "1b) this struct suggest the same...\nwebrtc/call/adaptation/encoder_settings.h",
      "parentUuid": "ec62cb15_9b28dcd3",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 51
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ba11a5f_27f8441e",
        "filename": "api/video_codecs/video_encoder_config.h",
        "patchSetId": 3
      },
      "lineNbr": 138,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-09-27T08:22:34Z",
      "side": 1,
      "message": "If more arguments are incoming, I\u0027m fine with the struct then.\n\nThen, this class has an unfortunate and a little confusing name. It takes some information about user requested video configuration (VideoEncoderConfig) and produces a more detailed encoder configuration (VideoStream is a config struct). It doesn\u0027t create any actual streams or encoders.\n\nSo, I would argue that this factory shouldn\u0027t know about encoder info. It\u0027s kind-of backwards.\n\nWDYT if we create a new method AdjustEncoderConfig(EncoderInfo), which would contain that hack with adjusting scaling factors based on encoder alignment and also would contain your logic to adjust requested streams resolutions based on the same alignment? It can even be not in this factory, but rather a static function in that case.\n\nI believe it would be clearer. This class will still have the same single purpose: convert VideoEncoderConfig to VideoStream configs.\n\nThen adjusting user requested configurations based on the encoder capabilities would be a separate routine.",
      "parentUuid": "7fd0367a_524632f2",
      "range": {
        "startLine": 138,
        "startChar": 5,
        "endLine": 138,
        "endChar": 51
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97631916_4edacc5e",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 3
      },
      "lineNbr": 937,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-09-26T16:33:14Z",
      "side": 1,
      "message": "I suggest to move this call inside CreateEncoderStreams, since now it will know about the alignment.\n\nOr maybe make a new function which would adjust encoder_config_ based on GetEncoderInfo(). Then VideoStreamFactory stays unchanged.",
      "range": {
        "startLine": 936,
        "startChar": 2,
        "endLine": 937,
        "endChar": 67
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40bf42d3_63e51792",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 3
      },
      "lineNbr": 937,
      "author": {
        "id": 5613
      },
      "writtenOn": "2022-09-26T19:26:34Z",
      "side": 1,
      "message": "will take a stub tomorrow!",
      "parentUuid": "97631916_4edacc5e",
      "range": {
        "startLine": 936,
        "startChar": 2,
        "endLine": 937,
        "endChar": 67
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89d633c9_0b2feee8",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 3
      },
      "lineNbr": 937,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-09-27T08:22:34Z",
      "side": 1,
      "message": "Based on my feedback above, please wait before doing this. Maybe it\u0027s better to move this into the new method instead.",
      "parentUuid": "40bf42d3_63e51792",
      "range": {
        "startLine": 936,
        "startChar": 2,
        "endLine": 937,
        "endChar": 67
      },
      "revId": "c6b36446f62ebc4ef48f4774cb73c6050bfc7d24",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}