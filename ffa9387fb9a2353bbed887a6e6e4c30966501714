{
  "comments": [
    {
      "key": {
        "uuid": "9d508008_cbe1f236",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.cc",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 5116
      },
      "writtenOn": "2018-08-22T07:26:08Z",
      "side": 1,
      "message": "Is it really necessary to allocate buffers when the delay is 0?",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c74ca78_b49f3e87",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.cc",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-08-23T09:38:58Z",
      "side": 1,
      "message": "Good point!\nIt worked without that.",
      "parentUuid": "9d508008_cbe1f236",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73bdcdf1_6f361070",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.cc",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 5116
      },
      "writtenOn": "2018-08-22T07:26:08Z",
      "side": 1,
      "message": "You could put \u0027j\u0027 as the inner loop to have less index fiddling (but perhaps that would be slightly worse cache-wise).\n\nThen you could also use last_insert_ instead of i to avoid the computation of last_insert_ at the end (it will be incremented by the loop).",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b288df1e_1adbad82",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.cc",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-08-23T09:38:58Z",
      "side": 1,
      "message": "Since the channels in frame and buf are stored as as consecutive memory, I think the current approach is better for the cache.\n\nGreat suggestion about last_insert_! I did a variant of it that avoids the division at the end. However, it is not possible to loop over last_insert_ as its initial value needs to be maintained at the second round of the outer loop.",
      "parentUuid": "73bdcdf1_6f361070",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df9cc2a0_aad72c1a",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.h",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 5116
      },
      "writtenOn": "2018-08-22T07:26:08Z",
      "side": 1,
      "message": "Maybe the unit of the delay could be clarified. Is it the number of samples in a 16 kHz signal?",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00cd3e5b_0abfdcb0",
        "filename": "modules/audio_processing/aec3/block_delay_buffer.h",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-08-23T09:38:58Z",
      "side": 1,
      "message": "Good point!\nDone!",
      "parentUuid": "df9cc2a0_aad72c1a",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d330cc9e_7f3b8663",
        "filename": "modules/audio_processing/aec3/echo_canceller3.cc",
        "patchSetId": 2
      },
      "lineNbr": 429,
      "author": {
        "id": 5116
      },
      "writtenOn": "2018-08-22T07:26:08Z",
      "side": 1,
      "message": "The \"if\" is not really needed as you have an early return in BlockDelayBuffer when the delay is zero.",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "227f7e57_90f4e3a5",
        "filename": "modules/audio_processing/aec3/echo_canceller3.cc",
        "patchSetId": 2
      },
      "lineNbr": 429,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-08-23T09:38:58Z",
      "side": 1,
      "message": "True, but I think it makes sense to have it here regardless, as it otherwise gives the impression that the signal is always delayed.",
      "parentUuid": "d330cc9e_7f3b8663",
      "revId": "ffa9387fb9a2353bbed887a6e6e4c30966501714",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}