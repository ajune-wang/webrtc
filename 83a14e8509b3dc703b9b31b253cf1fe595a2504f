{
  "comments": [
    {
      "key": {
        "uuid": "896022c4_aff2e564",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 5126
      },
      "writtenOn": "2019-10-08T08:25:57Z",
      "side": 1,
      "message": "This will literally never overflow, right? So there\u0027s no reason not to use dchecked_cast.",
      "range": {
        "startLine": 24,
        "startChar": 18,
        "endLine": 24,
        "endChar": 29
      },
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fea7832_f9080cfc",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 5125
      },
      "writtenOn": "2019-11-15T15:43:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "896022c4_aff2e564",
      "range": {
        "startLine": 24,
        "startChar": 18,
        "endLine": 24,
        "endChar": 29
      },
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c3e45b64_c114e5a6",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 5126
      },
      "writtenOn": "2019-10-08T08:25:57Z",
      "side": 1,
      "message": "Hmm. The usual way this function works is by stretching or compressing input data; in order to avoid \"infinite\" stretching, where you end up creating something from nothing, you must do something like\n\n  if (num_output_channels \u003e 0) {\n    DCHECK_GT(input.num_channels_, 0);\n  }\n\nYou may additionally precede this with\n\n  if (input.samples_per_channel_ \u003e 0) {\n    DCHECK_GT(input.num_channels_, 0);\n    DCHECK_GT(num_output_channels, 0);\n  }\n\nbut this is just a normalization thing, which we may choose to enforce or not.",
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "049dafb7_2de872dc",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 5125
      },
      "writtenOn": "2019-11-15T15:43:37Z",
      "side": 1,
      "message": "From what I can see, that should be sufficiently enforced via the current DCHECKS and following resizing of the output.\n\nIs there a specific case you don\u0027t think is covered?",
      "parentUuid": "c3e45b64_c114e5a6",
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ffe8120_7d220b7a",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 5126
      },
      "writtenOn": "2019-11-19T18:30:12Z",
      "side": 1,
      "message": "Hmm, it\u0027s been a while. Let me see if I can reconstruct my reasoning... I think my complaint may have been that allowing input.num_channels_ \u003d\u003d 0 \u0026\u0026 num_output_channels \u003e 0 as long as input.samples_per_channel_ \u003d\u003d 0, while technically sufficient, just makes the DCHECK hard to understand. My suggestion disallows strictly more cases, and will give better error messages if violated.",
      "parentUuid": "049dafb7_2de872dc",
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "331c34dc_64dc5cf5",
        "filename": "modules/audio_coding/acm2/acm_remixing.cc",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 5252
      },
      "writtenOn": "2019-11-19T19:45:24Z",
      "side": 1,
      "message": "Ah, I see.\nI\u0027d prefer not to add specific if-clauses dedicated only for DCHECKS though as they increase the code size. Since DCHECKS very rarely are/should be triggered, I prefer them being small and trickier to debug rather than the opposite.",
      "parentUuid": "4ffe8120_7d220b7a",
      "revId": "83a14e8509b3dc703b9b31b253cf1fe595a2504f",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}