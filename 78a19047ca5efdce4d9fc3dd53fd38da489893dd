{
  "comments": [
    {
      "key": {
        "uuid": "5b2b3085_a8e28cff",
        "filename": "api/test/mock_video_encoder.h",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-06T08:29:16Z",
      "side": 1,
      "message": "Doesn\u0027t seem to belong here. Is it a left over from earlier cl?",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 70
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d9eeecf_03d53e1f",
        "filename": "api/test/mock_video_encoder.h",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-07T17:43:23Z",
      "side": 1,
      "message": "Yes, I just put it here while testing while trying to figure out why some tests don\u0027t work. Will split this into separate cl.",
      "parentUuid": "5b2b3085_a8e28cff",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 70
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bd9719ac_d041963f",
        "filename": "api/video_codecs/test/video_encoder_software_fallback_wrapper_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 580,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-06T08:29:16Z",
      "side": 1,
      "message": "Why true in this case? If SW encoder is used for low bitrates, good rate control should be quite important.",
      "range": {
        "startLine": 580,
        "startChar": 0,
        "endLine": 580,
        "endChar": 69
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66e729ff_677a7c51",
        "filename": "api/video_codecs/test/video_encoder_software_fallback_wrapper_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 580,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-07T17:43:23Z",
      "side": 1,
      "message": "It\u0027s true since it has not fallen back to software.\nI\u0027ll add an explicit fallback and check that it reports false after fallback.\nI noticed that to actually make this work we need to check frame dropper stats per frame as well, so fixed that.",
      "parentUuid": "bd9719ac_d041963f",
      "range": {
        "startLine": 580,
        "startChar": 0,
        "endLine": 580,
        "endChar": 69
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "975d56f1_8fe94591",
        "filename": "api/video_codecs/test/video_encoder_software_fallback_wrapper_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 580,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-08T08:33:58Z",
      "side": 1,
      "message": "Ok, so GetEncoderInfo on the same encoder can change mid-stream? I would prefer if it were more static. If it really needs to change, that should be documented in api/video_codecs/video_encoder.h.\n\nI was aware that some encoders change scaling_settings when Init is called (which caused me some trouble in the VideoStreamEncoder refactoring), but software fallback happens more spontaneously, right? To we get any related callbacks?\n\nDo we check has_trusted_rate_controller more or less every frame?",
      "parentUuid": "66e729ff_677a7c51",
      "range": {
        "startLine": 580,
        "startChar": 0,
        "endLine": 580,
        "endChar": 69
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "730cc3a8_1bd6e276",
        "filename": "api/video_codecs/test/video_encoder_software_fallback_wrapper_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 580,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-08T08:48:14Z",
      "side": 1,
      "message": "The fallback wrapper is the only one the can change in flight, as far as I know.\nIt does so depending on the current bitrate and resolution, and there\u0027s not really a callback we can hook onto.\n\nAnd yes, GetEncoderInfo() is polled and supports_native_handle and has_trusted_rate_controller are checked before every frame.\n\nbrandtr@, wdyt about these dynamic changes. Is this a feature we are planning on keeping around?",
      "parentUuid": "975d56f1_8fe94591",
      "range": {
        "startLine": 580,
        "startChar": 0,
        "endLine": 580,
        "endChar": 69
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07ff104f_9bf9b2e7",
        "filename": "api/video_codecs/test/video_encoder_software_fallback_wrapper_unittest.cc",
        "patchSetId": 6
      },
      "lineNbr": 580,
      "author": {
        "id": 5023
      },
      "writtenOn": "2018-11-08T13:55:25Z",
      "side": 1,
      "message": "Yeah, it\u0027s not so nice that we have to check the encoder_info on every frame.\n\nThe SW fallback can activate per frame, whenever the HW fails. I don\u0027t think we can get rid of this behaviour, but I guess we could return an error code that lets the VideoStreamEncoder reinit the fallback wrapper?\n\nThe forced SW fallback should only happen on re-inits, I believe. I can file a bug to try to clean up that code though -- it has gotten a bit stale.",
      "parentUuid": "730cc3a8_1bd6e276",
      "range": {
        "startLine": 580,
        "startChar": 0,
        "endLine": 580,
        "endChar": 69
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11dbf804_ac0a84ff",
        "filename": "api/video_codecs/video_encoder.h",
        "patchSetId": 6
      },
      "lineNbr": 141,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-06T08:29:16Z",
      "side": 1,
      "message": "It\u0027s not a method. Suggest just \"If true\".",
      "range": {
        "startLine": 141,
        "startChar": 7,
        "endLine": 141,
        "endChar": 34
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d92e4ad3_b4668502",
        "filename": "api/video_codecs/video_encoder.h",
        "patchSetId": 6
      },
      "lineNbr": 141,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-07T17:43:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "11dbf804_ac0a84ff",
      "range": {
        "startLine": 141,
        "startChar": 7,
        "endLine": 141,
        "endChar": 34
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d37bfe6_5e965272",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 6
      },
      "lineNbr": 527,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-06T08:29:16Z",
      "side": 1,
      "message": "This logic looks a bit strange. It only assigns the ScalingSettings from the first encoder, and it\u0027s the only piece that cares about the value of Initialized().",
      "range": {
        "startLine": 524,
        "startChar": 0,
        "endLine": 527,
        "endChar": 0
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ac04b66_e52627f7",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 6
      },
      "lineNbr": 527,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-07T17:43:23Z",
      "side": 1,
      "message": "I tried not to change the logic here. Maybe is should fix this adapter in a separate cl first,\nthe code got kinda messy when I tried to make it more proper.",
      "parentUuid": "5d37bfe6_5e965272",
      "range": {
        "startLine": 524,
        "startChar": 0,
        "endLine": 527,
        "endChar": 0
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a766a1a3_fd90356f",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 6
      },
      "lineNbr": 527,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-11-08T08:33:58Z",
      "side": 1,
      "message": "\u003e I tried not to change the logic here. Maybe is should fix this adapter in a separate cl first,\n\u003e the code got kinda messy when I tried to make it more proper.\n\nThat would be nice.",
      "parentUuid": "3ac04b66_e52627f7",
      "range": {
        "startLine": 524,
        "startChar": 0,
        "endLine": 527,
        "endChar": 0
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "676ee33c_fe38d28a",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 6
      },
      "lineNbr": 527,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-11-08T08:48:14Z",
      "side": 1,
      "message": "That was landed here: https://webrtc-review.googlesource.com/c/src/+/109620",
      "parentUuid": "a766a1a3_fd90356f",
      "range": {
        "startLine": 524,
        "startChar": 0,
        "endLine": 527,
        "endChar": 0
      },
      "revId": "78a19047ca5efdce4d9fc3dd53fd38da489893dd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}