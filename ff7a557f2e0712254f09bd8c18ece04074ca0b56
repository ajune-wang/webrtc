{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8b899cac_32d3b29f",
        "filename": "modules/video_coding/rtp_vp9_ref_finder.cc",
        "patchSetId": 7
      },
      "lineNbr": 194,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-26T09:08:06Z",
      "side": 0,
      "message": "Please keep this check.",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 194,
        "endChar": 3
      },
      "revId": "ff7a557f2e0712254f09bd8c18ece04074ca0b56",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c08dbc39_2b31d0ea",
        "filename": "modules/video_coding/rtp_vp9_ref_finder.cc",
        "patchSetId": 7
      },
      "lineNbr": 194,
      "author": {
        "id": 5825
      },
      "writtenOn": "2024-03-26T09:22:15Z",
      "side": 0,
      "message": "I think it is not needed because we have a similar check (but more correct since it uses kMaxVp9RefPics\u003d3 instead of kMaxFrameReferences\u003d5) in L103 which prevents inserting GOFs with \u003e3 refs into gof_info_. Or am I missing something?",
      "parentUuid": "8b899cac_32d3b29f",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 194,
        "endChar": 3
      },
      "revId": "ff7a557f2e0712254f09bd8c18ece04074ca0b56",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0539d28_b606b6e5",
        "filename": "modules/video_coding/rtp_vp9_ref_finder.cc",
        "patchSetId": 7
      },
      "lineNbr": 194,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-26T09:57:33Z",
      "side": 0,
      "message": "This is actually here to prevent OOB access of EncodedFrame::references [1], but I think you are right that the input validation on L103 should prevent this from happening. There is of course the very low probability of someone changing EncodedFrame::references to be shorter than 3, and then OOB could happen.\n\nI think I\u0027m leaning towards keeping the check, but you decide.\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/api/video/encoded_frame.h;l\u003d81;drc\u003d55b593fb6bf4e13e64c7dec41e07ce24a88bdf3f",
      "parentUuid": "c08dbc39_2b31d0ea",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 194,
        "endChar": 3
      },
      "revId": "ff7a557f2e0712254f09bd8c18ece04074ca0b56",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6457d64a_93f4e0ae",
        "filename": "modules/video_coding/rtp_vp9_ref_finder.cc",
        "patchSetId": 7
      },
      "lineNbr": 194,
      "author": {
        "id": 5825
      },
      "writtenOn": "2024-03-26T10:07:38Z",
      "side": 0,
      "message": "Ok, got it. Let\u0027s keep the check then.",
      "parentUuid": "a0539d28_b606b6e5",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 194,
        "endChar": 3
      },
      "revId": "ff7a557f2e0712254f09bd8c18ece04074ca0b56",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}