{
  "comments": [
    {
      "key": {
        "uuid": "494d48fb_d49033f3",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 23,
      "author": {
        "id": 7015
      },
      "writtenOn": "2018-08-28T11:06:59Z",
      "side": 1,
      "message": "I don\u0027t see a need to introduce simulation_position.\n\nMaybe enough to introduce a \"bool IsSimulationFinished()\",",
      "range": {
        "startLine": 23,
        "startChar": 15,
        "endLine": 23,
        "endChar": 33
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb33747e_e44b219f",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 23,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Good point, perhaps this is a bit too much. I\u0027ve replaced it with a bool is_simulation_finished.",
      "parentUuid": "494d48fb_d49033f3",
      "range": {
        "startLine": 23,
        "startChar": 15,
        "endLine": 23,
        "endChar": 33
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1b5f623_4d15d770",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 7015
      },
      "writtenOn": "2018-08-28T11:06:59Z",
      "side": 1,
      "message": "Please add comments to these quantities. Can they have meaningful values the same time? (I cannot judge since you have not implemented the way they obtain values.)\n\nWhat about a map(or vector)\u003cAction, int\u003e",
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7aa7918a_d4df9195",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Thanks for the idea. I added a comment to explain, and changed to a map.",
      "parentUuid": "c1b5f623_4d15d770",
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3db86871_883ea810",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 7015
      },
      "writtenOn": "2018-08-28T11:06:59Z",
      "side": 1,
      "message": "why only assign value to kNormal?",
      "range": {
        "startLine": 34,
        "startChar": 30,
        "endLine": 34,
        "endChar": 31
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6e64c02_80688c08",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "I guess the values should not be important, so I removed them.",
      "parentUuid": "3db86871_883ea810",
      "range": {
        "startLine": 34,
        "startChar": 30,
        "endLine": 34,
        "endChar": 31
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1ff82f3_c4b92c73",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 7015
      },
      "writtenOn": "2018-08-28T11:06:59Z",
      "side": 1,
      "message": "maybe better to call this NetEqState?",
      "range": {
        "startLine": 36,
        "startChar": 9,
        "endLine": 36,
        "endChar": 24
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b51a2a66_99d92c80",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d1ff82f3_c4b92c73",
      "range": {
        "startLine": 36,
        "startChar": 9,
        "endLine": 36,
        "endChar": 24
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3414937b_eeace7fa",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "Nit: the mean is probably not very useful. Unless there is clock-drift, the mean is expected to be equal to the packet size in ms. I think you\u0027d be better off with some variation metric.",
      "range": {
        "startLine": 39,
        "startChar": 7,
        "endLine": 40,
        "endChar": 25
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "210d4d76_866612b6",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "I guess you\u0027re right, I\u0027ll remove it for now and focus on useful metrics in a follow-up CL.",
      "parentUuid": "3414937b_eeace7fa",
      "range": {
        "startLine": 39,
        "startChar": 7,
        "endLine": 40,
        "endChar": 25
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "180a0559_4e2c7d3a",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "overwrite or override?",
      "range": {
        "startLine": 49,
        "startChar": 57,
        "endLine": 49,
        "endChar": 66
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e95dcc3d_b0b40485",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 49,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "I guess override makes more sense.",
      "parentUuid": "180a0559_4e2c7d3a",
      "range": {
        "startLine": 49,
        "startChar": 57,
        "endLine": 49,
        "endChar": 66
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "38db0ec1_6ef547a3",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 7015
      },
      "writtenOn": "2018-08-28T11:06:59Z",
      "side": 1,
      "message": "states or stats?",
      "range": {
        "startLine": 53,
        "startChar": 12,
        "endLine": 53,
        "endChar": 22
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1afa1121_8f5b5330",
        "filename": "api/test/neteq_simulator.h",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "I\u0027ve rewritten this comment.",
      "parentUuid": "38db0ec1_6ef547a3",
      "range": {
        "startLine": 53,
        "startChar": 12,
        "endLine": 53,
        "endChar": 22
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5adacbe8_da13b1ff",
        "filename": "modules/audio_coding/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 1524,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "Still needed?",
      "range": {
        "startLine": 1521,
        "startChar": 6,
        "endLine": 1524,
        "endChar": 7
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da162384_0706676b",
        "filename": "modules/audio_coding/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 1524,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Yes, it seems to be.",
      "parentUuid": "5adacbe8_da13b1ff",
      "range": {
        "startLine": 1521,
        "startChar": 6,
        "endLine": 1524,
        "endChar": 7
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a2d4612c_83c2548f",
        "filename": "modules/audio_coding/neteq/neteq_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 865,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "I think you will have to override the decision inside of the GetDecision function. If you override it at this point, you might have already popped a packet off the packet buffer, and if your override decision says not to use it, you\u0027ll just drop it on the floor. There are a bunch more of similar corners you can get trapped in.\n\nI suggest you override the decision soon after the call to decision_logic_-\u003eGetDecision inside NetEqImpl::GetDecision.",
      "range": {
        "startLine": 865,
        "startChar": 4,
        "endLine": 865,
        "endChar": 33
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f1d225e_9bbd2496",
        "filename": "modules/audio_coding/neteq/neteq_impl.cc",
        "patchSetId": 3
      },
      "lineNbr": 865,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Thanks for looking into this, I\u0027ve updated the code.",
      "parentUuid": "a2d4612c_83c2548f",
      "range": {
        "startLine": 865,
        "startChar": 4,
        "endLine": 865,
        "endChar": 33
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01768b3b_c871b016",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "Since you are switching on an enum, you don\u0027t need a default statement. The compiler will throw an error if all enum items aren\u0027t handled. (Try it...)\n\nOptional: if you reverse the check for a, you\u0027ll get early return on null, and less indentation:\n\n if (!a) {\n   return abls::nullopt;\n }\n switch (*a) {\n   case ...\n     return ...;\n }",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 34,
        "endChar": 25
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3880084_718593f6",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01768b3b_c871b016",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 34,
        "endChar": 25
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d6954dc_a5b87faa",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "This is confusing. It looks almost like the NetEqTest object assumes ownership of the underlying callback objects (but it doesn\u0027t). Any particular reason why you changed it?\n\nIf you don\u0027t like the copying of a struct, you could do this trick. Make the callbacks_ member variable a (non-const) reference:\n Callbacks\u0026 callbacks_;\n\nThen, pass it as a pointer to the ctor, and dereference it:\n NetEqTest::NetEqTest(...,\n                      Callbacks* callbacks)\n     : ...,\n       callbacks_(*callbacks),\n       ... {\n   RTC_DCHECK(callbacks);\n   ...\n }",
      "range": {
        "startLine": 59,
        "startChar": 21,
        "endLine": 59,
        "endChar": 57
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63861c18_988a7145",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "My intention was for the NetEqTest object to assume ownership of the Callbacks object itself (which doesn\u0027t include the things the callback functions point to, of course). The issue is that the Callbacks object itself needs to be alive while the simulation is being run, so it must be owned by either the NetEqTestFactory object, or the NetEqTest (which is what I chose). Do you think it would be better for NetEqTestFactory to own the Callbacks object?",
      "parentUuid": "4d6954dc_a5b87faa",
      "range": {
        "startLine": 59,
        "startChar": 21,
        "endLine": 59,
        "endChar": 57
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc59c0d3_000988af",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "I don\u0027t understand how that will happen. I suppose SetNextAction will be called, and then you press the \"play button\" to run until the next GetAudio, which executes the chosen action. Only when that has happened you will know the result, right?",
      "range": {
        "startLine": 161,
        "startChar": 2,
        "endLine": 161,
        "endChar": 55
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3114a927_02189600",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "What I intended to implement here is some sort of check if the chosen action makes sense in the current state. For example, choosing to accelerate while the buffer is completely empty is not possible, so that needs to be signaled somehow. I guess it\u0027s possible to do add this functionality elsewhere, or even in a separate function (something like CheckIfActionIsLegal()). WDYT?",
      "parentUuid": "bc59c0d3_000988af",
      "range": {
        "startLine": 161,
        "startChar": 2,
        "endLine": 161,
        "endChar": 55
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ebd61c7_149c1c9a",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 169,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "These are not the same...",
      "range": {
        "startLine": 169,
        "startChar": 2,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51fc30dc_68b7aa6e",
        "filename": "modules/audio_coding/neteq/tools/neteq_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 169,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "I\u0027ve removed this for now, I\u0027ll add useful metrics in a follow-up CL.",
      "parentUuid": "0ebd61c7_149c1c9a",
      "range": {
        "startLine": 169,
        "startChar": 2,
        "endLine": 169,
        "endChar": 58
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e0e7b90_980e85db",
        "filename": "modules/audio_coding/neteq/tools/neteq_test_factory.cc",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 5100
      },
      "writtenOn": "2018-08-28T09:25:52Z",
      "side": 1,
      "message": "I presume this file is more or less a straight copy of old neteq_rtpplay.cc.",
      "range": {
        "startLine": 1,
        "startChar": 1,
        "endLine": 1,
        "endChar": 2
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a977486_f8c238a4",
        "filename": "modules/audio_coding/neteq/tools/neteq_test_factory.cc",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 5607
      },
      "writtenOn": "2018-08-28T14:20:25Z",
      "side": 1,
      "message": "Indeed, it mostly is, I had to make some small changes because some variables are now members of the factory.",
      "parentUuid": "5e0e7b90_980e85db",
      "range": {
        "startLine": 1,
        "startChar": 1,
        "endLine": 1,
        "endChar": 2
      },
      "revId": "357de783352b6c1d84689470b4b92572be6f22cd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}