{
  "comments": [
    {
      "key": {
        "uuid": "fef11656_a3725b7c",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 218,
      "author": {
        "id": 7015
      },
      "writtenOn": "2020-06-23T14:07:25Z",
      "side": 1,
      "message": "I am thinking return absl::nullopt here (meaning changing the return type also)\n\nand I think we can return absl::nullopt when enabled\u003dfalse.",
      "range": {
        "startLine": 218,
        "startChar": 4,
        "endLine": 218,
        "endChar": 14
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23bec16a_36cf7701",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 218,
      "author": {
        "id": 8038
      },
      "writtenOn": "2020-06-23T14:19:11Z",
      "side": 1,
      "message": "This should never happen and we should crash in that case.",
      "parentUuid": "fef11656_a3725b7c",
      "range": {
        "startLine": 218,
        "startChar": 4,
        "endLine": 218,
        "endChar": 14
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04c06fb1_7eada156",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 218,
      "author": {
        "id": 7015
      },
      "writtenOn": "2020-06-23T15:46:20Z",
      "side": 1,
      "message": "not sure whether WEBRTC_ENABLE_PROTOBUF\u003dfalse anywhere. I would suggest to ask mbonadei to advice whether we should handle that case with high carefullness.\n\nI think some other places treat it as firing a RTC_NOTREACHED (a DCHECK) and then continues as if the request is ignored.",
      "parentUuid": "23bec16a_36cf7701",
      "range": {
        "startLine": 218,
        "startChar": 4,
        "endLine": 218,
        "endChar": 14
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54ba1806_b20dde83",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 218,
      "author": {
        "id": 8038
      },
      "writtenOn": "2020-06-23T16:15:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "04c06fb1_7eada156",
      "range": {
        "startLine": 218,
        "startChar": 4,
        "endLine": 218,
        "endChar": 14
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e1cebc73_1f815dcc",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 7015
      },
      "writtenOn": "2020-06-23T14:07:25Z",
      "side": 1,
      "message": "I think we can perhaps extend GetAudioNetworkAdaptorConfig (line 143) to gather options_, rtp_paramters_ and adaptive_ptime_config_ to make a joint decision.",
      "range": {
        "startLine": 841,
        "startChar": 7,
        "endLine": 843,
        "endChar": 78
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21d885c9_7979e521",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 8038
      },
      "writtenOn": "2020-06-23T14:19:11Z",
      "side": 1,
      "message": "options_ is a member of WebRtcVoiceMediaChannel and rtp_parameters_ is a member of WebRtcAudioSendStream. We can thus not make a joint decision without a refactor.",
      "parentUuid": "e1cebc73_1f815dcc",
      "range": {
        "startLine": 841,
        "startChar": 7,
        "endLine": 843,
        "endChar": 78
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5261f99_f92c96e1",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 7015
      },
      "writtenOn": "2020-06-23T15:46:20Z",
      "side": 1,
      "message": "true.\n\nWhat I would suggest to achieve is a consistent way of determining audio network config in the following two paths that audio network config may change,\n\n1. SetOptions -\u003e SetAudioNetworkAdaptorConfig -\u003e ReconfigureAudioSendStream\nand\n2. SetRtpParameters -\u003e ReconfigureAudioSendStream\n\nwe cannot assume the order that the two paths gets called. I think that, before ReconfigureAudioSendStream(), both should use the same logic (one utility function) to decide the ANA. In addition, config_.audio_network_adaptor_config should always be the single ground truth for ANA.\n\nI therefore think WebRtcAudioSendStream needs to keep a local copy of options (or relevant fields in options to determine ANA. I know it is ugly that there are two such data in options)",
      "parentUuid": "21d885c9_7979e521",
      "range": {
        "startLine": 841,
        "startChar": 7,
        "endLine": 843,
        "endChar": 78
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb77b185_0524e131",
        "filename": "media/engine/webrtc_voice_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 843,
      "author": {
        "id": 8038
      },
      "writtenOn": "2020-06-23T16:15:47Z",
      "side": 1,
      "message": "Made a local copy and re-evaluate the config each time. Looks simpler now, PTAL again.",
      "parentUuid": "b5261f99_f92c96e1",
      "range": {
        "startLine": 841,
        "startChar": 7,
        "endLine": 843,
        "endChar": 78
      },
      "revId": "6e65069d3ee9bc79ae7b662e0ea3482e1fe66ba1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}