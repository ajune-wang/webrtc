{
  "comments": [
    {
      "key": {
        "uuid": "a70106fd_566c5066",
        "filename": "api/task_queue/task_queue_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 218,
      "author": {
        "id": 5126
      },
      "writtenOn": "2019-01-31T02:10:02Z",
      "side": 1,
      "message": "This can be a plain int; no struct needed, AFAICT.\n\nHowever, since you modify it concurrently below without an synchronization (as far as you know, since you can\u0027t assume that the test will succeed!), it should probably be atomic. Unsynchronized concurrent reads and writes are UB.",
      "revId": "276d16f06d4fe70de22eea63eacad83382a1dee6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01b18d32_74eadd1f",
        "filename": "api/task_queue/task_queue_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 218,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-01-31T07:25:16Z",
      "side": 1,
      "message": "the purpose of the test is to ensure TaskQueue sets proper memory barriers.\n\nwouldn\u0027t using atomic set those barries for the TaskQueue and thus stop testing what it suppose to test?\nAbsent of those barriers is UB which expected to be caught. Likely not with regular run, but with run under tsan.",
      "parentUuid": "a70106fd_566c5066",
      "revId": "276d16f06d4fe70de22eea63eacad83382a1dee6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afa79b48_edf38d9b",
        "filename": "rtc_base/task_queue_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 378,
      "author": {
        "id": 5019
      },
      "writtenOn": "2019-01-30T13:28:35Z",
      "side": 1,
      "message": "why do you prefer it to be struct instead of plain int?",
      "range": {
        "startLine": 375,
        "startChar": 2,
        "endLine": 378,
        "endChar": 10
      },
      "revId": "276d16f06d4fe70de22eea63eacad83382a1dee6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db0e46ae_f7d0bbe7",
        "filename": "rtc_base/task_queue_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 378,
      "author": {
        "id": 6337
      },
      "writtenOn": "2019-01-30T13:34:49Z",
      "side": 1,
      "message": "It looks closer to the case, that I imagine.",
      "parentUuid": "afa79b48_edf38d9b",
      "range": {
        "startLine": 375,
        "startChar": 2,
        "endLine": 378,
        "endChar": 10
      },
      "revId": "276d16f06d4fe70de22eea63eacad83382a1dee6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}