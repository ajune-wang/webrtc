{
  "comments": [
    {
      "key": {
        "uuid": "e81e2beb_c5424f44",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5112
      },
      "writtenOn": "2017-10-12T13:19:35Z",
      "side": 1,
      "message": "What is the client doesn\u0027t want AudioProcessing? I would prefer the client to be forced to pass it in.",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5392527_04ce497c",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5119
      },
      "writtenOn": "2017-10-12T15:20:16Z",
      "side": 1,
      "message": "Good question. Currently, one is created by default here:\nhttps://webrtc-review.googlesource.com/c/src/+/7610/7/sdk/android/src/jni/pc/media_jni.cc\nso this CL doesn\u0027t actually modify that functionality. I think if someone doesn\u0027t want AudioProcessing, they might have to compile with null_media_jni.cc.",
      "parentUuid": "e81e2beb_c5424f44",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd2dbce5_73db2c35",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5053
      },
      "writtenOn": "2017-10-13T00:21:13Z",
      "side": 1,
      "message": "Right, that\u0027s the case where you have a video-only or datachannel-only application, for example.",
      "parentUuid": "c5392527_04ce497c",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f47c676f_e08b113a",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5112
      },
      "writtenOn": "2017-10-13T07:23:06Z",
      "side": 1,
      "message": "I would still prefer to remove this. The null solution is not very clean and I would like to move away from it in the long term. Hopefully, when all the components are injected, we could have separate so-files for different components or just have the client compile a so-file themselves from the static libraries they need.",
      "parentUuid": "fd2dbce5_73db2c35",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28bce5fc_ce924059",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5119
      },
      "writtenOn": "2017-10-13T14:08:36Z",
      "side": 1,
      "message": "I take it to mean I\u0027ll leave the check in, for now, since this is how today\u0027s JNI layer handles the switch between media and no media support? An alternative is to move the decision into the Java layer and default to creating an APM there, but that\u0027ll give us an additional JNI call and we\u0027ll need to support the DefaultAudioProcessingFactory class for datachannel_only builds (i.e. defining a JNI function in null_audio_jni.cc).\n\nIf we keep check in this layer, nit: I could move this check into CreateMediaEngine, to get rid of the CreateAudioProcessing function. Preferences?",
      "parentUuid": "f47c676f_e08b113a",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "979a921c_e2b1377d",
        "filename": "sdk/android/src/jni/pc/peerconnectionfactory_jni.cc",
        "patchSetId": 7
      },
      "lineNbr": 193,
      "author": {
        "id": 5112
      },
      "writtenOn": "2017-10-16T11:10:12Z",
      "side": 1,
      "message": "I would prefer if the new interface didn\u0027t create audio processing if null is passed. You can achieve this by creating two separate native JNI methods. I guess we should also then deprecate the old interface and have people move over.",
      "parentUuid": "28bce5fc_ce924059",
      "range": {
        "startLine": 191,
        "startChar": 0,
        "endLine": 193,
        "endChar": 3
      },
      "revId": "0b54a7e599476dea3c1e4740d62c1cb78037456c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}