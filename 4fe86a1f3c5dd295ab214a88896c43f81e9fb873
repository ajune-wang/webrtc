{
  "comments": [
    {
      "key": {
        "uuid": "b45c9e3d_5d85f6ec",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 5882
      },
      "writtenOn": "2018-02-21T01:18:47Z",
      "side": 1,
      "message": "May be use enum DecoderType { NONE, HARDWARE, SOFTWARE_FALLBACK } instead of 2 bool mutually exclusive flags - hw_decoder_initialized_ and fallback_decoder_initialized_",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a17c92fd_ae1c8470",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 5112
      },
      "writtenOn": "2018-02-22T10:15:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b45c9e3d_5d85f6ec",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "76c541d2_66f5d3a5",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 41,
      "author": {
        "id": 5882
      },
      "writtenOn": "2018-02-21T01:18:47Z",
      "side": 1,
      "message": "Could this be called multiple times during WebRTC call - for example if video resolution changes? If yes and previous InitHwDecoder() call failed then probably we should not attempt re initialize previously failed hw codec?",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3dc2f8b3_e8f54e6c",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 41,
      "author": {
        "id": 5112
      },
      "writtenOn": "2018-02-21T08:20:54Z",
      "side": 1,
      "message": "My idea was that maybe the decoder might start working again after a resolution change. For example a decoder might only have problems with big / small resolutions. What is your experience on this?\n\nIf this is not the case, I will update this to keep the failure even after InitDecode.",
      "parentUuid": "76c541d2_66f5d3a5",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e82fa644_d8396b5f",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 41,
      "author": {
        "id": 5882
      },
      "writtenOn": "2018-02-21T20:08:57Z",
      "side": 1,
      "message": "Ah yes, this may happen. But will WebRTC video engine invoke InitDecode() every time resolution changes? At least in Android HW implementation this resolution change detection is processed in jni wrapper.\nBut I don\u0027t have any preferences for this case - I have seen the cases when decoder can not support low resolution and cases when all attempts to init the decoder will fail - not sure which are more frequent.",
      "parentUuid": "3dc2f8b3_e8f54e6c",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61dfdc21_580b5a39",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 41,
      "author": {
        "id": 5112
      },
      "writtenOn": "2018-02-22T10:15:20Z",
      "side": 1,
      "message": "You are right I was confusing this with the encoder. There the codec is reinitialized. I\u0027ll keep this as is because it doesn\u0027t seem WebRTC reinitializes the codec.",
      "parentUuid": "e82fa644_d8396b5f",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 9
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22d8486d_aa14a858",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 5882
      },
      "writtenOn": "2018-02-21T01:18:47Z",
      "side": 1,
      "message": "This is critical error - both HW and SW decoder initialization fail. Should we save this ins some flag and immediately return error in VideoDecoderSoftwareFallbackWrapper::Decode() in this case?",
      "range": {
        "startLine": 49,
        "startChar": 2,
        "endLine": 49,
        "endChar": 8
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05ee7405_8acca1c9",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 5112
      },
      "writtenOn": "2018-02-22T10:15:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "22d8486d_aa14a858",
      "range": {
        "startLine": 49,
        "startChar": 2,
        "endLine": 49,
        "endChar": 8
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e12eac98_b77c0782",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 93,
      "author": {
        "id": 5882
      },
      "writtenOn": "2018-02-21T01:18:47Z",
      "side": 1,
      "message": "May be add\nif (!fallback_decoder_initialized_ \u0026\u0026 !hw_decoder_initialized_ ) {\n  return WEBRTC_VIDEO_CODEC_ERROR;\n}\nSo we never try to decode if both HW and SW codecs failed to initialize before",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 93,
        "endChar": 4
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b8db3ee4_4be1db6f",
        "filename": "media/engine/videodecodersoftwarefallbackwrapper.cc",
        "patchSetId": 11
      },
      "lineNbr": 93,
      "author": {
        "id": 5112
      },
      "writtenOn": "2018-02-22T10:15:20Z",
      "side": 1,
      "message": "Previously the logic was to just keep trying but just returning an error is cleaner, done.",
      "parentUuid": "e12eac98_b77c0782",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 93,
        "endChar": 4
      },
      "revId": "4fe86a1f3c5dd295ab214a88896c43f81e9fb873",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}