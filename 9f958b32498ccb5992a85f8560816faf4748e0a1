{
  "comments": [
    {
      "key": {
        "uuid": "a2d8ae0e_bb00eefb",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-02-20T15:47:44Z",
      "side": 1,
      "message": "If this class is really useful, shouldn\u0027t it be living in rtc_base?",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 64,
        "endChar": 0
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "faddc560_4c2edb44",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-20T15:53:25Z",
      "side": 1,
      "message": "yes, possibly stringutils.h. Could also be renamed to StringBuilder. Not rtc_base though. Probably something derived from or closer to rtc_base_approved. rtc_base is libjingle.\n\nIf we decide that this makes sense and that we\u0027d like two variants, we could have a StringBuilder and StringBuilderStack where the latter one would (likely) be more limited but faster and smaller footprint.",
      "parentUuid": "a2d8ae0e_bb00eefb",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 64,
        "endChar": 0
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e26a17e_64df0949",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-20T20:23:39Z",
      "side": 1,
      "message": "IIUC, Erik was talking about rtc_base/ (the directory), but you\u0027re talking about rtc_base (the build target). I agree that rtc_base (the build target) is the wrong place.\n\nI\u0027m not opposed to moving this sort of utility to rtc_base/ (the directory), but (1) it usually makes sense to have at least two users before moving something to a general utility pile, and (2) since this should not be in the API, it ought to go into rtc_base/some_subdir/ instead of directly under rtc_base/.",
      "parentUuid": "faddc560_4c2edb44",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 64,
        "endChar": 0
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3872b9d9_08b163c9",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-23T08:35:38Z",
      "side": 1,
      "message": "\"rtc_base\": Ah, sorry. Yes, rtc_base/ makes sense.\n\nAs we discussed offline, this CL wasn\u0027t initially thought of something to land, but as Jonas tells me that there are ~160 examples in our source code, so I\u0027ll continue with something simple that\u0027s based around a stack allocated buffer and supports a few common use cases.\n\nWdyt about moving this to stringutils.h and renaming to e.g. SimpleStringBuilder? (better naming suggestions welcome)",
      "parentUuid": "6e26a17e_64df0949",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 64,
        "endChar": 0
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af93b0bd_c0c59b33",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-23T10:13:07Z",
      "side": 1,
      "message": "sgtm",
      "parentUuid": "3872b9d9_08b163c9",
      "range": {
        "startLine": 63,
        "startChar": 17,
        "endLine": 64,
        "endChar": 0
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8f61e08_9c120b46",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-20T20:23:39Z",
      "side": 1,
      "message": "Is this type always std::string? Less confusing to spell that out, in that case.",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 8
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb27d78a_ee4ec676",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-23T08:35:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8f61e08_9c120b46",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 8
      },
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30435a58_9d31eff6",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-20T20:23:39Z",
      "side": 1,
      "message": "It looks like you\u0027re recomputing the length of the existing buffer contents each time, instead of saving the length between Append calls.",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e15a643_d31b94ce",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-23T08:35:38Z",
      "side": 1,
      "message": "do you mean that I should instead store the current length of buffer_ and pass the offset of e.g. |length_| to strcatn (and size - length_)?\n\nif so, I can do that but just checking if I understand correctly.",
      "parentUuid": "30435a58_9d31eff6",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db24a313_da5ca3e3",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-23T10:13:07Z",
      "side": 1,
      "message": "Yes---rtc::strcatn() finds the size of its first argument by scanning for the null terminator. But you already have that in `length_`, so you should be able to do something like\n\n  size_t len \u003d rtc::strcpyn(\u0026buffer_[length_], size - length_, str, length);",
      "parentUuid": "9e15a643_d31b94ce",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef5ccf34_1058a787",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-24T22:36:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "db24a313_da5ca3e3",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "054c1838_b2163cc1",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-20T20:23:39Z",
      "side": 1,
      "message": "By doing this, you zero out the entire buffer on construction, which is sort of wasteful. Better to just zero out the first byte?",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bb0ef7c_a7b15201",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-23T08:35:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "054c1838_b2163cc1",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "94f635e2_4dca2afc",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 165,
      "author": {
        "id": 5524
      },
      "writtenOn": "2018-02-20T15:47:44Z",
      "side": 1,
      "message": "Specifying the size the backing buffer in hex is a little confusing imo :)",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "611191e1_ae05b584",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 165,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-20T15:53:25Z",
      "side": 1,
      "message": "hah, old habit :) rule of thumb that I use: 0x1000 \u003d\u003d 1 page (4096)",
      "parentUuid": "94f635e2_4dca2afc",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "991e48e8_e05e298d",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 165,
      "author": {
        "id": 5126
      },
      "writtenOn": "2018-02-20T20:23:39Z",
      "side": 1,
      "message": "I would write this as 8 * 1024. That way, it\u0027s obvious to ~everyone that it\u0027s 8 kB.",
      "parentUuid": "611191e1_ae05b584",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b41d948b_b0a6a50e",
        "filename": "video/receive_statistics_proxy.cc",
        "patchSetId": 4
      },
      "lineNbr": 165,
      "author": {
        "id": 5508
      },
      "writtenOn": "2018-02-23T08:35:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "991e48e8_e05e298d",
      "revId": "9f958b32498ccb5992a85f8560816faf4748e0a1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}