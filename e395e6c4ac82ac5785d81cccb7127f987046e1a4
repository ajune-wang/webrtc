{
  "comments": [
    {
      "key": {
        "uuid": "ff9cb21f_2aa6967d",
        "filename": "sdk/objc/components/audio/RTCAudioSession.mm",
        "patchSetId": 1
      },
      "lineNbr": 382,
      "author": {
        "id": 5600
      },
      "writtenOn": "2019-12-04T21:30:06Z",
      "side": 1,
      "message": "success here could be disabling audio activation\n\nI think we only want to reset interrupted when audio activation is enabled?",
      "range": {
        "startLine": 382,
        "startChar": 15,
        "endLine": 382,
        "endChar": 28
      },
      "revId": "e395e6c4ac82ac5785d81cccb7127f987046e1a4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4ffdcff_554cb5c3",
        "filename": "sdk/objc/components/audio/RTCAudioSession.mm",
        "patchSetId": 1
      },
      "lineNbr": 382,
      "author": {
        "id": 9261
      },
      "writtenOn": "2019-12-19T16:36:30Z",
      "side": 1,
      "message": "It looks like if this block is reached due to deactivation, the interrupted state could be set to NO or left as is, with both options being functionally equivalent:\n* if an \"interruption ended notification\" arrives after deactivation, since `activationCount \u003d\u003d 0`, the audio session will not be reactivated;\n* if the audio session is deactivated while `isInterrupted \u003d\u003d YES`, and later the audio session is activated again, `isInterrupted` will be set to NO at that time.\n\nThe choice I think depends on whether we think it\u0027s meaningful for `isInterrupted` to be YES when the audio session has been deactivated. Originally I was thinking that the concept of interruption only applies while the audio session is activated (activationCount \u003e 0). Do you think it should also apply when `activationCount \u003d\u003d 0`?\n\nEither way, your comment made me realize that the argument sent to -notifyDidEndInterruptionWithShouldResumeSession: below should depend on `active`.",
      "parentUuid": "ff9cb21f_2aa6967d",
      "range": {
        "startLine": 382,
        "startChar": 15,
        "endLine": 382,
        "endChar": 28
      },
      "revId": "e395e6c4ac82ac5785d81cccb7127f987046e1a4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da7a2f01_c28f72fc",
        "filename": "sdk/objc/components/audio/RTCAudioSession.mm",
        "patchSetId": 1
      },
      "lineNbr": 382,
      "author": {
        "id": 5752
      },
      "writtenOn": "2019-12-19T19:31:02Z",
      "side": 1,
      "message": "hm when you put it that way, I\u0027d opine that interrupted should be treated separately from activation, and that we should keep it as consistent as we can. It\u0027s easier to track two separate / independent states rather than have one var only be meaningful based on another.\n\nif we successfully activate, we know that we\u0027re not interrupted\nif we don\u0027t successfully activate, we don\u0027t know anything about interrupted\nif we successfully deactivate, we don\u0027t know anything about interrupted\nif we don\u0027t successfully deactivate, we don\u0027t know anything about interrupted\n\nif we receive system notifications about interrupted state, we know its state, and can try to reactivate or deactivate the audio session\n\nif we come to foreground, we don\u0027t know anything about interrupted, but we can try to reactivate the audio session if we need to and if we succeed then we know we\u0027re not interrupted\n\nwith the above, it\u0027s possible to be interrupted (last known state) and not be active\n\ntbh like you say it\u0027s not super meaningful to keep track of interrupted when it\u0027s not active because we\u0027ll always try to activate it (at least the first time) and fail. Other components only really care about the transition to interrupted when an audio session is active.\n\ndoes that make sense?",
      "parentUuid": "e4ffdcff_554cb5c3",
      "range": {
        "startLine": 382,
        "startChar": 15,
        "endLine": 382,
        "endChar": 28
      },
      "revId": "e395e6c4ac82ac5785d81cccb7127f987046e1a4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}