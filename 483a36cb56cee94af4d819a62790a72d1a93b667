{
  "comments": [
    {
      "key": {
        "uuid": "b485f608_61a9a2fb",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-10-09T08:34:07Z",
      "side": 1,
      "message": "dllexport, right?",
      "range": {
        "startLine": 19,
        "startChar": 24,
        "endLine": 19,
        "endChar": 33
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f90ea44d_e5ab92ce",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-10-09T08:53:31Z",
      "side": 1,
      "message": "Yes, I fixed the CL description but not the comment. :)",
      "parentUuid": "b485f608_61a9a2fb",
      "range": {
        "startLine": 19,
        "startChar": 24,
        "endLine": 19,
        "endChar": 33
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c6f17d8_dfedd0d8",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-10-09T08:34:07Z",
      "side": 1,
      "message": "I don\u0027t think I understand the plan.\n\nThere ought to be some additional step(s) before removing this #undef? Or do you plan to land those two cls accepting intermediate breakage?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 52
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d41c318_0282c1fe",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-10-09T08:53:31Z",
      "side": 1,
      "message": "Yes, there will be intermediate breakage. I tried to think to an alternative but I failed.\n\nAs of today, when Chromium is in a component build (shard libraries) we will still offer static libraries and __declspec(dllexport)/__declspec(dllimport) in static libraries linked in different shared libraries creates problems.\n\nIt doesn\u0027t matter if I refactor Chromium first or WebRTC first, I will always end up in a situation where __declspec(dllexport)/__declspec(dllimport) should never appear unless Chromium depends on a WebRTC component instead of static libraries.",
      "parentUuid": "8c6f17d8_dfedd0d8",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 52
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f575cc48_977ef5a1",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-10-09T09:04:07Z",
      "side": 1,
      "message": "\u003e Yes, there will be intermediate breakage. I tried to think to an alternative but I failed.\n\u003e ... \n\u003e It doesn\u0027t matter if I refactor Chromium first or WebRTC first, I will always end up in a situation where __declspec(dllexport)/__declspec(dllimport) should never appear unless Chromium depends on a WebRTC component instead of static libraries.\n\nI might be possible to avoid breakage by creating webrtc targets like\n\n  webrtc_this_is_what_chromium_should_depend_on\n\npossibly several different for chromium render/, chromium remoting/ etc, if they currently depend on different parts of webrtc.\n\nStep 1: Create those temporary webrtc targets\n\nStep 2: Change chromium deps to go via the new targets.\n\nStep 3: Do webrtc changes to export symbols, *and* redirect above targets as appropriate to not break chromium.\n\nStep 4: Change chromium\u0027s dependencies to refer directly to the advertised webrtc component/library.\n\nStep 5: Delete the temporary targets.\n\nMost CS problems can be solved by adding yet another level of indirection... If it\u0027s worth the effort with a complex 5-step process, I don\u0027t know.",
      "parentUuid": "0d41c318_0282c1fe",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 52
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2388dac_6d79222d",
        "filename": "rtc_base/system/rtc_export.h",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2018-10-09T09:17:18Z",
      "side": 1,
      "message": "\u003e I might be possible to avoid breakage by creating webrtc targets like\n\u003e \n\u003e   webrtc_this_is_what_chromium_should_depend_on\n\u003e \n\u003e possibly several different for chromium render/, chromium remoting/ etc, if they currently depend on different parts of webrtc.\n\u003e \n\u003e Step 1: Create those temporary webrtc targets\n\u003e \n\u003e Step 2: Change chromium deps to go via the new targets.\n\u003e \n\u003e Step 3: Do webrtc changes to export symbols, *and* redirect above targets as appropriate to not break chromium.\n\u003e \n\u003e Step 4: Change chromium\u0027s dependencies to refer directly to the advertised webrtc component/library.\n\u003e \n\u003e Step 5: Delete the temporary targets.\n\u003e \n\u003e Most CS problems can be solved by adding yet another level of indirection... If it\u0027s worth the effort with a complex 5-step process, I don\u0027t know.\n\nI am not sure I am following. Aren\u0027t we going to hit the same problem when in step 3 more than one Chromium component will __declspec(dllimport) a symbol but no one will __declspec(dllexport) since we export only when WEBRTC_LIBRARY_IMPL is defined?",
      "parentUuid": "f575cc48_977ef5a1",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 25,
        "endChar": 52
      },
      "revId": "483a36cb56cee94af4d819a62790a72d1a93b667",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}