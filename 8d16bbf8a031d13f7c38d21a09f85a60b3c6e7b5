{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "efc09537_2bce596c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-03-07T10:15:22Z",
      "side": 1,
      "message": "Questioning wisdom of assuming that no call lasts for 26 hours.\n",
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5f1897d_23cba90c",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 5524
      },
      "writtenOn": "2022-03-07T10:02:12Z",
      "side": 1,
      "message": "Not really a fan of an int constrained in this way (and the `wrap_arounds_since_prev` name in plural since it can max one in each direction). Not sure if it\u0027s worth refactoring with an enum or something though..\n\nAlternatively, looks like it would be feasible to use a webrtc::Unwrapper\u003cuint32_t\u003e here instead",
      "range": {
        "startLine": 45,
        "startChar": 18,
        "endLine": 45,
        "endChar": 53
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67ae488b_10090040",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 18444
      },
      "writtenOn": "2022-03-07T13:34:59Z",
      "side": 1,
      "message": "I have switched to using this, and it massively cleans the code here.",
      "parentUuid": "d5f1897d_23cba90c",
      "range": {
        "startLine": 45,
        "startChar": 18,
        "endLine": 45,
        "endChar": 53
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86d71d05_6672011e",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 59,
      "author": {
        "id": 5524
      },
      "writtenOn": "2022-03-07T10:02:12Z",
      "side": 1,
      "message": "nit: maybe a named constant for this?",
      "range": {
        "startLine": 59,
        "startChar": 32,
        "endLine": 59,
        "endChar": 63
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2641ee58_6f995cab",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 59,
      "author": {
        "id": 18444
      },
      "writtenOn": "2022-03-07T13:34:59Z",
      "side": 1,
      "message": "Not relevant anymore.",
      "parentUuid": "86d71d05_6672011e",
      "range": {
        "startLine": 59,
        "startChar": 32,
        "endLine": 59,
        "endChar": 63
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79bda933_b103a9b5",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-03-07T10:15:22Z",
      "side": 1,
      "message": "At 90 KHz, the 32 bit RTP clock wraps every 13 hours, so the assumption that it will only wrap once is only valid for normal-sized conferences, not for (for instance) a security camera. (If I\u0027ve done the math right.)\n\nNote: CheckForWrapArounds is duplicated in rtc_base/time/timestamp_extrapolator.h; we should have only one.",
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e6cf76f_f8f633de",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 18444
      },
      "writtenOn": "2022-03-07T10:33:56Z",
      "side": 1,
      "message": "This could use a test. As far as this change, I deleted `_wrapArounds` because the use of `_wrapArounds` was just used to figure out the direction of the current wrap around. That is, the old code only supported 1 wrap around. (`_wrapArounds` was copied into a variable `prevWrapArounds` which was used to compute `wrapAroundsSincePrev`.) \n\nIn terms of usage here though, I *think* it should be ok. The purpose is to only measure time difference between the current and previous frame\u0027s decode time relative to their rtp time. Since we can only detect one wrap around at a time, the `wrapAroundsSincePrev * (static_cast\u003cint64_t\u003e(1) \u003c\u003c 32)` part in the old code will ensure the RTP time delta is compute correctly.\n\nAs for duplication, I will look into that and see if it can be moved. Otherwise, try the `webrtc::Unwrapper`.",
      "parentUuid": "79bda933_b103a9b5",
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44954693_690338f9",
        "filename": "modules/video_coding/inter_frame_delay.cc",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 18444
      },
      "writtenOn": "2022-03-07T13:22:45Z",
      "side": 1,
      "message": "I have added a test for this, and it passes without requiring more changes.",
      "parentUuid": "8e6cf76f_f8f633de",
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c8a9ef5_f06fcc25",
        "filename": "modules/video_coding/inter_frame_delay.h",
        "patchSetId": 4
      },
      "lineNbr": 43,
      "author": {
        "id": 5524
      },
      "writtenOn": "2022-03-07T10:02:12Z",
      "side": 1,
      "message": "nit: comment on the return value, if we\u0027re keeping with this comment format?\n(implementation below too)",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 11
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10fffec5_36d08ae1",
        "filename": "modules/video_coding/inter_frame_delay.h",
        "patchSetId": 4
      },
      "lineNbr": 43,
      "author": {
        "id": 18444
      },
      "writtenOn": "2022-03-07T13:34:59Z",
      "side": 1,
      "message": "Removed these parameter comments. I think the name is self explanatory.",
      "parentUuid": "6c8a9ef5_f06fcc25",
      "range": {
        "startLine": 43,
        "startChar": 5,
        "endLine": 43,
        "endChar": 11
      },
      "revId": "8d16bbf8a031d13f7c38d21a09f85a60b3c6e7b5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}