{
  "comments": [
    {
      "key": {
        "uuid": "2859f934_bc4c025c",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T09:52:34Z",
      "side": 1,
      "message": "If it should match the bwe drop, I think we should use the actual value.",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cac6945_757ce1d5",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-08T13:14:47Z",
      "side": 1,
      "message": "It does not have to match the drop in the AIMD rate controller. The intention is that, if the initial bitrate is too high and the initial probe results correctly tell us to reduce the send rate, then we should reduce the send rate slightly below the throughput estimate to let the network queues drain. I\u0027m open to suggestions about naming, comment and/or value.",
      "parentUuid": "2859f934_bc4c025c",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f522928_77406840",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T15:20:30Z",
      "side": 1,
      "message": "That seems reasonable, then I suggest making it more clearly probe related in naming and comments, I misunderstood it as a general parameter that is used for this and other things. Consider if it should be a field trial parameter as well.",
      "parentUuid": "6cac6945_757ce1d5",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a43a01f_a1a675db",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-16T10:54:01Z",
      "side": 1,
      "message": "Done\n\nI will not have time to do experimentation with different values (and the effect of fine tuning this is likely to be small given that low probe results are fairly uncommon) so I prefer to keep things simple and not add it as a field trial parameter.",
      "parentUuid": "0f522928_77406840",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 49,
        "endChar": 0
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2716cfae_8dcea3b0",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 518,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T09:52:34Z",
      "side": 1,
      "message": "Can we skip this check and use max instead?\n\n[keeping previous code as is]\n\nif(limit_probes_lower_than_throughput_estimate_ \u0026\u0026 probe_bitrate \u0026\u0026 acknowledged_bitrate) {\n     DataRate limit \u003d std::min(delay_based_bwe_-\u003elast_estimate(),\n                               *acknowledged_bitrate * kDefaultBackOffFactor)\n      probe_bitrate \u003d std::max(*probe_bitrate, limit);\n}",
      "range": {
        "startLine": 518,
        "startChar": 15,
        "endLine": 518,
        "endChar": 77
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "231d31cf_e7151b3c",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 518,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-08T13:14:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2716cfae_8dcea3b0",
      "range": {
        "startLine": 518,
        "startChar": 15,
        "endLine": 518,
        "endChar": 77
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4c6a0c7_5033a44b",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 519,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T09:52:34Z",
      "side": 1,
      "message": "When is this expected to be lower than the acknowledged rate? Maybe add a comment?",
      "range": {
        "startLine": 519,
        "startChar": 31,
        "endLine": 519,
        "endChar": 64
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a168892_c8983030",
        "filename": "modules/congestion_controller/goog_cc/goog_cc_network_control.cc",
        "patchSetId": 1
      },
      "lineNbr": 519,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-08T13:14:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4c6a0c7_5033a44b",
      "range": {
        "startLine": 519,
        "startChar": 31,
        "endLine": 519,
        "endChar": 64
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1472e8ce_0fd92f8a",
        "filename": "modules/congestion_controller/goog_cc/probe_bitrate_estimator.cc",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T09:52:34Z",
      "side": 1,
      "message": "LS_WARNING? this shouldn\u0027t normally happen, right?",
      "range": {
        "startLine": 71,
        "startChar": 12,
        "endLine": 71,
        "endChar": 19
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65a98ce6_014a0442",
        "filename": "modules/congestion_controller/goog_cc/probe_bitrate_estimator.cc",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-08T13:14:47Z",
      "side": 1,
      "message": "The other log messages in this file are at LS_INFO level, presumably to avoid spamming the log with things that are expected to happen occasionally. In this case, the clusters_ variable only seem to hold the clusters for 1 second so I\u0027d expect to hit this if the RTT is more than 1 second. For consistency I suggest leaving as LS_INFO.",
      "parentUuid": "1472e8ce_0fd92f8a",
      "range": {
        "startLine": 71,
        "startChar": 12,
        "endLine": 71,
        "endChar": 19
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a37a59d2_9436aba8",
        "filename": "modules/congestion_controller/goog_cc/probe_bitrate_estimator.cc",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 5531
      },
      "writtenOn": "2020-04-08T15:20:30Z",
      "side": 1,
      "message": "Ok that makes sense. Maybe we can add a comment on the fact that this is expected to happen since probes are only held for a second or so? that would probably be helpful for someone investigating such a log entry.",
      "parentUuid": "65a98ce6_014a0442",
      "range": {
        "startLine": 71,
        "startChar": 12,
        "endLine": 71,
        "endChar": 19
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5973f42f_c543f5c5",
        "filename": "modules/congestion_controller/goog_cc/probe_bitrate_estimator.cc",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 5150
      },
      "writtenOn": "2020-04-16T10:54:01Z",
      "side": 1,
      "message": "Reverted this change. It turns out that while the code in some cases can reinsert previously removed clusters, it is also used to insert normal clusters.",
      "parentUuid": "a37a59d2_9436aba8",
      "range": {
        "startLine": 71,
        "startChar": 12,
        "endLine": 71,
        "endChar": 19
      },
      "revId": "b03cd1051e392fb3d2aa7be0b11091dbaae51ca2",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}