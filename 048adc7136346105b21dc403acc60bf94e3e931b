{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5b9e5597_3ec53b3c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 5142
      },
      "writtenOn": "2021-03-11T08:56:09Z",
      "side": 1,
      "message": "Hey I missed the review and I think this is correct but I\u0027m asking questions just to make sure we get one \"remote-outbound-rtp\" per \"inbound-rtp\" and don\u0027t get them mixed up. So curious why this looks different than the \"remote-inbound-rtp\" case? But I think it\u0027s corrrect.",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74f69052_c1ee5474",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 537,
      "author": {
        "id": 5142
      },
      "writtenOn": "2021-03-11T08:56:09Z",
      "side": 1,
      "message": "What happens if I have two \"inbound-rtp\" streams with ssrc 1 and ssrc 2.\n\nWhen the first RTCP SR comes in for ssrc 1 I would expect a \"remote-outbound-rtp\" to be created for ssrc 1, containing packet counters for ssrc 1. But nothing for ssrc 2.\n\nLater an RTCP SR comes in for ssrc 2 and then another \"remote-outbound-rtp\" is created for ssrc 2, but not affecting the one for ssrc 1, and so on.\n\nWill we have one RTCPReceiver for each ssrc? E.g. one with remote_ssrc_ \u003d\u003d 1 and another one with remote_ssrc_ \u003d\u003d 2? I think so if we have one per stream?\nhttps://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/call/call.cc;l\u003d1360;drc\u003dd14888464e64156d58831d1899ddb05102c1058e;bpv\u003d1;bpt\u003d1\n\nSo I think this is correct, just wanted to make sure we don\u0027t get RTCP SR mixed up.",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db949ed0_aed5acd9",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 537,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-03-11T09:09:42Z",
      "side": 1,
      "message": "yes, we have one RTCPReceiver per ssrc.\n\nAlmost. same RTCPReceiver is shared for main ssrc and rtx ssrc [i.e. retransmission]\nWhat does spec say about associate rtx stream? One place it mention stats are \u0027per ssrc\u0027, another place it mention \"incluing retransmission packets\" but doesn\u0027t clarify if that should include rtx packets, or just packets retransmitted using the same ssrc. This CL implements latter.",
      "parentUuid": "74f69052_c1ee5474",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5369a73_0a4209bd",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 537,
      "author": {
        "id": 5142
      },
      "writtenOn": "2021-03-11T09:24:34Z",
      "side": 1,
      "message": "The spec isn\u0027t very clear but it does mention \"retransmissions\" and I believe that clarification was added in response to not knowing what to do with RTX.\n\nIn the case of packetsSent and bytesSent for \"outbound-rtp\" we merged normal retransmissions and RTX data on the same \"outbound-rtp\" like so:\nhttps://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/media/engine/webrtc_video_engine.cc;l\u003d456?q\u003dwebrtc_video_engine.cc\u0026originalUrl\u003dhttps:%2F%2Fcs.chromium.org%2F\n\nI don\u0027t know what we do for \"inbound-rtp\" but I guess the value having \"remote-outbound-rtp\" packet counters is that you can compare them to \"inbound-rtp\" packet counters. So I think we should be consistent in case we add better test coverage like Di talked about.",
      "parentUuid": "db949ed0_aed5acd9",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c29c4670_861d9574",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 537,
      "author": {
        "id": 5122
      },
      "writtenOn": "2021-03-16T10:14:48Z",
      "side": 1,
      "message": "\u003e What happens if I have two \"inbound-rtp\" streams with ssrc 1 and ssrc 2.\n\u003e \n\u003e When the first RTCP SR comes in for ssrc 1 I would expect a \"remote-outbound-rtp\" to be created for ssrc 1, containing packet counters for ssrc 1. But nothing for ssrc 2.\n\u003e \n\u003e Later an RTCP SR comes in for ssrc 2 and then another \"remote-outbound-rtp\" is created for ssrc 2, but not affecting the one for ssrc 1, and so on.\n\nYes, that must be the behavior. I hope that the test I added in\nhttps://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/modules/rtp_rtcp/source/rtp_rtcp_impl2_unittest.cc;l\u003d657 fully covers the scenario you described.",
      "parentUuid": "74f69052_c1ee5474",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88ead8fd_70e4a0f9",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 544,
      "author": {
        "id": 5142
      },
      "writtenOn": "2021-03-11T08:56:09Z",
      "side": 1,
      "message": "For contrast, in the \"remote-inbound-rtp\" case we had to obtain report block data for each \"received_report_blocks_\" mapping, which was a (source ssrc, remote ssrc) mapping in order to collect report block data on a per-ssrc basis.\n\nI wonder if/why we don\u0027t have to do that here in the \"remote-outbound-rtp\" case? We just filter by \"remote_ssrc_ \u003d\u003d remote_ssrc\" and that gets the job done?",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3d2b117_bd0c81c8",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 544,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-03-11T09:09:42Z",
      "side": 1,
      "message": "yes, that\u0027s how SR/RR are orgonized: \nSR is a \u0027large\u0027 report that contains \"every\" stat about single outgoing ssrc\n\nRR itself has practically nothing and is there just to provide a handle to attach  report blocks to.\neach ReportBlock contain stats about the incoming ssrc.\nRB attached to SR also contains stats about the incoming ssrcs, even though SR itself has stats about the outgoing ssrc.\n(in practice we currently do not attach RB to SR, but that is unrelated topic)",
      "parentUuid": "88ead8fd_70e4a0f9",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ac4952f_fbe3ae21",
        "filename": "modules/rtp_rtcp/source/rtcp_receiver.cc",
        "patchSetId": 6
      },
      "lineNbr": 544,
      "author": {
        "id": 5142
      },
      "writtenOn": "2021-03-11T09:24:34Z",
      "side": 1,
      "message": "Cool, you know this a lot better than me!",
      "parentUuid": "a3d2b117_bd0c81c8",
      "revId": "048adc7136346105b21dc403acc60bf94e3e931b",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}