{
  "comments": [
    {
      "key": {
        "uuid": "17fe33a2_8a3dc5ec",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-02-12T09:07:00Z",
      "side": 1,
      "message": "Please indicate whether these are the only allowed values (in which case this should maybe be an enum instead) or whether they are just guides (in which case, what are the hard limits?).",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "024b4910_036f859b",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5053
      },
      "writtenOn": "2020-02-13T03:15:21Z",
      "side": 1,
      "message": "bitrate_priority can be any value, which is nice because it offers more flexibility than the web API.\n\nBut network_priority currently can only be one of the four values, which did strike me as a strange choice. I would have used an enum but I guess this was done for consistency (both of these use the same enum in chromium, which is then mapped to a double).\n\nDo you think this is worth fixing? Would be easier to fix it now than later, just wasn\u0027t sure if it was worth the effort. \n\n+thaloun (who authored the CL that added this)",
      "parentUuid": "17fe33a2_8a3dc5ec",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8315f3de_593994db",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 7621
      },
      "writtenOn": "2020-02-13T18:11:51Z",
      "side": 1,
      "message": "Yes it\u0027s a bit unfortunate that there is the string -\u003e enum -\u003e double conversion.  I was especially leery of the direct \u003d\u003d comparison for doubles, but as Taylor mentioned reusing the chromium declaration seemed the correct thing to do.",
      "parentUuid": "024b4910_036f859b",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a609c2fc_467a91da",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-02-14T00:04:59Z",
      "side": 1,
      "message": "I would go with double for bitrate_priority, and an enum for network_priority. Requiring an integer parameter to be one of only four allowed values isn\u0027t ideal, but works, e.g. with a clear doc comment + a CHECK. But the same for a floating-point parameter is problematic; we\u0027d be forced to either risk rejecting values that are very close to but not exactly equal to one of the allowed values, or build code that tries to guess what the caller means when they don\u0027t follow the contract exactly, which is a well-known \"road to hell paved with good intentions\" pattern in software engineering.",
      "parentUuid": "8315f3de_593994db",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b14e12ac_d1ae85d4",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5053
      },
      "writtenOn": "2020-02-14T03:44:04Z",
      "side": 1,
      "message": "How would it be possible to accidentally end up with a value that is close to an allowed value but not exact? All the allowed values are powers of 2.\n\nAlso, how should I go about changing the type of this field without breaking chromium? I guess I could define constants in WebRTC (\"kPriorityVeryLow\"), change chromium to use them, then change WebRTC to define them as enums. That\u0027s actually not so bad.",
      "parentUuid": "a609c2fc_467a91da",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be0273f7_2feeb8c0",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-02-17T01:57:27Z",
      "side": 1,
      "message": "\u003e How would it be possible to accidentally end up with a value that is close to an allowed value but not exact? All the allowed values are powers of 2.\n\nIf you arrive at the value via some sort of computation, as opposed to using a literal constant. Not saying it\u0027s likely, but it\u0027s always nice to not add to our collection of loaded footguns. Also, readers seeing the \"double\" signature will be surprised to learn that only a few specific values are allowed, so if they don\u0027t read the docs, confusion will ensue.\n\n\u003e Also, how should I go about changing the type of this field without breaking chromium?\n\nI saw in another CL that you figured this out.",
      "parentUuid": "b14e12ac_d1ae85d4",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "205034c3_713e558b",
        "filename": "api/rtp_parameters.h",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 5053
      },
      "writtenOn": "2020-03-20T01:09:01Z",
      "side": 1,
      "message": "Changed to an enum.",
      "parentUuid": "be0273f7_2feeb8c0",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14c69fcb_1cf5b19b",
        "filename": "sdk/android/api/org/webrtc/RtpParameters.java",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-02-12T09:07:00Z",
      "side": 1,
      "message": "Same.",
      "revId": "0cb9238b4fd64692a433827222959143c6608eeb",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}