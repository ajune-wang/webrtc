{
  "comments": [
    {
      "key": {
        "uuid": "c12c862a_631f8003",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2020-03-18T15:53:54Z",
      "side": 1,
      "message": "Yes, I would prefer an RTC_LOG(INFO) \u003c\u003c ... here.\n\nBut if you really want to build the string we may want to provide an empty implementation guarded by the macro RTC_DISABLE_LOGGING (if defined return \"\").\n\nBoth solutions are not clean, so let me +kwiberg@ as well for a second opinion.\n\nIt worth pointing out that this is printed only in one place so moving all the string creation to the RTC_LOG(INFO) where it needs to be printed might be the best solution.",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee9ab82a_e42cdbff",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-03-19T15:11:02Z",
      "side": 1,
      "message": "Inlining this at the single point of call SGTM. Alternatively, make the function inline; this will somewhat reliably eliminate the binary size overhead if we\u0027re not calling it.",
      "parentUuid": "c12c862a_631f8003",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33b26ff5_27f27fa7",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2020-03-19T15:15:19Z",
      "side": 1,
      "message": "Ah, that is interesting. But I need to set up a bot to make sure this is true.\n\nCan we Jonas land and then we follow up?",
      "parentUuid": "ee9ab82a_e42cdbff",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b441616c_e69c28ae",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5613
      },
      "writtenOn": "2020-03-19T18:25:15Z",
      "side": 1,
      "message": "1) it is used twice in more recent versions of patch\n2) the first version of the #ifdef removed the method competly RTC_DISABLE_LOGGING\nthat is guaranteed to not add to binary size. but subsequent review suggested i rather return\nempty string.\n3) as a perspective on size: an earlier (bigger version) of  patch added 601 bytes (code and everything) to android duo (https://screenshot.googleplex.com/b6Ghxsc4aQy)\n\nhow do you want me to proceed to get this in ?",
      "parentUuid": "33b26ff5_27f27fa7",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93ac0bb9_edaa62e4",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2020-03-19T21:52:53Z",
      "side": 1,
      "message": "Here is my point of view.\n\nIf the #ifdef is inside the function then the name of the function should reflect the fact that it my return the string representation (ToString is too generic). If you do that, I think it is fine.\n\nKarl\u0027s idea sounds more clean. If you can test it locally and ensure that the compiler eliminate the binary size impact the the macro is defined, then using an inline function is definitely the best solution. This should be easy to do, if you don\u0027t have time please open a bug on me.",
      "parentUuid": "b441616c_e69c28ae",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ec47338_8d6d0c32",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5613
      },
      "writtenOn": "2020-03-20T07:04:17Z",
      "side": 1,
      "message": "Thanks mirko,\n\nI renamed ToString \u003d\u003e DebugString(), had that method return empty string #if DISABLE_LOGGING\nand checked by compiling with rtc_disable_logging \u003d true\n\n\"inlining at single point\" is not applicable, since (on advice from other reviewer)\nalso added logging of old route, and changed so that router is logged also on first occurrence\n(and removed a \"special case\" logging)",
      "parentUuid": "93ac0bb9_edaa62e4",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8241e7a7_ab7f083b",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5126
      },
      "writtenOn": "2020-03-20T10:17:36Z",
      "side": 1,
      "message": "I have a trick for this: __attribute__((noinline)) inline :-)\n\nIf the function is called, the call is never inlined, no matter how trivial the function is: https://godbolt.org/z/U4Atb7\n\nAnd if the function is never called, it isn\u0027t emitted: https://godbolt.org/z/cqj6rB\n\n(__attribute__((noinline)) is available as RTC_NO_INLINE in WebRTC.)",
      "parentUuid": "3ec47338_8d6d0c32",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17d4fd54_e0dfd853",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5613
      },
      "writtenOn": "2020-03-20T10:38:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8241e7a7_ab7f083b",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ac9a334_977e94af",
        "filename": "rtc_base/network_route.cc",
        "patchSetId": 14
      },
      "lineNbr": 25,
      "author": {
        "id": 5087
      },
      "writtenOn": "2020-03-20T10:56:03Z",
      "side": 1,
      "message": "Thanks Karl!",
      "parentUuid": "17d4fd54_e0dfd853",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "a94c5899742297fd65047c3b7a578ead69e49305",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}