{
  "comments": [
    {
      "key": {
        "uuid": "805af260_578adde4",
        "filename": "test/pc/e2e/api/peerconnection_quality_test_fixture.h",
        "patchSetId": 4
      },
      "lineNbr": 281,
      "author": {
        "id": 7704
      },
      "writtenOn": "2019-03-18T15:31:34Z",
      "side": 1,
      "message": "this is a bit unsafe design: you first Create a peer in this factory and then you mutate it.\nA slightly better design would be to pass a configuration object to the \u0027AddPeer\u0027 and then not to allow mutation of peer.\n\nIn such case, your PeerConfigurer would become a \u0027PeerParametersBuilder\u0027 with the same set of methods as your PeerConfigurer, and your AddPeer would accept PeerParameters.",
      "range": {
        "startLine": 281,
        "startChar": 8,
        "endLine": 281,
        "endChar": 33
      },
      "revId": "09935425ff237158cde13d62ec4747649155d14c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fbd61697_179df278",
        "filename": "test/pc/e2e/api/peerconnection_quality_test_fixture.h",
        "patchSetId": 4
      },
      "lineNbr": 281,
      "author": {
        "id": 6337
      },
      "writtenOn": "2019-03-18T15:41:38Z",
      "side": 1,
      "message": "The problem here, that in such case you have to have some outside visible object, that will hold all values and we haven\u0027t such. \n\nSo basically here are the thoughts before it:\n1. We want to keep move only components separate from copyable params, because it is much easier to operate with such structures inside framework code and move-only objects won\u0027t obstruct us.\n2. We don\u0027t want to have a proxy object, that will just collect all values inside it and then will be disassembled into InjectableComponents and Params inside Run call, cause it will lead to code duplication and one more layer of moving objects around.\n3. We don\u0027t want to forward declare and expose InjectableComponents and Params to user if possible, cause such split is implementation details and user shouldn\u0027t be confused with that.\n\nIt leads to idea, that we can\u0027t give user a builder and accept some constructed object back, because in such case accepted interface have to expose internal objects to make it possible for framework to get required values from it. Other option will be static cast inside framework, but it looks much uglier, I think",
      "parentUuid": "805af260_578adde4",
      "range": {
        "startLine": 281,
        "startChar": 8,
        "endLine": 281,
        "endChar": 33
      },
      "revId": "09935425ff237158cde13d62ec4747649155d14c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5dc0fa3_cae00dd9",
        "filename": "test/pc/e2e/api/peerconnection_quality_test_fixture.h",
        "patchSetId": 4
      },
      "lineNbr": 281,
      "author": {
        "id": 7704
      },
      "writtenOn": "2019-03-18T18:04:44Z",
      "side": 1,
      "message": "But now you have \"PeerConfigurer\" that is visible outside. I don\u0027t quite see the difference.",
      "parentUuid": "fbd61697_179df278",
      "range": {
        "startLine": 281,
        "startChar": 8,
        "endLine": 281,
        "endChar": 33
      },
      "revId": "09935425ff237158cde13d62ec4747649155d14c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb020a9f_7be1856a",
        "filename": "test/pc/e2e/api/peerconnection_quality_test_fixture.h",
        "patchSetId": 4
      },
      "lineNbr": 281,
      "author": {
        "id": 6337
      },
      "writtenOn": "2019-03-19T09:31:18Z",
      "side": 1,
      "message": "Yep, we have to provide at least one class to user, so user will be able to configure peer. But here we needn\u0027t to disclose any implementation details classes like Params and InjectableComponenets and we have single class for configuring both move only and copyable parameters.",
      "parentUuid": "f5dc0fa3_cae00dd9",
      "range": {
        "startLine": 281,
        "startChar": 8,
        "endLine": 281,
        "endChar": 33
      },
      "revId": "09935425ff237158cde13d62ec4747649155d14c",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}