{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e2bdd7b5_fb573952",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 805,
      "author": {
        "id": 5825
      },
      "writtenOn": "2023-09-28T12:35:14Z",
      "side": 1,
      "message": "@marpan@google.com, @jianj@google.com, Is this Ok to enable kDenoiserOnAdaptive on ARM-based Macs?",
      "range": {
        "startLine": 805,
        "startChar": 33,
        "endLine": 805,
        "endChar": 52
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1cfb404f_0d6e1226",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 805,
      "author": {
        "id": 5366
      },
      "writtenOn": "2023-09-28T13:10:34Z",
      "side": 1,
      "message": "This will adaptively denoise on Y only or YUV planes which I think is okay to enable on ARM-based Macs, since they\u0027re much faster and not sensitive to power usage.",
      "parentUuid": "e2bdd7b5_fb573952",
      "range": {
        "startLine": 805,
        "startChar": 33,
        "endLine": 805,
        "endChar": 52
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb60b0f2_d2091783",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 805,
      "author": {
        "id": 5534
      },
      "writtenOn": "2023-09-28T17:08:51Z",
      "side": 1,
      "message": "yes the kDenoiserOnAdaptive mode should be fine to use for arm-based macs.",
      "parentUuid": "1cfb404f_0d6e1226",
      "range": {
        "startLine": 805,
        "startChar": 33,
        "endLine": 805,
        "endChar": 52
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df2535fe_13185015",
        "filename": "modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 204,
      "author": {
        "id": 5825
      },
      "writtenOn": "2023-09-28T12:35:14Z",
      "side": 1,
      "message": "@marpan@google.com, @jianj@google.com, Is this till correct? Or can we allow denoising on ARM-based devices?",
      "range": {
        "startLine": 204,
        "startChar": 35,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5459f643_8f70ec5c",
        "filename": "modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 204,
      "author": {
        "id": 5366
      },
      "writtenOn": "2023-09-28T13:10:34Z",
      "side": 1,
      "message": "That\u0027s not correct any more. We do have Neon optimization for denoiser in vp9/encoder/arm/neon/vp9_denoiser_neon.c",
      "parentUuid": "df2535fe_13185015",
      "range": {
        "startLine": 204,
        "startChar": 35,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43757e44_6a610d16",
        "filename": "modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 204,
      "author": {
        "id": 5534
      },
      "writtenOn": "2023-09-28T17:08:51Z",
      "side": 1,
      "message": "yeah the vp9-denoiser neon optimization was done a while ago, so we can allow it now.",
      "parentUuid": "5459f643_8f70ec5c",
      "range": {
        "startLine": 204,
        "startChar": 35,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "064e6614_ea9ee114",
        "filename": "modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 204,
      "author": {
        "id": 5825
      },
      "writtenOn": "2023-10-03T11:00:32Z",
      "side": 1,
      "message": "Ran a quick test with denoiser. out/release/video_codec_perf_tests --gtest_filter\u003d*SpatialQuality*VP9builtin*720p*1024kbps\n\nOn Mac M1 the increase is ~10%:\n\nencode_time_ms: [5.60, 5.50, 5.45] -\u003e [6.06, 6.12, 6.03]\npsnr_y_db: 39.51 -\u003e 39.23\npsnr_u_db: 44.81 -\u003e 45.05\npsnr_v_db: 45.95 -\u003e 46.19\n\nOn Pixel 7 the increase is ~16%:\n\nencode_time_ms: [10.47, 10.31, 10.35] -\u003e [12.04, 12.08, 12.02]\npsnr_y_db: 39.25 -\u003e 39.01\npsnr_u_db: 44.65 -\u003e 44.91\npsnr_v_db: 45.80 -\u003e 46.06\n\nIt should be Ok to enable the denoiser on ARM-based Macs (absolute encode time is quite low). But on Android the increase looks more critical. Let\u0027s keep it disabled on Android/iOS.",
      "parentUuid": "43757e44_6a610d16",
      "range": {
        "startLine": 204,
        "startChar": 35,
        "endLine": 204,
        "endChar": 68
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6361eaaf_3e79d435",
        "filename": "video/pc_full_stack_tests.cc",
        "patchSetId": 4
      },
      "lineNbr": 184,
      "author": {
        "id": 5825
      },
      "writtenOn": "2023-09-28T12:35:14Z",
      "side": 1,
      "message": "@marpan@google.com, @jianj@google.com, Is this correct? Is it not supported or not optimized?\n\nTrying to understand if we can/should enable VP9 profile 2 perf tests on ARM-based Macs.",
      "range": {
        "startLine": 184,
        "startChar": 3,
        "endLine": 184,
        "endChar": 60
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab1d1aaf_a6d60a76",
        "filename": "video/pc_full_stack_tests.cc",
        "patchSetId": 4
      },
      "lineNbr": 184,
      "author": {
        "id": 5366
      },
      "writtenOn": "2023-09-28T13:10:34Z",
      "side": 1,
      "message": "Profile 2 using 10/12 bits which is high bitdepth, a lot of high bitdepth functions don\u0027t have SIMD optimizations; though it\u0027s changing as Arm engineers are actively adding SIMD optimizations at the moment.\n\nAs of now it\u0027s a good idea to not use profile 2 for ARM; I\u0027ll run some speed test and see where it is and report back.",
      "parentUuid": "6361eaaf_3e79d435",
      "range": {
        "startLine": 184,
        "startChar": 3,
        "endLine": 184,
        "endChar": 60
      },
      "revId": "0438006fccdcb979a1370c650584362ccd840fa6",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}