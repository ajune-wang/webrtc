{
  "comments": [
    {
      "key": {
        "uuid": "be4fcf21_1cd98d2c",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 331,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-02-12T23:46:21Z",
      "side": 1,
      "message": "nit: \"current_desc\" and \"secondary_current_desc\" is a little head scratching. Wouldn\u0027t it work to just have \"last_desc\", which would be the previously applied offer or answer, local or remote? I guess it may not be trivial to figure that out though.",
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87e0e019_f06855d0",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 331,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "I agree, it is head scratching. I tried to clarify these parameters in the function header, but they are a bit wonky. I think last_desc could be nice here, but I wanna hear your thoughts. I think it would mean setting the state of last_desc_ (maybe use cricket::CS_LOCAL/CS_REMOTE) when ApplyLocalDescription/ApplyRemoteDescription are called. The downside to doing this is:\n-It\u0027s already a bit confusing with current_remote/pending_remote \u0026 current_local/pending_local, and it would add some complexity there.\n-It could introduce some bugs. I would have to think about this more.\n\nWDYT?",
      "parentUuid": "be4fcf21_1cd98d2c",
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "945fb86e_90cacc6a",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 331,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-02-13T19:46:45Z",
      "side": 1,
      "message": "I agree that last_desc_ would add complexity; \"pending\" and \"current\" have already caused bugs in the past. However, a last_description() helper function that switches on the signaling state seems reasonable.\n\nFeel free to leave this as-is though; it was just an idea.",
      "parentUuid": "87e0e019_f06855d0",
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb819553_87f65b65",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 331,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T23:34:29Z",
      "side": 1,
      "message": "The issue with a last_description() helper function is that after negotiation is done the signalling state is kStable. kStable gives us no indication if the remote or local description is the most recent, so we\u0027d still have to store some extra state here (last_desc_). I don\u0027t think the trade off of potential bugs \u0026 extra complexity is worth helping the readability of this function. I can add a TODO to consider doing this if you think this could potentially be beneficial for reducing logic complexity.",
      "parentUuid": "945fb86e_90cacc6a",
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6957c828_b171c062",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 331,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-02-14T00:21:00Z",
      "side": 1,
      "message": "Well, in the stable state you could use SessionDescriptionInterface::GetType to tell which was the answer. But don\u0027t worry about it, really; I\u0027m not sure it would make things that better anyway.",
      "parentUuid": "bb819553_87f65b65",
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0e41216_7dbbbc47",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 332,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "nit: Can make this a const reference and remove the null check below.",
      "range": {
        "startLine": 332,
        "startChar": 30,
        "endLine": 332,
        "endChar": 64
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e1a7a31_5fe98421",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 332,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done. Also updated MediaSectionsHaveSameCount because of the same case.",
      "parentUuid": "f0e41216_7dbbbc47",
      "range": {
        "startLine": 332,
        "startChar": 30,
        "endLine": 332,
        "endChar": 64
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c31c1cce_650abd81",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "Hmm... maybe this should be factored out into a helper method IsMediaSectionBeingRecycled() so we can share logic with AssociateTransceiver. What do you think?",
      "range": {
        "startLine": 343,
        "startChar": 8,
        "endLine": 347,
        "endChar": 56
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fd560c8_e8415276",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Went ahead and did this.",
      "parentUuid": "c31c1cce_650abd81",
      "range": {
        "startLine": 343,
        "startChar": 8,
        "endLine": 347,
        "endChar": 56
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6dd30122_0fe23366",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 2406,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "nit: I would move this to the beginning of the comment. Something like: If this is an offer then the m\u003d section could be recycled. If it is being recycled (defined as: rejected in the current local or remote description and not rejected in the new description), dissociate the currently...",
      "range": {
        "startLine": 2406,
        "startChar": 67,
        "endLine": 2406,
        "endChar": 13
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f84aa5e6_4ca10458",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 2406,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6dd30122_0fe23366",
      "range": {
        "startLine": 2406,
        "startChar": 67,
        "endLine": 2406,
        "endChar": 13
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "012e4e2b_860dcf9a",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 5523,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "Clarify that this is important for knowing if a m\u003d section is being recycled.",
      "range": {
        "startLine": 5522,
        "startChar": 71,
        "endLine": 5523,
        "endChar": 26
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce7d1df0_194fe926",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 2
      },
      "lineNbr": 5523,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "012e4e2b_860dcf9a",
      "range": {
        "startLine": 5522,
        "startChar": 71,
        "endLine": 5523,
        "endChar": 26
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f85ec7b_e3442733",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 598,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "nit: Test name suggestion: RecycleMediaSectionWhenStoppingTransceiverOnAnswerer",
      "range": {
        "startLine": 598,
        "startChar": 7,
        "endLine": 598,
        "endChar": 59
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b49cb27_61fc4c88",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 598,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2f85ec7b_e3442733",
      "range": {
        "startLine": 598,
        "startChar": 7,
        "endLine": 598,
        "endChar": 59
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a976c28d_ff6873e7",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 657,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "Comment suggestion:\n\n// Test that creating/setting a local offer that recycles an m\u003d section is idempotent.",
      "range": {
        "startLine": 655,
        "startChar": 0,
        "endLine": 657,
        "endChar": 42
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1400ef7e_eaa981ff",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 657,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a976c28d_ff6873e7",
      "range": {
        "startLine": 655,
        "startChar": 0,
        "endLine": 657,
        "endChar": 42
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d7126b6_f829bfb5",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 667,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "This isn\u0027t used in the test.",
      "range": {
        "startLine": 667,
        "startChar": 2,
        "endLine": 667,
        "endChar": 34
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94860fb3_f9578c12",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 667,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "4d7126b6_f829bfb5",
      "range": {
        "startLine": 667,
        "startChar": 2,
        "endLine": 667,
        "endChar": 34
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c3c043a7_14f8efdc",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 676,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-02-12T22:32:40Z",
      "side": 1,
      "message": "nit: std::move(offer) since it\u0027s not used again (same for second_offer below).",
      "range": {
        "startLine": 676,
        "startChar": 34,
        "endLine": 676,
        "endChar": 70
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a2afe85_ffc50c9a",
        "filename": "pc/peerconnection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 676,
      "author": {
        "id": 5800
      },
      "writtenOn": "2018-02-13T01:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c3c043a7_14f8efdc",
      "range": {
        "startLine": 676,
        "startChar": 34,
        "endLine": 676,
        "endChar": 70
      },
      "revId": "e716ea78aab77684d06be35075c0b0da91489aee",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}