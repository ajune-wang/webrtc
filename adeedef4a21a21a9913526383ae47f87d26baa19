{
  "comments": [
    {
      "key": {
        "uuid": "3f4d05da_c55d7881",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 490,
      "author": {
        "id": 7565
      },
      "writtenOn": "2018-11-13T20:32:02Z",
      "side": 1,
      "message": "What is scenario when media transport changes? \n\nIs there similar RTP path?",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87bfbf95_3dc0c380",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 490,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-11-13T20:47:22Z",
      "side": 1,
      "message": "It is called when media transport is created, and before media transport is destroyed.\nThe latter is more important.\n\nOther than that, it shouldn\u0027t change.\n\nFor RTP there is only a callback on PeerConnection level, Call object doesn\u0027t get it.",
      "parentUuid": "3f4d05da_c55d7881",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bec352ec_723fa425",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 490,
      "author": {
        "id": 7565
      },
      "writtenOn": "2018-11-13T22:23:25Z",
      "side": 1,
      "message": "Understood, so it\u0027s set just Set(media_transport) when it\u0027s created then Set(nullptr) when it\u0027s destroyed. \n\nShould we call it SetMediaTransport and DCHECK that it\u0027s either null \u003d\u003e media_transport or media_transport \u003d\u003e null?",
      "parentUuid": "87bfbf95_3dc0c380",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7f36a19_70592ce8",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 490,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-11-13T22:52:21Z",
      "side": 1,
      "message": "Discussed offline. You didn\u0027t see my \"MaybeRegisterObserver\" method, but after offline discussion, I further refactored it.",
      "parentUuid": "bec352ec_723fa425",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7af99e2_52d5964d",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 607,
      "author": {
        "id": 7565
      },
      "writtenOn": "2018-11-13T20:32:02Z",
      "side": 1,
      "message": "Do you want to move this code to separate function\n\nMaybeRegisterTargetRateObserver\n\nand call it from both video and audio stream creation?\n\nCurrent we do not create video streams if media transport is provided (maybe we can DCHECK there) but eventually we will and it would be nice to have common registration code.\n\nAlso if you pass media_transport to MaybeRegisterTargetRateObserver, maybe you can reuse the same code from MediaTransport change as well?",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48a5e76f_8a65c072",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 607,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-11-13T20:47:22Z",
      "side": 1,
      "message": "This is a good idea, but I can only do it for media transport if I am to use it on \u0027MediaTransportChange\u0027 (where I really want to do it for media transport).\n\nRealistically, when you \u0027CreateAudioSendStream\u0027, media transport should have already been set.",
      "parentUuid": "a7af99e2_52d5964d",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e46f2ce_6b5a153a",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 607,
      "author": {
        "id": 7565
      },
      "writtenOn": "2018-11-13T22:23:25Z",
      "side": 1,
      "message": "Got it. From what you are saying AddTargetTransferRateObserver should never be execute here for media transport, because it\u0027s already registered in Call::MediaTransportChange?\n\nCan you always register media transport in create stream as in RTP? Having registration code in both MediaTransportChange and here is confusing.",
      "parentUuid": "48a5e76f_8a65c072",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9547efb6_203cdac1",
        "filename": "call/call.cc",
        "patchSetId": 5
      },
      "lineNbr": 607,
      "author": {
        "id": 7704
      },
      "writtenOn": "2018-11-13T22:52:21Z",
      "side": 1,
      "message": "We can get callbacks from media transport before we create streams... but then what would we do with those? :) Done.",
      "parentUuid": "3e46f2ce_6b5a153a",
      "revId": "adeedef4a21a21a9913526383ae47f87d26baa19",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}