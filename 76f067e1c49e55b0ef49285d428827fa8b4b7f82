{
  "comments": [
    {
      "key": {
        "uuid": "9867dfe5_783811aa",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T11:58:14Z",
      "side": 1,
      "message": "More concise than my version, nice. \n\nPlease add DCHECKs documenting input requirements, a \u003e\u003d 0, b \u003e 0.",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 35,
        "endChar": 1
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5addb64e_d2c8e23a",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 5492
      },
      "writtenOn": "2019-10-17T12:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9867dfe5_783811aa",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 35,
        "endChar": 1
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8919b89_63006536",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 42,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T11:58:14Z",
      "side": 1,
      "message": "Prefer to do the gcd call in this method, to always have the product in canonical form.",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 42,
        "endChar": 3
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "acd5c9c0_a8506bee",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 42,
      "author": {
        "id": 5492
      },
      "writtenOn": "2019-10-17T12:50:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8919b89_63006536",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 42,
        "endChar": 3
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5311c6b5_9ca90f37",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 80,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T11:58:14Z",
      "side": 1,
      "message": "This could be written as \n\n  *current_scale *\u003d Fraction{2, 3}\n\nprovided that the multiplication operation includes gcd. But perhaps clearer as is, given the above conditions.",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 80,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4b1e7a5_2bf6596e",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 80,
      "author": {
        "id": 5492
      },
      "writtenOn": "2019-10-17T12:50:32Z",
      "side": 1,
      "message": "yes maybe clearer as is given the above",
      "parentUuid": "5311c6b5_9ca90f37",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 80,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0d7e6b2_f3ffbb60",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 80,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T13:19:54Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f4b1e7a5_2bf6596e",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 80,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0135d18b_0e37fa49",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 84,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T11:58:14Z",
      "side": 1,
      "message": "Maybe prettier as \n\n  *current_scale *\u003d Fraction{3, 4};",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 84,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fecb56d_bbabc28e",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 84,
      "author": {
        "id": 5492
      },
      "writtenOn": "2019-10-17T12:50:32Z",
      "side": 1,
      "message": "maybe good as is if not changed above",
      "parentUuid": "0135d18b_0e37fa49",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 84,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad8668c3_c52fbf5d",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 84,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T13:19:54Z",
      "side": 1,
      "message": "One advantage of using the *\u003d operation is that any common factors will be divided out. That\u0027s not an issue for the /\u003d 3, /\u003d 2 case further above.",
      "parentUuid": "1fecb56d_bbabc28e",
      "range": {
        "startLine": 82,
        "startChar": 0,
        "endLine": 84,
        "endChar": 36
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "75f00bd1_acb71f9e",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T11:58:14Z",
      "side": 1,
      "message": "I think it\u0027s better to keep alternating, once factors of 3 are taken care of. I.e.,\n\nif (mult3) {\n  *current_scale *\u003d Fraction{2,3};\n} else {\n  UpdateScale(current_scale);\n}",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 97,
        "endChar": 64
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "985603ac_5954e855",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 5492
      },
      "writtenOn": "2019-10-17T12:50:32Z",
      "side": 1,
      "message": "Typically will be mult3 every other time and UpdateScale will multiply by 3/4. So alternation not kept?",
      "parentUuid": "75f00bd1_acb71f9e",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 97,
        "endChar": 64
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3936e74a_62d4cde2",
        "filename": "media/base/video_adapter.cc",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 5234
      },
      "writtenOn": "2019-10-17T13:19:54Z",
      "side": 1,
      "message": "Maybe, but it seems a bit subtle to me. When scaling with 3/4, it looks like we will get a factor of 3 in current_width and current_height in the next iteration. But we may have rounding errors in the computation of current_width and current_height, and then it\u0027s unclear to me what sequence of scaling factors we\u0027ll get.\n\nI think I would like logic to use 2/3 if current_width and height are multiples of 3 *and* there were no rounding errors. Otherwise, apply the old condition, 2/3 if current_scale-\u003enumerator is a multiple of 3 (not sure if the other half of the other check, current_scale-\u003edenominator even, is important). So something like\n\nbool mult3 \u003d (input_width * current_scale-\u003enumerator) % (3 * current_scale-\u003edenominator) \u003d\u003d 0\n    \u0026\u0026 corresponding height expression\n\nif (mult3 || current_scale-\u003enumerator % 3 \u003d\u003d 0)\n  current_scale *\u003d Fraction{2,3};\nelse\n  current_scale *\u003d Fraction{3,4};",
      "parentUuid": "985603ac_5954e855",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 97,
        "endChar": 64
      },
      "revId": "76f067e1c49e55b0ef49285d428827fa8b4b7f82",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}