{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b5066b90_dd41ea18",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-01T15:08:46Z",
      "side": 1,
      "message": "Is this CL a preparation into doing something like https://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/rtc_base/BUILD.gn;l\u003d288-303;drc\u003d5e227abfe98a0ac676cba7c6b9ae4d25e716a8bd?\n\nI am tempted to look into something more similar to metrics and field_trial where we have a GN args that by default defines a macro to not define (but declare) these methods and then make webrtc_overrides to define them (the logging approach is quite problematic).",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "081c8240_03900a57",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-01T15:30:56Z",
      "side": 1,
      "message": "Yes, exactly. Just to make sure that the Chrome and WebRTC clocks are the same.",
      "parentUuid": "b5066b90_dd41ea18",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91eed054_e8c518d3",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-01T15:39:26Z",
      "side": 1,
      "message": "Sounds good, so to move forward feel free to look at https://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/webrtc.gni;l\u003d56-60;drc\u003d7864600a6ee3531652530b8fddad9bc49d20f3f7 for inspiration.\n\nIn general, link time injection is not the best thing to do but sometimes there are no other ways, especially if dependency injection is not possible (nisse@ commented about injection on https://bugs.chromium.org/p/chromium/issues/detail?id\u003d516700#c16 but I didn\u0027t look at the code, can we double check it before landing?).",
      "parentUuid": "081c8240_03900a57",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d77e9b9_7f8ec5b6",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-02T08:49:18Z",
      "side": 1,
      "message": "I agree that dependency injection is preferred. It seems much more complicated though. Will take another look before landing anything.",
      "parentUuid": "91eed054_e8c518d3",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed7c8215_6c88787e",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-02T08:50:52Z",
      "side": 1,
      "message": "Thanks.\n\nLet me know when I need to do the last review but if dependency injection is really difficult let me know and I will LGTM.",
      "parentUuid": "1d77e9b9_7f8ec5b6",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da36a6fc_eb07eb1c",
        "filename": "rtc_base/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 412,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-15T13:05:53Z",
      "side": 1,
      "message": "Last week I was CCed on a bug where the receive time of packets (which is set by WebRTC) is in the future compared to the time when the corresponding frame is rendered. I believe that this is due to the clock difference.\n\nBecause of that I would like to proceed with this CL and override the WebRTC implementation when building with chromium.\n\nI will create a new bug about injecting a clock upon creation, but I won\u0027t have time to look into that now.\n\nWhat do you think?",
      "parentUuid": "ed7c8215_6c88787e",
      "range": {
        "startLine": 411,
        "startChar": 4,
        "endLine": 412,
        "endChar": 20
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bc7ef63_2e00a304",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-01T15:08:46Z",
      "side": 1,
      "message": "Nit: 2021",
      "range": {
        "startLine": 2,
        "startChar": 14,
        "endLine": 2,
        "endChar": 18
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7476de8_23c058e3",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-01T15:30:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1bc7ef63_2e00a304",
      "range": {
        "startLine": 2,
        "startChar": 14,
        "endLine": 2,
        "endChar": 18
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4cc645f_4affcb97",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-02-01T15:04:31Z",
      "side": 1,
      "message": "I would suggest letting this convenience function stay in its old place.",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 42,
        "endChar": 0
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f194a1ff_c9e73899",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-01T15:30:56Z",
      "side": 1,
      "message": "Yes, perhaps that\u0027s preferable.\nHow about putting it in the header file?",
      "parentUuid": "d4cc645f_4affcb97",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 42,
        "endChar": 0
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98428c0f_749dc157",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 5234
      },
      "writtenOn": "2021-02-01T15:59:32Z",
      "side": 1,
      "message": "I think it\u0027s short enough that defining it inline in the time_utils.h header is ok. I don\u0027t have a strong opinion on the merits of inlining it. I just think that the planned chromium override file(s) shouldn\u0027t need to know about it.",
      "parentUuid": "f194a1ff_c9e73899",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 42,
        "endChar": 0
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cabae33_40f8c470",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-02T08:49:18Z",
      "side": 1,
      "message": "I see your point. The reason to not have it in time_utils.h would be to make it easier to the user to identify which function is declared in which header file. A possible solution would be to include system_time.h in time_util.h so that developers don\u0027t have to care about system_time.* at all.",
      "parentUuid": "98428c0f_749dc157",
      "range": {
        "startLine": 39,
        "startChar": 0,
        "endLine": 42,
        "endChar": 0
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "325c7845_697566a4",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-01T15:08:46Z",
      "side": 1,
      "message": "I see this used at https://source.chromium.org/chromium/chromium/src/+/master:third_party/webrtc/system_wrappers/source/clock.cc;l\u003d96;drc\u003d9308b7af1e4211fd35defc34249d4a56c8b9c043 but no #include is added. Can you double check with code search (there might be other places)?",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 23
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d31a8df_e7501386",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-01T15:30:56Z",
      "side": 1,
      "message": "Thanks! I\u0027ve double checked for other usages, this was the only one I missed.",
      "parentUuid": "325c7845_697566a4",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 23
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7584113_8e0e8783",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 5087
      },
      "writtenOn": "2021-02-01T15:08:46Z",
      "side": 1,
      "message": "Since you are moving this, maybe you are interested into https://bugs.chromium.org/p/webrtc/issues/detail?id\u003d12351 (in a separate CL of course).",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 61,
        "endChar": 69
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5d3d9d8_10db2d3a",
        "filename": "rtc_base/system_time.cc",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 7641
      },
      "writtenOn": "2021-02-01T15:30:56Z",
      "side": 1,
      "message": "That sounds interesting I will keep it in mind. However, already this is slightly outside of my scope, so I probably won\u0027t do it right away.",
      "parentUuid": "d7584113_8e0e8783",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 61,
        "endChar": 69
      },
      "revId": "ee06a62fe4a219248f0b594cfd107ff7463b5a83",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}