{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "04041957_d4c6bb2c",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 1065,
      "author": {
        "id": 20429
      },
      "writtenOn": "2024-04-07T04:33:06Z",
      "side": 1,
      "message": "These are the two earlier `RTC_CHECK_GE`\u0027s referred to in the commit message.",
      "revId": "79c17fad177959ce499535ced4903f3e727b9223",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0239b3f8_6e623f50",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 1192,
      "author": {
        "id": 20429
      },
      "writtenOn": "2024-04-07T04:33:06Z",
      "side": 1,
      "message": "This code was added in https://webrtc-review.googlesource.com/c/src/+/176517.",
      "revId": "79c17fad177959ce499535ced4903f3e727b9223",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "857a80b1_8c31dfb0",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 1948,
      "author": {
        "id": 20429
      },
      "writtenOn": "2024-04-07T14:28:04Z",
      "side": 1,
      "message": "If the codec type is VP9 or AV1, this if statement crops or scales the frame to the width and height expected by `encoder_`.\n\nIf both `crop_width_` and `crop_height_` are negative, the frame\u0027s width and height are too small, but we will skip this if statement and pass the frame to the `encoder_-\u003eEncode()` call at line 2025. That will result in a crash in `av1_copy_and_extend_frame()`.\n\nSo the important question is: can both `crop_width_` and `crop_height_` be negative at line 1192?",
      "revId": "79c17fad177959ce499535ced4903f3e727b9223",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9218ba5b_6c81b927",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 1948,
      "author": {
        "id": 5117
      },
      "writtenOn": "2024-04-08T08:29:52Z",
      "side": 1,
      "message": "I don\u0027t see how crop_width_ or crop_height_ may become negative. But if I have to guess, it might be for extremely low input resolution. Then somewhere it might be rounded to the multiple of 4, but not to 0, so 1x1 input picture would be expected to be upscaled to 4x4 and crop_width_ would be -3. \n\nBut I can\u0027t find any such place in the code. If it happens, it\u0027s a bug, and the newly added checks are correct.",
      "parentUuid": "857a80b1_8c31dfb0",
      "revId": "79c17fad177959ce499535ced4903f3e727b9223",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}