{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9d8151a5_0318dbfb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-02-15T08:37:07Z",
      "side": 1,
      "message": "I think I want to add a comment on top explaining visibility decisions....",
      "revId": "be1c9ef07b900014a73528884d8e1672dcd020ca",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c449f47d_da36fa8a",
        "filename": "pc/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 5087
      },
      "writtenOn": "2022-02-15T07:51:53Z",
      "side": 1,
      "message": "We can do something like this:\n\nif (build_with_chromium) {\n  visibility \u003d [ \"*\" ]\n} else {\n  visibility \u003d [\n    \":*\",\n    \"../:webrtc\",\n    \"../test/pc/e2e:sdp_changer\",\n    \"../test/peer_scenario:peer_scenario\",\n    \"../test/peer_scenario/tests:tests\",\n    \"scenario_tests:pc_scenario_tests\",\n  ]\n}\n\nSame to the other places.\n\nBecause adding \"*\" together with others, will just overrides them and be \"*\" every time.\n\nAlso, interesting to note that we tend to allow usage inside WebRTC (without list all the targets) because this is hard to maintain and also \"it is fine to use things inside WebRTC\".\n\nSo this might be simplified to:\n\nif (build_with_chromium) {\n  visibility \u003d [ \"*\" ]\n}\n\nWhich allows usage from WebRTC but when Chrome is built it allows it to use it. Where instead we have \":*\" let\u0027s keep it, that is good to lock down dependencies (but if something inside WebRTC already uses things, well we can probably live with that).",
      "range": {
        "startLine": 42,
        "startChar": 2,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "be1c9ef07b900014a73528884d8e1672dcd020ca",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d144d28e_93019e2c",
        "filename": "pc/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-02-15T08:37:07Z",
      "side": 1,
      "message": "That would be\n\n```\nif (build_with_chromium) {\n  visibility \u003d [ \"*\" ]\n} else {\n  visibility \u003d [ \":*\" ]\n}\n```\n\nor \"../*\" for the last one if we decide to say \"usage inside webrtc is fine\".\n(I do think that we should not use private APIs in /examples by default, though... but that can be policed by judicious BUILD file monitoring)\n\nIs it possible to put this inside a \"visible_in_chrome\" directive?\n\n(I suspect that some of these targets are also needed in internal code, though)",
      "parentUuid": "c449f47d_da36fa8a",
      "range": {
        "startLine": 42,
        "startChar": 2,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "be1c9ef07b900014a73528884d8e1672dcd020ca",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3dfcd954_a17a0136",
        "filename": "pc/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 5087
      },
      "writtenOn": "2022-02-15T08:40:52Z",
      "side": 1,
      "message": "The \"visible_in_chrome\" directive is to avoid code duplication?",
      "parentUuid": "d144d28e_93019e2c",
      "range": {
        "startLine": 42,
        "startChar": 2,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "be1c9ef07b900014a73528884d8e1672dcd020ca",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd4b3d51_c57cd45f",
        "filename": "pc/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-02-15T11:10:25Z",
      "side": 1,
      "message": "It would be. But it\u0027s only like 4 places, so not a big deal.",
      "parentUuid": "3dfcd954_a17a0136",
      "range": {
        "startLine": 42,
        "startChar": 2,
        "endLine": 50,
        "endChar": 3
      },
      "revId": "be1c9ef07b900014a73528884d8e1672dcd020ca",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}