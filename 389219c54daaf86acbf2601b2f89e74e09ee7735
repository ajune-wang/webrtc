{
  "comments": [
    {
      "key": {
        "uuid": "a228c64d_be8c53dd",
        "filename": "api/peerconnectioninterface.h",
        "patchSetId": 5
      },
      "lineNbr": 410,
      "author": {
        "id": 5660
      },
      "writtenOn": "2017-12-11T22:19:53Z",
      "side": 1,
      "message": "Regular http traffic?  This doesn\u0027t mean much outside the context of the browser (a native API).\nWhy not just say we\u0027ll only use the default local interface?",
      "range": {
        "startLine": 410,
        "startChar": 63,
        "endLine": 410,
        "endChar": 0
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc16c0a0_b52bc8e7",
        "filename": "api/peerconnectioninterface.h",
        "patchSetId": 5
      },
      "lineNbr": 410,
      "author": {
        "id": 5846
      },
      "writtenOn": "2017-12-12T10:04:00Z",
      "side": 1,
      "message": "This comment was copied verbatim from the doc comment of PORTALLOCATOR_DISABLE_ADAPTER_ENUMERATION as this option mirrors PORTALLOCATOR_DISABLE_ADAPTER_ENUMERATION. I agree that the wording is ridiculously complicated.",
      "parentUuid": "a228c64d_be8c53dd",
      "range": {
        "startLine": 410,
        "startChar": 63,
        "endLine": 410,
        "endChar": 0
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b482111a_94402b2b",
        "filename": "api/peerconnectioninterface.h",
        "patchSetId": 5
      },
      "lineNbr": 417,
      "author": {
        "id": 5660
      },
      "writtenOn": "2017-12-11T22:19:53Z",
      "side": 1,
      "message": "How is is different than using IceTransportsType \u003d\u003d kNoHost?",
      "range": {
        "startLine": 417,
        "startChar": 49,
        "endLine": 417,
        "endChar": 0
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ee291fe_0ae731ee",
        "filename": "api/peerconnectioninterface.h",
        "patchSetId": 5
      },
      "lineNbr": 417,
      "author": {
        "id": 5846
      },
      "writtenOn": "2017-12-12T10:04:00Z",
      "side": 1,
      "message": "It seems that PORTALLOCATOR_DISABLE_ADAPTER_ENUMERATION is applied at the beginning of the candidate gathering, while kNoHost becomes a part of PortAllocator::candidate_filter(), and gets applied at some point later, e.g. when the hosts are already resolved.",
      "parentUuid": "b482111a_94402b2b",
      "range": {
        "startLine": 417,
        "startChar": 49,
        "endLine": 417,
        "endChar": 0
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7692db51_5b6028bd",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 5
      },
      "lineNbr": 693,
      "author": {
        "id": 5603
      },
      "writtenOn": "2017-11-28T00:53:16Z",
      "side": 1,
      "message": "I\u0027m not sure this is the right solution to this problem; this will prevent direct intranet connectivity. Also, I think the functionality you are trying to provide here is already controlled by a separate RTCConfiguration option.",
      "range": {
        "startLine": 693,
        "startChar": 9,
        "endLine": 693,
        "endChar": 36
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d7f9373_8c0c4b51",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 5
      },
      "lineNbr": 693,
      "author": {
        "id": 5846
      },
      "writtenOn": "2017-11-28T11:52:43Z",
      "side": 1,
      "message": "Hello.\n\nWhich existing RTCConfiguration option are you talking about?\n\nThis new option doesn\u0027t disable intranet. It tells the code to not try to enumerate and probe the interfaces, and instead use the default one (whatever is the default for the OS). In case of iOS it works, because it stops trying to access the link-local interface, and starts using the right interface quicker.",
      "parentUuid": "7692db51_5b6028bd",
      "range": {
        "startLine": 693,
        "startChar": 9,
        "endLine": 693,
        "endChar": 36
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8623417_c5288d96",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 5
      },
      "lineNbr": 693,
      "author": {
        "id": 5846
      },
      "writtenOn": "2017-11-28T12:01:08Z",
      "side": 1,
      "message": "This new option corresponds to the PORTALLOCATOR_DISABLE_ADAPTER_ENUMERATION option of the portallocator.h. It was not exposed via RTCConfiguration before.\n\nSome other port allocator options were exposed (for example PORTALLOCATOR_DISABLE_TCP corresponds to the tcp_candidate_policy), but this controls a different thing - how the network interface is selected.",
      "parentUuid": "9d7f9373_8c0c4b51",
      "range": {
        "startLine": 693,
        "startChar": 9,
        "endLine": 693,
        "endChar": 36
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4d1575f_b1d15698",
        "filename": "pc/peerconnection.cc",
        "patchSetId": 5
      },
      "lineNbr": 693,
      "author": {
        "id": 5603
      },
      "writtenOn": "2017-12-07T20:39:28Z",
      "side": 1,
      "message": "Thanks for your patience. I had to go review the Chromium code to understand how this situation is handled in Chromium, which is trying to solve a similar problem. As it turns out, Chromium injects its own NetworkManager where it controls enumeration via the enumeration_permission function, which is admittedly awkward for typical WebRTC applications.\n\nAnyway, let\u0027s take a step back. \n1) It\u0027s not clear to me that having a link-local address is actually a problem - connectivity will still proceed on the other addresses.\n2) If we believe that optimizing away link-local candidates is a useful optimization, I would focus on solving that problem, rather than disabling enumeration entirely. Disabling enumeration is designed for a different purpose and has several downsides (e.g. preventing p2p connectivity for users on the same network).\n3) If, regardless, we think there\u0027s a good reason to expose this for its intended purpose (i.e., controlling which addresses are exposed to the app), it should be global, and therefore an option on PeerConnectionFactory::Options rather than on an individual PeerConnection.",
      "parentUuid": "e8623417_c5288d96",
      "range": {
        "startLine": 693,
        "startChar": 9,
        "endLine": 693,
        "endChar": 36
      },
      "revId": "389219c54daaf86acbf2601b2f89e74e09ee7735",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}