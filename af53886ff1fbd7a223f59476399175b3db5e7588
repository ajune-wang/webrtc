{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "dc9c7b05_a89d5c59",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 21
      },
      "lineNbr": 0,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-08T12:27:30Z",
      "side": 1,
      "message": "The goal is to land this as prototype code, meaning it doesn\u0027t quite need to be production quality, PTAL.",
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c240f70_50c2eae7",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 38,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "how is it different from keyframe?",
      "range": {
        "startLine": 38,
        "startChar": 36,
        "endLine": 38,
        "endChar": 47
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0e73766_d65e9175",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 38,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "A keyframe completely resets the decoder state, a startframe does not. Both can be decoded without any prior information.",
      "parentUuid": "2c240f70_50c2eae7",
      "range": {
        "startLine": 38,
        "startChar": 36,
        "endLine": 38,
        "endChar": 47
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8317d6bf_52474c15",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 42,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "what does it mean?",
      "range": {
        "startLine": 42,
        "startChar": 8,
        "endLine": 42,
        "endChar": 20
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9bd67a9c_a5bf11c8",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 42,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "The `effort_level` maps to the speed setting of the encoder. Higher effort level means slower speed, meaning longer encode speeds but better compression.",
      "parentUuid": "8317d6bf_52474c15",
      "range": {
        "startLine": 42,
        "startChar": 8,
        "endLine": 42,
        "endChar": 20
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dca6da39_4f83eb49",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 45,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "I think this struct needs to also provide external QP",
      "range": {
        "startLine": 45,
        "startChar": 9,
        "endLine": 45,
        "endChar": 28
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd810876_820d37bb",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 45,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "What is external QP?",
      "parentUuid": "dca6da39_4f83eb49",
      "range": {
        "startLine": 45,
        "startChar": 9,
        "endLine": 45,
        "endChar": 28
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30ec0f6e_a98167dd",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 55,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "does bitrate really belong on the frame level?\n\nhow can the encoder plan any kind of rate control if it changes on every frame?",
      "range": {
        "startLine": 55,
        "startChar": 4,
        "endLine": 55,
        "endChar": 41
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d9be887_d5c176aa",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 55,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "Frame target size is basically `duration * target_bitrate`. The reason it\u0027s expressed this way is because the rate control buffers inside an encoder measure overuse/underuse in time and not bytes.",
      "parentUuid": "30ec0f6e_a98167dd",
      "range": {
        "startLine": 55,
        "startChar": 4,
        "endLine": 55,
        "endChar": 41
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0d9b890_b81d5777",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 58,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "I thought that encoders don\u0027t bother with temporal_id now, and it\u0027s fully determined by reference_buffers/update_buffer pattern.",
      "range": {
        "startLine": 58,
        "startChar": 8,
        "endLine": 58,
        "endChar": 19
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7df425e8_427e4985",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 58,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "The only reason we need `temporal_id` is because of how CBR rate controller work in actual implementations (every {sid,tid} has its own buffer levels).",
      "parentUuid": "a0d9b890_b81d5777",
      "range": {
        "startLine": 58,
        "startChar": 8,
        "endLine": 58,
        "endChar": 19
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a70cdaf_8c8c1eee",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 59,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "how can a frame have a spatial_id? \neach frame exists in all spatial layers",
      "range": {
        "startLine": 59,
        "startChar": 8,
        "endLine": 59,
        "endChar": 18
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe74c771_df470dcf",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 59,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "No, a frame may be encoded for some layer(s) only, for example:\n\n    [ ]\u003c--[ ]\u003c--[ ]\u003c--[ ]\u003c--[ ]\n     |           |           |\n     v           v           v\n    [ ]\u003c--------[ ]\u003c--------[ ]",
      "parentUuid": "4a70cdaf_8c8c1eee",
      "range": {
        "startLine": 59,
        "startChar": 8,
        "endLine": 59,
        "endChar": 18
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1264d73_48696eee",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 61,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "in this case unordered_set will do nothing good except for heap fragmentation",
      "range": {
        "startLine": 61,
        "startChar": 3,
        "endLine": 61,
        "endChar": 30
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d31fb25c_6365891f",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 61,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "Probably, it was more to reflect that reference order does not matter, it\u0027s just a set of references.",
      "parentUuid": "b1264d73_48696eee",
      "range": {
        "startLine": 61,
        "startChar": 3,
        "endLine": 61,
        "endChar": 30
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd6d9a60_d5e38248",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 86,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "why vector and not simply one instance?",
      "range": {
        "startLine": 86,
        "startChar": 28,
        "endLine": 86,
        "endChar": 60
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b0dde17_617c6205",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 86,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "Lets use this example again:\n\n     0     1     2     3     4\n    [B]\u003c--[C]\u003c--[E]\u003c--[F]\u003c--[H]\n     |           |           |\n     v           v           v\n    [A]\u003c--------[D]\u003c--------[G]\n    \nIn this case we have 5 temporal units:\nTU0: Encode frame {A,B}\nTU1: {C}\nTU2: {D,E}\nTU3: {F}\nTU4: {G,H}\n... and so on.",
      "parentUuid": "fd6d9a60_d5e38248",
      "range": {
        "startLine": 86,
        "startChar": 28,
        "endLine": 86,
        "endChar": 60
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c080b965_7cf8d2fe",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 87,
      "author": {
        "id": 18209
      },
      "writtenOn": "2024-03-14T09:28:08Z",
      "side": 1,
      "message": "how many times does the encoder supposed to call this callback?",
      "range": {
        "startLine": 87,
        "startChar": 43,
        "endLine": 87,
        "endChar": 65
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad5b9dc9_bcdbc729",
        "filename": "api/video_codecs/video_encoder_interface.h",
        "patchSetId": 21
      },
      "lineNbr": 87,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-03-14T13:40:35Z",
      "side": 1,
      "message": "It\u0027s not set in stone yet, but the idea right now is for the callback to be called once for every element in `frame_settings`.\n\nIf something goes wrong you get one error callback and then the encoder needs to be discarded.",
      "parentUuid": "c080b965_7cf8d2fe",
      "range": {
        "startLine": 87,
        "startChar": 43,
        "endLine": 87,
        "endChar": 65
      },
      "revId": "af53886ff1fbd7a223f59476399175b3db5e7588",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}