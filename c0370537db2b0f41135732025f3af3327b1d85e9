{
  "comments": [
    {
      "key": {
        "uuid": "e65e154f_b73ca250",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-06-26T04:09:27Z",
      "side": 1,
      "message": "Maybe also clarify this comment to distinguish it from interface_id.",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "059b0421_5a776652",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e65e154f_b73ca250",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18733efb_608d8df9",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 5039
      },
      "writtenOn": "2018-06-26T04:09:27Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 128,
        "startChar": 11,
        "endLine": 128,
        "endChar": 19
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e1f6b33_e41bea4a",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18733efb_608d8df9",
      "range": {
        "startLine": 128,
        "startChar": 11,
        "endLine": 128,
        "endChar": 19
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9dafb766_731dea24",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 129,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-06-27T23:13:36Z",
      "side": 1,
      "message": "\"e.g.\" implies that there are other reasons for the same interface having multiple networks, but isn\u0027t this the only possible reason? I think the comments describing what these IDs represent could be more clear.",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7f1a426_061c7d49",
        "filename": "api/candidate.h",
        "patchSetId": 4
      },
      "lineNbr": 129,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "Edited comments for both IDs. PTAL.",
      "parentUuid": "9dafb766_731dea24",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f26778f6_434805f3",
        "filename": "p2p/base/stun.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-06-27T23:13:36Z",
      "side": 1,
      "message": "What about network cost/network ID? I thought the idea was to have a new attribute that contains all necessary information and eventually stop using the old attribute.",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff4a2e73_179ed0c5",
        "filename": "p2p/base/stun.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "I should really call it the part 2 of STUN_ATTR_NETWORK_INFO, or STUN_ATTR_NETWORK_INFO_EXTRA. Both attributes are signaled and detected by the new endpoint. Do I misunderstand what you mean?",
      "parentUuid": "f26778f6_434805f3",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ccf4de2_f19bc8a9",
        "filename": "p2p/base/stun.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-07-10T09:31:49Z",
      "side": 1,
      "message": "Using two attributes instead of one wastes 4 bytes per STUN message, though. So I\u0027d think one attribute would be preferable in the long run. If 32 bits isn\u0027t enough, could make it longer, or make it variable length so we won\u0027t have to do this again. Making a new StunAttribute subclass seems reasonable too (encapsulating the logic of reading/writing the bitfields).",
      "parentUuid": "ff4a2e73_179ed0c5",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79692df4_44b11c8c",
        "filename": "p2p/base/stun.h",
        "patchSetId": 4
      },
      "lineNbr": 599,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-07-19T17:49:39Z",
      "side": 1,
      "message": "My worry about extending the existing attribute to 64 bits or beyond was this might cause run-time problem for old endpoints. When an old endpoint parses the STUN message sent by a new endpoint, it would generate a StunUInt32Attribute for STUN_ATTR_NETWORK_INFO and consumes 4 bytes of the buffer. The parser continues to interpret the next 4 bytes, and it could make sense of it, e.g. interface_id \u003d 1 interpreted as attr_type \u003d 1, and then the bits beyond these 4 bytes (if we extend the attribute beyond 64bits or adding more attributes later) would be incorrectly parsed and produce attributes with the same types as ones parsed previously but garbage values.\n\nI realize now this is not a problem if we do not plan to add more attributes (likely so) since StunMessage::GetAttribute iterates the list attrs_ sequentially and these garbage attributes, if ever produced, would not interfere. Extending the existing attribute also removes one more potential conflict and the need to register another type value, a concern as pointed out by Harald.\n\nThere is still one caveat if we extend the existing attribute, and we need to tweak the byte order. My understanding is that, if we use StunUInt64Attribute, and if network_id \u003d 1, network_cost \u003d 2, interface_id \u003d 3, we need the 4-byte layout like 0x3F12 when constructing a StunUInt64Attribute, so it becomes 0x21F3 in the big endian, and when an old endpoint consumes the first 2 bytes, it obtain 0x21 and converts it to 0x12 to have the correct network_id and network_cost.\n\nI am debating with myself tweaking the byte order is too hacky.",
      "parentUuid": "9ccf4de2_f19bc8a9",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "012c8892_e423de1d",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 207,
      "author": {
        "id": 6646
      },
      "writtenOn": "2018-06-26T00:46:36Z",
      "side": 1,
      "message": "I am not sure I understand the context of this existing comment.",
      "range": {
        "startLine": 205,
        "startChar": 27,
        "endLine": 207,
        "endChar": 47
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cb07efe_df3ddf2d",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 207,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-06-27T23:13:36Z",
      "side": 1,
      "message": "I think it may be implying \"it\u0027s ok if this rolls over back to 0, because by the time that happens the original ID 0 Network won\u0027t be in use by a \"best connection\"\"?",
      "parentUuid": "012c8892_e423de1d",
      "range": {
        "startLine": 205,
        "startChar": 27,
        "endLine": 207,
        "endChar": 47
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c32f4308_802a33c0",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 207,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "Hmm, this makes much more sense. It probably assumes \"old and the new best connections\" are not too distance in their \"generation\" that is related to the indices of their networks.",
      "parentUuid": "0cb07efe_df3ddf2d",
      "range": {
        "startLine": 205,
        "startChar": 27,
        "endLine": 207,
        "endChar": 47
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "471a27ca_ccbca122",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 407,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "is?",
      "range": {
        "startLine": 407,
        "startChar": 56,
        "endLine": 407,
        "endChar": 62
      },
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36dfed48_89921320",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 411,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-06-27T23:13:36Z",
      "side": 1,
      "message": "Comment describing what interface_id represents?",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11c62a53_7d2747e6",
        "filename": "rtc_base/network.h",
        "patchSetId": 4
      },
      "lineNbr": 411,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-06-28T17:41:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "36dfed48_89921320",
      "revId": "c0370537db2b0f41135732025f3af3327b1d85e9",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}