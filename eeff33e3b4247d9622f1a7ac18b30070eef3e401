{
  "comments": [
    {
      "key": {
        "uuid": "8675cc09_729a5852",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5399
      },
      "writtenOn": "2017-12-07T15:51:26Z",
      "side": 1,
      "message": "Took a while to figure out why the new ref count was 4 (and not 2 or 3). \nnit: These three scoped_refptr should be const scoped_refptr\u0026 to avoid doing an additional AddRef/Release. That\u0027ll bring down the EXPECTs to 3 and 5 from 4 and 6.\nThat\u0027s either almost nothing or a 25% decrease! :)",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3dd0423a_0091e699",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5234
      },
      "writtenOn": "2017-12-08T15:47:32Z",
      "side": 1,
      "message": "I think current guidelines is to avoid |const scoped_refptr\u003cT\u003e\u0026|.\n\nWhen ownership is just forwarded, std::move can be used to eliminate some refcount ops.\n\n(And for functions which don\u0027t need to manipulate refcount or ownership, just pass T* (or const T* or const T\u0026 as appropriate).",
      "parentUuid": "8675cc09_729a5852",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9565705c_89271a95",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5077
      },
      "writtenOn": "2017-12-15T00:38:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8675cc09_729a5852",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c990652_4cb1e7b3",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5077
      },
      "writtenOn": "2017-12-15T00:38:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3dd0423a_0091e699",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ed46aaf_9bf9895b",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5234
      },
      "writtenOn": "2017-12-15T07:55:15Z",
      "side": 1,
      "message": "In the assignment\n\n  config.audio_mixer \u003d audio_mixer\n\nthe left-hand side is a scoped_refptr. It currently works with a raw pointer at the right hand side, but I think that\u0027s a feature we shouldn\u0027t depend on and would like to phase out.\n\nI think the correct way is to take audio_mixer and similar argument as a scoped_refptr\u003cT\u003e (no const ref), and write the assignment as\n\n  config.audio_mixer \u003d std::move(audio_mixer);\n\nwhich will keep refcount updates at a minimum.\n\nI\u0027m afraid I don\u0027t quite grasp interaction between std:move and copy elision, maybe it\u0027s right to also change the return statement to return std::move(config); to eliminate useless refcount updates, I\u0027m not sure.",
      "parentUuid": "9c990652_4cb1e7b3",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ca02ff7_db8dd260",
        "filename": "media/engine/webrtcvoiceengine.cc",
        "patchSetId": 19
      },
      "lineNbr": 164,
      "author": {
        "id": 5077
      },
      "writtenOn": "2017-12-15T10:33:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1ed46aaf_9bf9895b",
      "revId": "eeff33e3b4247d9622f1a7ac18b30070eef3e401",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}