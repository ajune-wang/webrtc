{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a6fe8087_7ed6f111",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-08T16:59:33Z",
      "side": 1,
      "message": "Can you elaborate a bit more on these circumstances? Is this trying to capture the PiP window from the same version of chromium? Or is it only when trying to capture e.g. a PiP pop-out from Chrome Stable in Chrome Canary?\n\nIf you go ahead and select the blank window anyway, is it still blank when capture actually starts?\n\nIf it\u0027s the same version of chromium, I\u0027d actually expect us to not be reaching this code as we do in-process capture via that compositor.",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "914ee0f2_e7dd8b52",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-10T20:15:47Z",
      "side": 1,
      "message": "We got report of PiP youtube window, but it actually repro on any tab that has playing youtube, not just PiP window on my machine and Austin\u0027s. Unfortunately, mine doesn\u0027t repro anymore when I uninstall the Canary and reinstall.\n\nyes, if I choose the black Youtube capture, its sharing is also black.",
      "parentUuid": "a6fe8087_7ed6f111",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65d027b9_bc82b0e7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-10T20:39:00Z",
      "side": 1,
      "message": "Is this reproing when you share from the same chromium instance (e.g. Sharing a youtube tab/chromium window from Chrome Stable to a getDisplayMedia Capturer also running Chrome Stable?) Or only across versions.\n\nIf it is the former, (or specifically tab sharing) then that wouldn\u0027t be affected by this capturer.\n\nYou can check this (though you\u0027ll need to actually create the capturer, not just from the previews) via chrome://tracing and the \"disabled_by_default\" category \"video_and_image_capture\" (select \"manually enable categories\" and then \"disabled_by_default\" should appear on the right hand column).\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:content/browser/renderer_host/media/in_process_video_capture_device_launcher.cc;drc\u003d9ec625abadf0c0d44137a27506e4920335abcde6;l\u003d249\n\nSorry for trying to confirm this, correct me if I\u0027m wrong, but it *sounds* like this is mostly a speculative fix as we don\u0027t know the root cause, so I\u0027m trying to make sure that it\u0027s the system-level window capturer that actually has the problem and not the window capturer that captures chromium windows from the same process (or even chromium tabs). If you have other confirmation that the gdi capturer is definitely what\u0027s running and failing then that\u0027s fine too.",
      "parentUuid": "914ee0f2_e7dd8b52",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11d2beaf_ea249d2d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-14T18:49:56Z",
      "side": 1,
      "message": "Afaik, it failed to capture of the same instance\u0027s view. I don\u0027t remember if I\u0027ve tested on other instance\u0027s youbute but I assume it also failed to capture it. Austin and I thought it is an issue in the GDI and Windows.",
      "parentUuid": "65d027b9_bc82b0e7",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fedfc3b6_6b262e5e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-14T19:12:02Z",
      "side": 1,
      "message": "If it\u0027s happening on the same instance, then I don\u0027t believe the GDI/WGC/Windows capturer is actually involved at all. If the window is owned by the same browser process, the browser actually handles that capture by copying the frame that it submits to be painted. So I\u0027m unsure that this is necessary without further confirmation.\n\n@Mark, can you confirm how a same-instance PiP (should be) handled by the capturers?",
      "parentUuid": "11d2beaf_ea249d2d",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e2de460_65c52755",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 12416
      },
      "writtenOn": "2022-03-14T21:23:41Z",
      "side": 1,
      "message": "I remember we were able to repro this across versions and even across browsers (e.g. Chrome capturing PiP window from Edge) as well as within the same browser instance.",
      "parentUuid": "65d027b9_bc82b0e7",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43c1c258_c8d7d494",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 14134
      },
      "writtenOn": "2022-03-14T21:56:27Z",
      "side": 1,
      "message": "It\u0027s possible that either capturer is involved, it\u0027s the picker code (and related logic) that chooses the capturer for a given window.  Do you have logging to show which capturer is in use for the repro case?",
      "parentUuid": "5e2de460_65c52755",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e742cb7_746225be",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-15T01:07:19Z",
      "side": 1,
      "message": "unfortunately, we don\u0027t have logging for this now.",
      "parentUuid": "43c1c258_c8d7d494",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e160c817_9fad54e4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 12,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-15T17:57:57Z",
      "side": 1,
      "message": "I think such logging may be tricky to capture, as the only way to uniquely identify the window that this was reproing on would be to include the window title with it?\n\nGiven Austin\u0027s comment that this also reprod when capturing across versions/chrome\u003c-\u003eedge; that\u0027s enough signal to me that in at least one case we *were* using the GDI capturer (and there seems like some similar bugs here as well: https://crbug.com/1298857)",
      "parentUuid": "8e742cb7_746225be",
      "range": {
        "startLine": 11,
        "startChar": 32,
        "endLine": 12,
        "endChar": 42
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2586a9d1_13790d71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-03T04:51:06Z",
      "side": 1,
      "message": "thanks for review.",
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35e5452c_9d37bf2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-04T19:54:54Z",
      "side": 1,
      "message": "Hi Alex, \n\nI\u0027m new on webrtc team in Microsoft (work with Austin), can you review this change and also run Dry run as I can\u0027t run it?\n\nThanks,\nSunggook",
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65d18f03_04afa39a",
        "filename": "modules/desktop_capture/desktop_capture_options.h",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-08T16:59:33Z",
      "side": 1,
      "message": "I don\u0027t love that we\u0027re essentially bypassing this flag with this fallback.\n\nCan we add a second flag like \"allow_wgc_capturer_fallback\"? This way we\u0027re not totally ignoring this knob, but give consumers a way to customize this behavior? (e.g. I don\u0027t want to use this feature as my primary capturer yet, but if there\u0027s something seriously wrong I\u0027d rather use this than nothing)",
      "range": {
        "startLine": 174,
        "startChar": 7,
        "endLine": 174,
        "endChar": 25
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8d87708_83c11117",
        "filename": "modules/desktop_capture/desktop_capture_options.h",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-10T20:15:47Z",
      "side": 1,
      "message": "I\u0027ve added allow_wgc_capturer_fallback in the DesktopCaptureOptions. I realized that setting the flag needs to be made in the \u0027CreateDesktopCaptureOptions\u0027 where it sets it as a default when RTC_ENABLE_WIN_WGC is enabled.\n\nHow I can change the chromium repo code with this CL because CreateDesktopCaptureOptions is in \\content\\public\\browser\\desktop_capture.cc?",
      "parentUuid": "65d18f03_04afa39a",
      "range": {
        "startLine": 174,
        "startChar": 7,
        "endLine": 174,
        "endChar": 25
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "273ad6b8_5906898e",
        "filename": "modules/desktop_capture/desktop_capture_options.h",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-10T20:39:00Z",
      "side": 1,
      "message": "I believe you\u0027ll have to make a new CL in chromium once this lands and has rolled over there (which seems to happen fairly quickly).",
      "parentUuid": "b8d87708_83c11117",
      "range": {
        "startLine": 174,
        "startChar": 7,
        "endLine": 174,
        "endChar": 25
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77fad6c1_06e2ed01",
        "filename": "modules/desktop_capture/desktop_capture_options.h",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-14T18:49:56Z",
      "side": 1,
      "message": "will do once this one merged.",
      "parentUuid": "273ad6b8_5906898e",
      "range": {
        "startLine": 174,
        "startChar": 7,
        "endLine": 174,
        "endChar": 25
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2237355_2a623741",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-08T16:59:33Z",
      "side": 1,
      "message": "Is there a reason we can\u0027t use make_unique here?",
      "range": {
        "startLine": 34,
        "startChar": 4,
        "endLine": 35,
        "endChar": 53
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3b66e8c_c6bd535e",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-10T20:15:47Z",
      "side": 1,
      "message": "capturer is already unique_ptr that accepts only raw pointer for its reset parameter. (using make_unique would make it compiler error).",
      "parentUuid": "c2237355_2a623741",
      "range": {
        "startLine": 34,
        "startChar": 4,
        "endLine": 35,
        "endChar": 53
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fcc7eb1_c8080f0a",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-10T20:39:00Z",
      "side": 1,
      "message": "Sorry, to clarify I meant we should consider:\n\n  capturer \u003d std::make_unique\u003cBlankDetectorCapturerWrapper\u003e(std::move(capturer), ...)\n\nWhich feels a bit better than the .reset that takes a std::moved\u0027d version of the main object.",
      "parentUuid": "a3b66e8c_c6bd535e",
      "range": {
        "startLine": 34,
        "startChar": 4,
        "endLine": 35,
        "endChar": 53
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "54050e78_563aaaa9",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-14T18:49:56Z",
      "side": 1,
      "message": "thanks for clarification, I\u0027m fine with suggestion.",
      "parentUuid": "7fcc7eb1_c8080f0a",
      "range": {
        "startLine": 34,
        "startChar": 4,
        "endLine": 35,
        "endChar": 53
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "858954dc_c1e7cce5",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-08T16:59:33Z",
      "side": 1,
      "message": "This feels like a very specific scenario to be made part of the public desktop_capture_options. I think I\u0027d prefer it if it was an (optional) bool that could be passed in to CreateRawWindowCapturer.",
      "range": {
        "startLine": 38,
        "startChar": 16,
        "endLine": 38,
        "endChar": 50
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd8ad538_b1d5c9e5",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-08T22:41:09Z",
      "side": 1,
      "message": "Sorry, to further clarify, that can be passed in to WgcCapturerWin::CreateRawWindowCapturer",
      "parentUuid": "858954dc_c1e7cce5",
      "range": {
        "startLine": 38,
        "startChar": 16,
        "endLine": 38,
        "endChar": 50
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e53f150_025ab4d9",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-10T20:15:47Z",
      "side": 1,
      "message": "I\u0027m fine with adding bool on the WgcCapturerWin::CreateRawWindowCapture(DesktopCaptureOptions options, bool delayed_capturable_check), but the only problem I have is that it looks like all CreateRawWindowCapturer has a same ctor of receiving only DesktopCaptureOptions.\n\nIf you still think to have bool param, I will add it.",
      "parentUuid": "cd8ad538_b1d5c9e5",
      "range": {
        "startLine": 38,
        "startChar": 16,
        "endLine": 38,
        "endChar": 50
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d078882_1db48736",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 18474
      },
      "writtenOn": "2022-03-10T20:39:00Z",
      "side": 1,
      "message": "I don\u0027t think that\u0027s a hard requirement of having the same constructor; but I do think that the bool should be optional, so that the signature becomes something like:\n```\nCreateRawWindowCapturer(const DesktopCaptureOptions\u0026 options, bool allow_delayed_capturable_check \u003d false);\n```",
      "parentUuid": "2e53f150_025ab4d9",
      "range": {
        "startLine": 38,
        "startChar": 16,
        "endLine": 38,
        "endChar": 50
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a27ca29_1f22e2cf",
        "filename": "modules/desktop_capture/window_capturer_win.cc",
        "patchSetId": 7
      },
      "lineNbr": 38,
      "author": {
        "id": 18789
      },
      "writtenOn": "2022-03-14T18:49:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2d078882_1db48736",
      "range": {
        "startLine": 38,
        "startChar": 16,
        "endLine": 38,
        "endChar": 50
      },
      "revId": "c4f61450d1d64902feacf083d8370ec72212565a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}