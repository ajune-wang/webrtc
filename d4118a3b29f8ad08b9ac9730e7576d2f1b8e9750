{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "41f8c36d_e0df8d3d",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 5825
      },
      "writtenOn": "2024-12-09T08:17:03Z",
      "side": 1,
      "message": "Could it be that `video_format` never changes? What if we have only one codec negotiated and there is no fallback option?",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98e049c3_ac356dd6",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 18005
      },
      "writtenOn": "2024-12-09T08:29:47Z",
      "side": 1,
      "message": "Fallback is implemented here:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/media/engine/webrtc_video_engine.cc;l\u003d1234;drc\u003db7bc1aa180d6277f4adbd55b56a222ad1aef47b6\n\nYou raise a valid concern. I think I need more protection to avoid staying at pending_encoder_fallback_ state.",
      "parentUuid": "41f8c36d_e0df8d3d",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eceee902_93040511",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 5142
      },
      "writtenOn": "2024-12-09T08:35:24Z",
      "side": 1,
      "message": "Speaking of getting stuck, what if you release and/or re-initialize the encoder while we\u0027re in the pending state? Just to sanity check that it\u0027s impossible to get in a state where we stop encoding for no reason",
      "parentUuid": "98e049c3_ac356dd6",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b5c45c9_f6c24566",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 18005
      },
      "writtenOn": "2024-12-09T14:45:41Z",
      "side": 1,
      "message": "Updated the implementation to not rely on video_format change to unblock encode. Actually we don\u0027t have to check video format change: If it does not change(fallback is actually not taken action due to negotiated codec list exhausted due to fallback already), following encode request will be dropped at EncodeVideoFrame() so eventually current VideoStreamEncoder will be released during the attempt to recreate VideoSendStreams; If it fallback does happen, all VideoSendStreams will also be recreated, in that case our VideoStreamEncoder will also be released. \n\nTest is updated to check that a no-op RequestEncoderFallback will finally trigger encoder release.",
      "parentUuid": "eceee902_93040511",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02e935e5_5da36c5b",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 5825
      },
      "writtenOn": "2024-12-10T09:14:34Z",
      "side": 1,
      "message": "Seems that with the current approach (before and after this CL) we stop encoding after Encode() failed no fallback happened. Should we try to re-init encoder instead?",
      "parentUuid": "9b5c45c9_f6c24566",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d8904b4_af45b09a",
        "filename": "video/video_stream_encoder.cc",
        "patchSetId": 2
      },
      "lineNbr": 2046,
      "author": {
        "id": 5825
      },
      "writtenOn": "2024-12-10T09:15:23Z",
      "side": 1,
      "message": ".. and no fallback happened.",
      "parentUuid": "02e935e5_5da36c5b",
      "range": {
        "startLine": 2045,
        "startChar": 8,
        "endLine": 2046,
        "endChar": 52
      },
      "revId": "d4118a3b29f8ad08b9ac9730e7576d2f1b8e9750",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}