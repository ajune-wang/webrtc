{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a00b506f_9a95cd3b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-09T08:11:16Z",
      "side": 1,
      "message": "I first implemented this in chromium (https://chromium-review.googlesource.com/c/chromium/src/+/3308882) but we decided that it would be better to implement this in webrtc. I\u0027ll update that code to build on top of this.\n\nThis is still very much WIP so a detailed review of the code doesn\u0027t make sense yet, but I\u0027d like some feedback about the architecture.\n\nThere are several changed needed. Some for portal/pipewire and some to integrate this in chromium:\n\n1. I\u0027ve added a capture options object to share the pipewire connection between the devive enumeration and the capture object creation.\n2. I\u0027ve added a new API so that chromium can access the raw video frames. It has its own code that copies and converts the frame. Without this the frame is copied twice.\n3. The build system changes are a mess. I think the libpipewire detection etc. should probably be shared somehow with the desktop capture code, but I\u0027m not sure where to put this. Some D-Bus portal code has the same issue.\n\nOnce I know where this is going, I should probably split things out and submit them separately.\n\nJan, you probably have something to say about the portal / pipewire stuff. Do you know who else should be involved in the architecture and API discussion?",
      "revId": "f431d1e4fe02bdb012aa032ca9a626481b8648d1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc79c472_bca0708c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 8046
      },
      "writtenOn": "2022-05-09T08:53:12Z",
      "side": 1,
      "message": "Hi, thank you for moving this change into WebRTC. I would suggest one thing, guessing others would suggest it anyway, that is to split this change into smaller changes, at least making the video capture to support different backends should be a separate change.",
      "revId": "f431d1e4fe02bdb012aa032ca9a626481b8648d1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f793a4b_a131ee68",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-09T09:04:21Z",
      "side": 1,
      "message": "Yes, definitely. Moving the v4l2 code is already a separate commit in my local branch. I  can start with that.",
      "parentUuid": "bc79c472_bca0708c",
      "revId": "f431d1e4fe02bdb012aa032ca9a626481b8648d1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d6b01bb9_011e1281",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-09T09:34:40Z",
      "side": 1,
      "message": "Done: https://webrtc-review.googlesource.com/c/src/+/261680\n\nCan I rebase this on the other change while it is not yet merged? I\u0027m pretty inexperienced with gerrit and I couldn\u0027t find a way to do that.",
      "parentUuid": "7f793a4b_a131ee68",
      "revId": "f431d1e4fe02bdb012aa032ca9a626481b8648d1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11785ada_438b68ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 8046
      },
      "writtenOn": "2022-05-09T09:40:54Z",
      "side": 1,
      "message": "Yes, I usually do:\n1) Create a branch \u0027branch-A\u0027\n2) Create a branch \u0027branch-B\u0027 from \u0027branch-A\u0027 depending on changes there\n3) In branch \u0027B\u0027 I run \"git branch --set-upstream-to\u003dbranch-A\n\nYou can read about it here: https://chromium.googlesource.com/openscreen/+/5fce9d2d907b86fb524c160a06e1ebbc504b1257/advanced_gerrit.md",
      "parentUuid": "d6b01bb9_011e1281",
      "revId": "f431d1e4fe02bdb012aa032ca9a626481b8648d1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}