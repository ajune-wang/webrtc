{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f98a0679_e80c1f00",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T12:28:41Z",
      "side": 1,
      "message": "Sorry for the number of patchsets, but I messed with my local environment and had to bring back the previous changes.  Ignore patchsets from 5 to 10. ",
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73f2644f_60029925",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "Please add test for CropAndScale and Rotate in common_video/video_frame_unittest.cc (sorry about poor location of those tests).",
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c58d858a_eb5db11b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:17:55Z",
      "side": 1,
      "message": "They are already in:\nhttps://webrtc-review.googlesource.com/c/src/+/256964/13/common_video/video_frame_unittest.cc\n\nIs there any test missing there?",
      "parentUuid": "73f2644f_60029925",
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "076ce8d9_fba69c31",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:33:28Z",
      "side": 1,
      "message": "Sorry, it\u0027s me being confused. Looks good.",
      "parentUuid": "c58d858a_eb5db11b",
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3a3ac9df_1376e479",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:51:02Z",
      "side": 1,
      "message": "Resolving.",
      "parentUuid": "076ce8d9_fba69c31",
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd1eb9fa_9ddea68a",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 82,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "What is the use case for this method? If it\u0027s for tests only, it could be moved to test utilities (it can be implemented based on the public accessors to this class, right?).",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 82,
        "endChar": 40
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba1bdc74_4126866b",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 82,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "I followed what was already present in I010Buffer::Copy()\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/api/video/i010_buffer.cc;l\u003d79\n\nShould we modify both? If so wouldn\u0027t it be better to do the cleanup on a different patch?",
      "parentUuid": "dd1eb9fa_9ddea68a",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 82,
        "endChar": 40
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb6e95e7_1380d9f3",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 82,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:27:07Z",
      "side": 1,
      "message": "Fine to do as a followup.",
      "parentUuid": "ba1bdc74_4126866b",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 82,
        "endChar": 40
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58c2e8b5_4316f9f8",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 102,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "Do we need a copy in this case? Not sure what other buffer types do, but one could return rtc::scoped_refptr\u003cI210Buffer\u003e(this) to avoid the copy.\n\nWhich would then break any callers that use the MutableDataX() accessors and modify either buffer.",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 102,
        "endChar": 21
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85f2e6b8_9baeed78",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 102,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "This method is a clone of the one in I010Buffer::Rotate()\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/api/video/i010_buffer.cc;l\u003d94",
      "parentUuid": "58c2e8b5_4316f9f8",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 102,
        "endChar": 21
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b09e3132_f0d6148f",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 102,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:27:07Z",
      "side": 1,
      "message": "Let\u0027s leave as is for consistency. Not sure what the right behavior is, but if changed, it makes sense to change all places in the same cl.\n\n(It may be that callers never use this with Rotation_0 anyway).",
      "parentUuid": "85f2e6b8_9baeed78",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 102,
        "endChar": 21
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6dfd8b50_4a93ca38",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 111,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "I guess std::swap is fine for swapping integers, but the recommended pattern for using std::swap is the somewhat unobvious\n```\n  using std::swap // In the local scope where it\u0027s used(!)\n  swap(a,b);\n```",
      "range": {
        "startLine": 111,
        "startChar": 0,
        "endLine": 111,
        "endChar": 45
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e045852_d829c5ae",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "Could this use libyuv::RotatePlane ?",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f8ed3d5_4a71da8b",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "Rotating a I210 plane requires a retate \u0026 scale. I implemented it for 422 buffer, so I guess I could try to land a similar patch for the 10 bit format.",
      "parentUuid": "2e045852_d829c5ae",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e1d5ff3_45d4839e",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:27:07Z",
      "side": 1,
      "message": "I see. But RotatePlane could be used for Y plane, and for all planes in the case of Rotation_180, right?\n\nLeaving the case of 90 and 270 degree rotation of the U and V planes, which seems to be a trickier and irreversible operation.",
      "parentUuid": "1f8ed3d5_4a71da8b",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a041024_e1738b8b",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:29:20Z",
      "side": 1,
      "message": "My bad, there are no RotatePlane methods for 10 bits in libyuv, that\u0027s why I010Buffer implements it\u0027s own version of rotate and why I can\u0027t add a patch for i210 neither.",
      "parentUuid": "1f8ed3d5_4a71da8b",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f7372fe_6bd2c8a9",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:51:02Z",
      "side": 1,
      "message": "I see. Would it make sense to add RotatePlane functions operating on uint16_t data to libyuv?\n\nI have some difficulty following the logic in this rotation. I think it would help to have a helper functions, separating the easy cases (Y-plane, and 180 degree rotation) from the trickier case. \n\nFor rotating the U, V planes by 90 or 270 degrees, I would expect a loop where each iteration handles a block corresponding to 2x2 pixels before subsampling. In the sub-sampled plane, it would be something like\n\n  read (x,y) and (x,y+1)\n  average the two values\n  write the average twice, at (y, 2*x) and (y, 2x+1).\n\nOr if there\u0027s good reason to instead copy those two values in a reversible fashion, that deserves a comment. If I understand it, that would mean that we rotate the matrix of 2x2 blocks in the expected way, but inside each 2x2 block, only the Y-plane is rotated, the U,V planes are left unrotated. Makes my head spin a bit).",
      "parentUuid": "4a041024_e1738b8b",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2232f62_6d2ddb9b",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T15:41:47Z",
      "side": 1,
      "message": "The implementation was wrong indeed, I copied the one from I010 but did not backport the fixes I did for the 422 buffer.\n\nThe new implementation uses the same idea than https://chromium.googlesource.com/libyuv/libyuv/+/a77d615e1067fe5bb48444a073f7ee08fd273b8a\n\nI will create a CL to libyuv to add those functions so we can replace them afterwards.\n\nAs a bonus, we can have the I010Rotate in libyuv fromt he RotateXX_16 functions for free.",
      "parentUuid": "8f7372fe_6bd2c8a9",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1f8c04a_8cb2c517",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-25T13:19:43Z",
      "side": 1,
      "message": "Looks better now. If the previous version was wrong, did the unit tests detect that? Or do we need test improvements?\n\nCurrent rotation tests in common_video/video_frame_unittest.cc are intended to fill input image with a gradient, and check that corner pixels of rotated image have the expected values.",
      "parentUuid": "f2232f62_6d2ddb9b",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b80c3241_9e891a46",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 117,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-25T13:44:20Z",
      "side": 1,
      "message": "Yes, current test detected the error on the previous version.\n\nWould it be possible to run the tryjobs to see if I have overlooked anything else?",
      "parentUuid": "e1f8c04a_8cb2c517",
      "range": {
        "startLine": 116,
        "startChar": 0,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9cdd6f8e_71ad917a",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 215,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "If the intention is to RTC_CHECK everything, also check that crop_width and crop_height \u003e\u003d 0 ?",
      "range": {
        "startLine": 213,
        "startChar": 0,
        "endLine": 215,
        "endChar": 0
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14d99e70_6b8546d8",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 215,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9cdd6f8e_71ad917a",
      "range": {
        "startLine": 213,
        "startChar": 0,
        "endLine": 215,
        "endChar": 0
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e38374ac_d497f809",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 222,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T12:57:12Z",
      "side": 1,
      "message": "Maybe naming src_y etc would be clearer.",
      "range": {
        "startLine": 222,
        "startChar": 18,
        "endLine": 222,
        "endChar": 25
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2e8299b_e6afe593",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 222,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "It is called y_plane in both I010Buffer and I444Buffer, would be better to keep it as it is for consistency.",
      "parentUuid": "e38374ac_d497f809",
      "range": {
        "startLine": 222,
        "startChar": 18,
        "endLine": 222,
        "endChar": 25
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c20f1a53_29f4b3ea",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 12
      },
      "lineNbr": 222,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-04-22T13:27:07Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d2e8299b_e6afe593",
      "range": {
        "startLine": 222,
        "startChar": 18,
        "endLine": 222,
        "endChar": 25
      },
      "revId": "737f13b3ee24586bcd78bb65f56ea1c4627bd997",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}