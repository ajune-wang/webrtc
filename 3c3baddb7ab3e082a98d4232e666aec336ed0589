{
  "comments": [
    {
      "key": {
        "uuid": "86502229_d073bba7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Minor comments but they\u0027re repeated in multiple places. Can you comment about support of decoding directly to NV12 versus decoding to I420 and then converting?",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f59ac2e_69fb62de",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.cc",
        "patchSetId": 4
      },
      "lineNbr": 341,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "So we still decode to I420 and then convert to NV12. Is it not possible to decode directly to NV12? Should we add a TODO or is this not supported?",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1e40577_ea036795",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.cc",
        "patchSetId": 4
      },
      "lineNbr": 341,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "It\u0027s not fundamentally supported, as VPX bitstream is structured around separate Y,U and V planes. It\u0027s technically possible to smear the conversion in libvpx code, but it will still be an extra conversion, even if hidden.\n\nIn VP8 case, we can collocate this conversion with already existing copy operation with a smaller overhead than a separate conversion. In VP9 and H264 - it\u0027s not possible at all.",
      "parentUuid": "4f59ac2e_69fb62de",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "052eb139_4b0f0392",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Now that we have multiple pools, rename this one to i420_pool_?\n\nActually, that might still not be entirely clear unless you know why we have two pools. How about renaming the variables after what the pools are used for, since there is nothing preventing us from outputting something other than NV12 in the future? Just a suggestion but how about?\n\npool_ is renamed ffmpeg_destination_pool_ // The ffmpeg decoder outputs in this format.\nnv12_buffer_pool_ is renamed decoder_output_pool_ // Frames are delivered to the callbacks in this format.\n\nBecause the output pool is only used when the output pixel format is different than the destination pool, consider making it std::unique_ptr\u003c\u003e and having it be null if not used.",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cc34611_8ad4e40c",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "Done.\n\nNot using unique_ptr to not complicate the code. It\u0027s small enough overhead for now, and in the future it will be on or off via gn flags, so no overhead at all.",
      "parentUuid": "052eb139_4b0f0392",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "67ae7cd3_f46a3f81",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Prefer a new enum class with kI420 and kNV12 values, or, if reusing an existing pixel format enum, DCHECK that the format we pick is one of the supported formats. Variable name could be \"output_pixel_format_\"",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb563fde_82f50d56",
        "filename": "modules/video_coding/codecs/h264/h264_decoder_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "This is a stop-gap solution so we could roll it out with a finch trial for measurement.\n\nIn the end, nv12 will be hardcoded in chrome and enabled via gn args (but not in webrtc by default).\n\nTherefore enum is not really suitable here.",
      "parentUuid": "67ae7cd3_f46a3f81",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7a255e4_7f78bbd5",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_decoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 339,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Same question here: Is there no support in decoding directly to NV12? TODO or not supported?",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd52dd61_3b662e6e",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_decoder.cc",
        "patchSetId": 4
      },
      "lineNbr": 339,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "Not supported. Added a comment.",
      "parentUuid": "d7a255e4_7f78bbd5",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d15f584_c89df18a",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_decoder.h",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Same comment, different place: I prefer an enum",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21ccff6c_94db6b5f",
        "filename": "modules/video_coding/codecs/vp8/libvpx_vp8_decoder.h",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:59:13Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5d15f584_c89df18a",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c449931_d8e64d5b",
        "filename": "modules/video_coding/codecs/vp9/vp9_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 220,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Same comments different place",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01e8608c_f530444c",
        "filename": "modules/video_coding/codecs/vp9/vp9_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 220,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c449931_d8e64d5b",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ddcb126e_24625130",
        "filename": "modules/video_coding/codecs/vp9/vp9_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 228,
      "author": {
        "id": 5142
      },
      "writtenOn": "2020-09-28T10:38:25Z",
      "side": 1,
      "message": "Same comments different place",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f2aa02f_41902754",
        "filename": "modules/video_coding/codecs/vp9/vp9_impl.h",
        "patchSetId": 4
      },
      "lineNbr": 228,
      "author": {
        "id": 5117
      },
      "writtenOn": "2020-09-28T13:58:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ddcb126e_24625130",
      "revId": "3c3baddb7ab3e082a98d4232e666aec336ed0589",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}