{
  "comments": [
    {
      "key": {
        "uuid": "9fb5645a_2aff1d99",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1347,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-21T05:51:54Z",
      "side": 1,
      "message": "Will it work to do like this, i.e., will users of this metric get what they want with this approach?",
      "range": {
        "startLine": 1347,
        "startChar": 49,
        "endLine": 1347,
        "endChar": 59
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d893ea86_c986b65f",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1347,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-21T10:49:02Z",
      "side": 1,
      "message": "I think so. We are explicitly reporting only the current frame\u0027s audio level. This is a difference from public_submodules_-\u003elevel_estimator, which accumulates until polled for RMS().\n\nOn the other hand, I realize this Initialize() is not necessary. The level estimator is reset every time this is run, when we read the RMS level. I have removed it. Thank you!",
      "parentUuid": "9fb5645a_2aff1d99",
      "range": {
        "startLine": 1347,
        "startChar": 49,
        "endLine": 1347,
        "endChar": 59
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c2c523e2_6a49f17d",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1347,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-26T13:04:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d893ea86_c986b65f",
      "range": {
        "startLine": 1347,
        "startChar": 49,
        "endLine": 1347,
        "endChar": 59
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e27d3338_42011a3a",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1355,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-21T05:51:54Z",
      "side": 1,
      "message": "The above is very similar to what is done here.",
      "range": {
        "startLine": 1355,
        "startChar": 22,
        "endLine": 1355,
        "endChar": 29
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba135c6d_b64c861b",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1355,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-21T10:49:02Z",
      "side": 1,
      "message": "Yes. Any thoughts?\n\nThere are two differences:\n1) We only measure the first channel here, and\n2) capture_output_rms_ is only reset if (log_rms), i.e. we measure over 10 second intervals.",
      "parentUuid": "e27d3338_42011a3a",
      "range": {
        "startLine": 1355,
        "startChar": 22,
        "endLine": 1355,
        "endChar": 29
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "137856ce_9062b639",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1355,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-26T13:04:20Z",
      "side": 1,
      "message": "Good point! Thanks!",
      "parentUuid": "ba135c6d_b64c861b",
      "range": {
        "startLine": 1355,
        "startChar": 22,
        "endLine": 1355,
        "endChar": 29
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c70c985_11622b90",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1606,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-21T05:51:54Z",
      "side": 1,
      "message": "If has_remote_tracks\u003d\u003dfalse, this requires an extra copy of the struct.\n\nWhat about\nif (has_remote_tracks) {\n AudioProcessingStats stats \u003d capture_.stats;\n ...\n return stats;\n}\nelse {\n return capture_.stats;\n} \n\n\nOr an early return to reduce the indentation depth\nif (!has_remote_tracks) {\n return capture_.stats; \n}\n\nAudioProcessingStats stats \u003d capture_.stats;\n...\nreturn stats;",
      "range": {
        "startLine": 1606,
        "startChar": 23,
        "endLine": 1606,
        "endChar": 28
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebb422ab_edfb59c4",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1606,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-21T10:49:02Z",
      "side": 1,
      "message": "I assumed the compiler would do return value optimization.  I added an early return anyway, like you suggest.\nhttps://en.wikipedia.org/wiki/Copy_elision#Return_value_optimization",
      "parentUuid": "7c70c985_11622b90",
      "range": {
        "startLine": 1606,
        "startChar": 23,
        "endLine": 1606,
        "endChar": 28
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c108222_f7e01e7e",
        "filename": "modules/audio_processing/audio_processing_impl.cc",
        "patchSetId": 6
      },
      "lineNbr": 1606,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-26T13:04:20Z",
      "side": 1,
      "message": "You are probably right. My feeling was that there was so much going on in the method that that behavior was not guaranteed but reading the referenced page I think you are correct.",
      "parentUuid": "ebb422ab_edfb59c4",
      "range": {
        "startLine": 1606,
        "startChar": 23,
        "endLine": 1606,
        "endChar": 28
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca8aeba0_1c89af5a",
        "filename": "modules/audio_processing/include/audio_processing.h",
        "patchSetId": 6
      },
      "lineNbr": 286,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-21T05:51:54Z",
      "side": 1,
      "message": "Maybe state what happens with the value if level_estimation.enabled \u003d true",
      "range": {
        "startLine": 286,
        "startChar": 30,
        "endLine": 286,
        "endChar": 31
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2820615_e6cc74ba",
        "filename": "modules/audio_processing/include/audio_processing.h",
        "patchSetId": 6
      },
      "lineNbr": 286,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-21T10:49:02Z",
      "side": 1,
      "message": "Ah, I thought this comment did just that.. What\u0027s a better formulation?\n\"Enables reporting of |output_rms_dbfs| in webrtc::AudioProcessingStats?\"",
      "parentUuid": "ca8aeba0_1c89af5a",
      "range": {
        "startLine": 286,
        "startChar": 30,
        "endLine": 286,
        "endChar": 31
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed27a82d_60d46cd3",
        "filename": "modules/audio_processing/include/audio_processing_statistics.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-16T13:41:39Z",
      "side": 1,
      "message": "peah@, wdyt?\nI don\u0027t quite understand why we report this as an integer. It is computed as a float, but sign-reversed and casted to int in the RmsLevel class. It is convenient for the UMA reporting in Chrome, but I would prefer to just let the user decide what resolution they want. This API change is a chance make the change, it\u0027s a small addition in the RmsLevel/LevelEstimatorImpl interfaces.",
      "range": {
        "startLine": 33,
        "startChar": 17,
        "endLine": 33,
        "endChar": 20
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff9fc445_16f86e1d",
        "filename": "modules/audio_processing/include/audio_processing_statistics.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 5119
      },
      "writtenOn": "2018-11-16T13:44:43Z",
      "side": 1,
      "message": "Ahh I missed that the sign-flip and integer is part of the rfc6465 spec. I guess we might as well leave it unchanged, since I don\u0027t have any specific use case in mind for reporting a float.",
      "parentUuid": "ed27a82d_60d46cd3",
      "range": {
        "startLine": 33,
        "startChar": 17,
        "endLine": 33,
        "endChar": 20
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "746e61cc_23aa30ed",
        "filename": "modules/audio_processing/include/audio_processing_statistics.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 5125
      },
      "writtenOn": "2018-11-21T05:51:54Z",
      "side": 1,
      "message": "I share your view on this.\nRegarding the integer part, I kind of think it makes sense to do that though, as the fractional accuracy provided by the float is not really actionable.",
      "parentUuid": "ff9fc445_16f86e1d",
      "range": {
        "startLine": 33,
        "startChar": 17,
        "endLine": 33,
        "endChar": 20
      },
      "revId": "b1dee112ed4652f69f6fc9c6651d2b185d48fed8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}