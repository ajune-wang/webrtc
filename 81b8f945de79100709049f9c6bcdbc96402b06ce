{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2ab80edd_abdf57ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6720
      },
      "writtenOn": "2023-09-12T09:47:13Z",
      "side": 1,
      "message": "submitting ðŸ˜Š",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edba9792_ec52594a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5508
      },
      "writtenOn": "2023-09-12T09:48:23Z",
      "side": 1,
      "message": "...and this time from the proper account",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e98172fa_0ca5d09a",
        "filename": "modules/audio_processing/logging/apm_data_dumper.h",
        "patchSetId": 1
      },
      "lineNbr": 94,
      "author": {
        "id": 5508
      },
      "writtenOn": "2023-09-11T11:54:43Z",
      "side": 1,
      "message": "Just checking - Is it correct that due to the RTC_CHECK in the above line (93), this isn\u0027t a functional change in terms of runtime behavior?\n(i.e. since we\u0027d always terminate if `.size()` was equal to or larger than `kOutputDirMaxLength`)",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8c24b03_15fd0f57",
        "filename": "modules/audio_processing/logging/apm_data_dumper.h",
        "patchSetId": 1
      },
      "lineNbr": 94,
      "author": {
        "id": 5150
      },
      "writtenOn": "2023-09-11T14:08:24Z",
      "side": 1,
      "message": "I think the point of the CL is that strcpyn is reserving the last byte of the buffer for a null byte, so if we attempt to copy a string of length n to a buffer of length n, then it would only copy the first n-1 characters. https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/rtc_base/string_utils.cc;l\u003d23;drc\u003de5b22206501ba1edd38018981e0dae8358986a3d",
      "parentUuid": "e98172fa_0ca5d09a",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da80fc96_5044fc2f",
        "filename": "modules/audio_processing/logging/apm_data_dumper.h",
        "patchSetId": 1
      },
      "lineNbr": 94,
      "author": {
        "id": 5508
      },
      "writtenOn": "2023-09-11T14:21:39Z",
      "side": 1,
      "message": "Yup, I understand the point of the CL.\n\nWhat I\u0027m pointing out is, if you take a look at the CHECK in the preceding line, is that `output_dir.size()` is always less than `kOutputDirMaxLength`.\n\nSo the n-1 part of how strcpyn is implemented, isn\u0027t relevant (in practice - I do agree that we should land the change, just pointing out that this is not a security problem).",
      "parentUuid": "d8c24b03_15fd0f57",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e20acdba_0c0a3cf1",
        "filename": "modules/audio_processing/logging/apm_data_dumper.h",
        "patchSetId": 1
      },
      "lineNbr": 94,
      "author": {
        "id": 5150
      },
      "writtenOn": "2023-09-12T08:39:55Z",
      "side": 1,
      "message": "Right; it shouldn\u0027t be a security problem but I think it *is* a functional change in `SetOutputDirectory`.\n\nFor example,\n```\nsize_t kOutputDirMaxLength \u003d 1024;\nchar buffer[kOutputDirMaxLength];\nstring output_dir \u003d \"/foo/bar\"\nrtc::strcpyn(buffer, output_dir.size(), output_dir);\n```\nwould pass the `RTC_CHECK_LT(output_dir.size(), kOutputDirMaxLength)` check,\nbut `strcpyn` would only copy \"/foo/ba\".",
      "parentUuid": "da80fc96_5044fc2f",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "981c075b_b2c0a785",
        "filename": "modules/audio_processing/logging/apm_data_dumper.h",
        "patchSetId": 1
      },
      "lineNbr": 94,
      "author": {
        "id": 6720
      },
      "writtenOn": "2023-09-12T09:47:13Z",
      "side": 1,
      "message": "oh I see! Thanks for clarifying that. Looks like this has been in there for years.",
      "parentUuid": "e20acdba_0c0a3cf1",
      "revId": "81b8f945de79100709049f9c6bcdbc96402b06ce",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}