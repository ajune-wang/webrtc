{
  "comments": [
    {
      "key": {
        "uuid": "2c5e0084_54f15754",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 270,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "Maybe this should be in api/video/BUILD.gn?",
      "range": {
        "startLine": 270,
        "startChar": 16,
        "endLine": 270,
        "endChar": 36
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1137e1e_a6609c64",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 270,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "Makes sense, but I think creation of api/video/BUILD should be a separate cl. Do you think it is important enough that I should do it soon?",
      "parentUuid": "2c5e0084_54f15754",
      "range": {
        "startLine": 270,
        "startChar": 16,
        "endLine": 270,
        "endChar": 36
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98c2f39e_bde4a020",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 270,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T11:08:20Z",
      "side": 1,
      "message": "Should it? The content would only be this target, right? Changeing it later would incur some extra work downstream right?",
      "parentUuid": "f1137e1e_a6609c64",
      "range": {
        "startLine": 270,
        "startChar": 16,
        "endLine": 270,
        "endChar": 36
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34078a3b_164e8795",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 270,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T11:35:04Z",
      "side": 1,
      "message": "For consistency, I think api/video/BUILD.gn, if it exists, should define *all* targets involving files in that subdirectory, i.e., also video_frame_api, video_frame_api_i420, encoded_frame_api, video_stream_decoder, and video_stream_decoder_create.\n\nAnd moving video_frame_api also involved moving videosinkinterface.h and videosourceinterface.h.\n\nSo it\u0027s a bit messy. But if we really want to move these things around, I think you\u0027re right that it\u0027s going to be more painful the longer we postpone it.",
      "parentUuid": "98c2f39e_bde4a020",
      "range": {
        "startLine": 270,
        "startChar": 16,
        "endLine": 270,
        "endChar": 36
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0888c4ea_36f03ffe",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 270,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T13:08:32Z",
      "side": 1,
      "message": "If you think it\u0027s better changing it later than having it inconsistent I guess it makes sense to not add the file with this CL.",
      "parentUuid": "34078a3b_164e8795",
      "range": {
        "startLine": 270,
        "startChar": 16,
        "endLine": 270,
        "endChar": 36
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74f464c8_e5782e39",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "Not needed.",
      "range": {
        "startLine": 278,
        "startChar": 5,
        "endLine": 278,
        "endChar": 12
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "895b49e9_2f1828ca",
        "filename": "api/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 278,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "74f464c8_e5782e39",
      "range": {
        "startLine": 278,
        "startChar": 5,
        "endLine": 278,
        "endChar": 12
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5c46b3c_748bb201",
        "filename": "api/DEPS",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "Seems regretful to add dependencies on non-api. Would it be possible to move the required dependencies in a preparation CL?",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 30,
        "endChar": 39
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1afcbcaa_bb5390a9",
        "filename": "api/DEPS",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "video_config.h could perhaps be moved here as is, it has a dependency on VideoCodec and related structs which is a bit ugly but nothing we can fix easily.\n\nvideo_send_stream.h is needed only for DegradationSettings, which also should be moved to api/, but preferably as a separat cl.\n\nI have no strong preference on the order we do these things.",
      "parentUuid": "b5c46b3c_748bb201",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 30,
        "endChar": 39
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec247979_53670b2d",
        "filename": "api/DEPS",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T13:08:32Z",
      "side": 1,
      "message": "As I see it, moving something to API is also inviting downstream projects to use anything exported by those headers. (If nothing else, because build systems will generally allow them to) Therefore it\u0027s preferable to avoid dependencies on things outside api, but rather move things to api in order of dependencies. In general it\u0027s also preferable to finish imminent refactoring work before, rather than after the move.\n\nThe opposite order is probably ok if the changes are close enough that downstream projects does not start depending on them, but I\u0027m not sure I can see any advantage to doing it that way. The risk is that the followup works takes longer than expected.",
      "parentUuid": "1afcbcaa_bb5390a9",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 30,
        "endChar": 39
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "736203ad_de3a31a5",
        "filename": "api/video/video_stream_encoder_interface.h",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "I think there should be a comment explaining the role and usage of the class here. From the perspective of API users.",
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4908eac3_1ccb8c21",
        "filename": "api/video/video_stream_encoder_interface.h",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "736203ad_de3a31a5",
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c76d26b_c31e0176",
        "filename": "api/video/video_stream_encoder_interface.h",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "Why isn\u0027t this part of the config?",
      "range": {
        "startLine": 81,
        "startChar": 6,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a06b1c88_afee418f",
        "filename": "api/video/video_stream_encoder_interface.h",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "Good question. Probably because the packet size originates from transport machinery, while VideoEncoderConfig originates in the codec negotiation. There\u0027s surely opportunities for cleanup.",
      "parentUuid": "0c76d26b_c31e0176",
      "range": {
        "startLine": 81,
        "startChar": 6,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f44b0556_7244bba9",
        "filename": "api/video/video_stream_encoder_interface.h",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T13:08:32Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a06b1c88_afee418f",
      "range": {
        "startLine": 81,
        "startChar": 6,
        "endLine": 81,
        "endChar": 29
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ea9c6d0_1a7ad194",
        "filename": "video/video_stream_encoder.h",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T08:41:41Z",
      "side": 1,
      "message": "I think it\u0027s good to make this more descriptive. Maybe it\u0027d make sense to add \"Video\" as well, to more clearly disambiguate with observers of BitrateAllocator? Or possibly SetLayerBitrateObserver since we are, afaik, talking about video layers here, and not just any video stream (It won\u0027t be used to allocate rate between camera capture and screen capture)\n\nMight make sense as a separate CL.",
      "range": {
        "startLine": 77,
        "startChar": 7,
        "endLine": 77,
        "endChar": 35
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bd2c39c_8db3f94f",
        "filename": "video/video_stream_encoder.h",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5234
      },
      "writtenOn": "2018-05-08T09:26:40Z",
      "side": 1,
      "message": "There\u0027s a brief comment for this method, in the interface class. Do you want to add more there?\n\nI could rename it to SetVideoBitrateAllocationObserver, to match the type name, but I think Video can be implied for all methods of this class, and the longer name is getting a bit unwieldy.",
      "parentUuid": "2ea9c6d0_1a7ad194",
      "range": {
        "startLine": 77,
        "startChar": 7,
        "endLine": 77,
        "endChar": 35
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51c5f621_b8efc3a8",
        "filename": "video/video_stream_encoder.h",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 5531
      },
      "writtenOn": "2018-05-08T11:08:20Z",
      "side": 1,
      "message": "The tricky part, I guess, is that a video send stream both observes the alloocated bitrate for it and delivers allocated bitrates. Where the former is a per stream bitrate distribution and the latter is a per video layer distribution. The fact that these two processes have such similar naming made me very confused when I first dealt with the code.\n\nFixing this seems a bit out of scope for this CL though, so marking as resolved.",
      "parentUuid": "2bd2c39c_8db3f94f",
      "range": {
        "startLine": 77,
        "startChar": 7,
        "endLine": 77,
        "endChar": 35
      },
      "revId": "cb5fca4e859acce50f367f877a582ce5ab95667e",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}