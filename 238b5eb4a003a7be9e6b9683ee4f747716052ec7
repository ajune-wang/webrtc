{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2013d2dd_f95e3d0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 8178
      },
      "writtenOn": "2024-02-12T10:24:50Z",
      "side": 1,
      "message": "I don\u0027t have much opinion or knowledge here. I can imagine some perf improvements can be made, but that seems out of scope. The camera capture framework would need a bit of work for that.",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "444ac496_b33bf9fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2024-02-12T13:22:18Z",
      "side": 1,
      "message": "Cameras are probably v4l2 cameras and even libcamera currently does not export any DMABufs that are actually GPU memory. So directly mmapping the buffers makes no difference.\n\nSo, right now, we\u0027re fine. But that will probably change in the future and it may be tricky to resolve:\nmmap for a GPU buffer can be really slow. That\u0027s why the desktop capture code imports the DMABuf as a texture and does a glReadPixels.\nBut doing that to a DMABuf from v4l2 is probably not a good idea either...",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f6c936fc_4936ef4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 8046
      },
      "writtenOn": "2024-02-12T13:41:56Z",
      "side": 1,
      "message": "This is not meant to make any difference (performance wise), but PipeWire doesn\u0027t support mmapping DMABufs, this is going to be added in the next release for V4L2 and libcamera DMABufs only, but still it would be good to support older (current) versions of PipeWire.",
      "parentUuid": "444ac496_b33bf9fd",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "820655ca_c947ce5e",
        "filename": "modules/video_capture/linux/video_capture_pipewire.cc",
        "patchSetId": 1
      },
      "lineNbr": 419,
      "author": {
        "id": 9816
      },
      "writtenOn": "2024-02-12T13:34:09Z",
      "side": 1,
      "message": "Doing the DMA_BUF_SYNC_START here and the DMA_BUF_SYNC_END in the ScopedBuf feels wrong to me. Why is this not part of the ScopedBuf::initialize()?",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df38f099_b6f76537",
        "filename": "modules/video_capture/linux/video_capture_pipewire.cc",
        "patchSetId": 1
      },
      "lineNbr": 419,
      "author": {
        "id": 8046
      },
      "writtenOn": "2024-02-12T13:41:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "820655ca_c947ce5e",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "927080c6_480650ec",
        "filename": "modules/video_capture/linux/video_capture_pipewire.cc",
        "patchSetId": 1
      },
      "lineNbr": 419,
      "author": {
        "id": 8046
      },
      "writtenOn": "2024-02-12T13:42:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "820655ca_c947ce5e",
      "revId": "238b5eb4a003a7be9e6b9683ee4f747716052ec7",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}