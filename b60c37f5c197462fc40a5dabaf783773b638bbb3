{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "47e12e19_84d29a29",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-07-04T15:03:40Z",
      "side": 1,
      "message": "LGTM % 1 comment",
      "revId": "b60c37f5c197462fc40a5dabaf783773b638bbb3",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b605f3c8_c32df91f",
        "filename": "video/rate_utilization_tracker.cc",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-07-04T15:03:40Z",
      "side": 1,
      "message": "Nit:\n\nI get the code now, but I find it slightly confusing that the window following the the last update is corrected in two steps, I think something like this could be easier to understand:\n\n    if (time \u003e data_points_.back().time) {\n      const RateUsageUpdate\u0026 last_update \u003d data_points_.back();\n      DataSize allocated_since_last_data_point \u003d\n          (time - last_update.time) * last_update.target_rate;\n      allocated_send_data_size +\u003d std::max(allocated_since_last_data_point, size_of_last_data)\n    }\n\nThen the extra update on line 108-115 could be removed.",
      "range": {
        "startLine": 105,
        "startChar": 0,
        "endLine": 105,
        "endChar": 68
      },
      "revId": "b60c37f5c197462fc40a5dabaf783773b638bbb3",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5438342_6f1f0e3b",
        "filename": "video/rate_utilization_tracker.cc",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 5524
      },
      "writtenOn": "2024-07-04T15:32:09Z",
      "side": 1,
      "message": "Sure, we still need to subtract the rate already accumulated for the last data point though. We can also actually remove this if-statement, it\u0027s fine to multiply by a zero-duration.",
      "parentUuid": "b605f3c8_c32df91f",
      "range": {
        "startLine": 105,
        "startChar": 0,
        "endLine": 105,
        "endChar": 68
      },
      "revId": "b60c37f5c197462fc40a5dabaf783773b638bbb3",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bb6d054_dee0dd22",
        "filename": "video/rate_utilization_tracker_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 5527
      },
      "writtenOn": "2024-07-04T15:03:40Z",
      "side": 1,
      "message": "Should be 0.02?",
      "range": {
        "startLine": 28,
        "startChar": 33,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "b60c37f5c197462fc40a5dabaf783773b638bbb3",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddd308c6_d7632d52",
        "filename": "video/rate_utilization_tracker_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 5524
      },
      "writtenOn": "2024-07-04T15:32:09Z",
      "side": 1,
      "message": "Ah, comment is wrong - code is correct.",
      "parentUuid": "3bb6d054_dee0dd22",
      "range": {
        "startLine": 28,
        "startChar": 33,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "b60c37f5c197462fc40a5dabaf783773b638bbb3",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}