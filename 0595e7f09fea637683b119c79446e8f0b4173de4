{
  "comments": [
    {
      "key": {
        "uuid": "a60feac2_3650610a",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 230,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-05-19T12:32:30Z",
      "side": 1,
      "message": "For more complex encoding structures we would need to generate more than just 4 frame to cover the whole structure, maybe 20 or 30 instead?",
      "range": {
        "startLine": 230,
        "startChar": 63,
        "endLine": 230,
        "endChar": 64
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f382dc02_d99c21a0",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 230,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-19T13:22:56Z",
      "side": 1,
      "message": "yep, may be 8 or 12 (looking at k-svc with 3 temporal layers and temporal shift).\nDo you have more complicated structure in mind?\n(note - these frames are temporal units, not layer frames)\n\nI can probably make it dynamic and keep encoding frames until there are at least... 3 frames for each decode target. Do you think dynamic number of frames would be better?",
      "parentUuid": "a60feac2_3650610a",
      "range": {
        "startLine": 230,
        "startChar": 63,
        "endLine": 230,
        "endChar": 64
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5b9216f_712c651e",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 230,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-05-19T13:50:04Z",
      "side": 1,
      "message": "\u003e yep, may be 8 or 12 (looking at k-svc with 3 temporal layers and temporal shift).\n\u003e Do you have more complicated structure in mind?\n\u003e (note - these frames are temporal units, not layer frames)\n\nAh, right, good point \n\n\u003e I can probably make it dynamic and keep encoding frames until there are at least... 3 frames for each decode target. Do you think dynamic number of frames would be better?\n\nDynamic sounds good",
      "parentUuid": "f382dc02_d99c21a0",
      "range": {
        "startLine": 230,
        "startChar": 63,
        "endLine": 230,
        "endChar": 64
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edb58691_9fdecc57",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 230,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-19T15:39:44Z",
      "side": 1,
      "message": "made it dynamic. (and name one of the iterator variables \u0027temporal_unit\u0027 to stress what kind of frames it counts).",
      "parentUuid": "f5b9216f_712c651e",
      "range": {
        "startLine": 230,
        "startChar": 63,
        "endLine": 230,
        "endChar": 64
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4223927_c5be4438",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 230,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-20T09:02:31Z",
      "side": 1,
      "message": "alternative approach is to make it part of the parameter.\n(I realised there are structures, like 8frame pattern for two or three temporal layers, where it is we might want to check full pattern rather than just a start of it. 3 frames per DT is bad guess there.)",
      "parentUuid": "edb58691_9fdecc57",
      "range": {
        "startLine": 230,
        "startChar": 63,
        "endLine": 230,
        "endChar": 64
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e061fdfc_fd3e86f8",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-05-19T12:32:30Z",
      "side": 1,
      "message": "Not sure this is true, maybe remove the comment?",
      "range": {
        "startLine": 241,
        "startChar": 0,
        "endLine": 243,
        "endChar": 19
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00b9a57c_17418666",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-19T13:22:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e061fdfc_fd3e86f8",
      "range": {
        "startLine": 241,
        "startChar": 0,
        "endLine": 243,
        "endChar": 19
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8817a41a_48dff4ba",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-05-19T12:32:30Z",
      "side": 1,
      "message": "Should we not expect specific frame_ids, or at least a certain number of frames decoded for a certain decode target? I think many tests could pass simply by a single keyframe being decoded.\n\nMaybe it\u0027s better to not parameterize, and have one test per encoding structure?\n\nAlso, we don\u0027t verify that the stream was correctly decoded either right, just that the decoder did not return an error?",
      "range": {
        "startLine": 257,
        "startChar": 47,
        "endLine": 257,
        "endChar": 61
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4942b174_26804dbe",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-19T13:22:56Z",
      "side": 1,
      "message": "It might be good idea to have different set of tests that validates encoding structure, in particular that it produces multiple frames for each decode targets.\n\nhere I moved the requested_ids outside the TestAv1Decoder to make it more visible how it is assembled. hope that make it easier to read the expectation.\nI\u0027ve also adjusted expectation there are at least 2 frames for each decode target.\n\nYes, There is no check stream was decoded correctly. This test trusts decoder would return an error if stream is not decodable. How to verify the decoded frames are correct?",
      "parentUuid": "8817a41a_48dff4ba",
      "range": {
        "startLine": 257,
        "startChar": 47,
        "endLine": 257,
        "endChar": 61
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf4c2388_2e894a7e",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-05-19T13:50:04Z",
      "side": 1,
      "message": "\u003e It might be good idea to have different set of tests that validates encoding structure, in particular that it produces multiple frames for each decode targets.\n\u003e \n\u003e here I moved the requested_ids outside the TestAv1Decoder to make it more visible how it is assembled. hope that make it easier to read the expectation.\n\nActually, I now realize that you checked that the requested \u003d\u003d decoded, so I don\u0027t think you need to change this.\n\n\u003e I\u0027ve also adjusted expectation there are at least 2 frames for each decode target.\n\nSGTM\n\n\u003e Yes, There is no check stream was decoded correctly. This test trusts decoder would return an error if stream is not decodable. How to verify the decoded frames are correct?\n\nI\u0027m almost certain the the decoder will not return an error even if we don\u0027t decode the frames correctly, it can probably only detect high level problems (like no keyframe before delta frame, incompatible resolutions and so on). I don\u0027t know really. One idea would be to use the PSNR calculator to compare the input and output, and then make sure it stays above a certain threshold.",
      "parentUuid": "4942b174_26804dbe",
      "range": {
        "startLine": 257,
        "startChar": 47,
        "endLine": 257,
        "endChar": 61
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a870a36_899b1773",
        "filename": "modules/video_coding/codecs/av1/libaom_av1_unittest.cc",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-05-19T15:39:44Z",
      "side": 1,
      "message": "adding psnr check seems noticable (and slightly unrelated) change, so I\u0027ve created a dedicated patch for it.",
      "parentUuid": "bf4c2388_2e894a7e",
      "range": {
        "startLine": 257,
        "startChar": 47,
        "endLine": 257,
        "endChar": 61
      },
      "revId": "0595e7f09fea637683b119c79446e8f0b4173de4",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}