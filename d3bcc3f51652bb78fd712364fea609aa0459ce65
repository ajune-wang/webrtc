{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6ba8fbc7_d5081ae1",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-03-30T13:01:29Z",
      "side": 1,
      "message": "Please move it to I210toI420. Hide the double conversion inside it. Eventually this will be optimized in libyuv.",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a57b9e7f_c9bcf4a9",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-04-22T13:11:38Z",
      "side": 1,
      "message": "There are no",
      "parentUuid": "6ba8fbc7_d5081ae1",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fffd897d_e57d3cc9",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-05-18T07:12:59Z",
      "side": 1,
      "message": "There is no direct conversion from i210 to i420 in libyuv, and we need to use an intermediate i010 buffer instead. \n\nI have added a ticket in libyuv https://bugs.chromium.org/p/libyuv/issues/detail?id\u003d931 to try to get one.\n\nI don\u0027t think than creating an webrtcI210toI420 method would be cleaner than just having the code conversion explicitly there as when the new method is available the code change would be just moving from\n\nrtc::scoped_refptr\u003cI010Buffer\u003e i010buffer \u003d I010Buffer::Create(width(), height());\n  libyuv::I210ToI010(DataY(), StrideY(), DataU(), StrideU(), DataV(), StrideV(),\n                     i010buffer-\u003eMutableDataY(), i010buffer-\u003eStrideY(),\n                     i010buffer-\u003eMutableDataU(), i010buffer-\u003eStrideU(),\n                     i010buffer-\u003eMutableDataV(), i010buffer-\u003eStrideV(), width(),\n                     height());\n  return i010buffer-\u003eToI420();\n  \n  \nto\n\nrtc::scoped_refptr\u003cI420Buffer\u003e i420buffer \u003d I420Buffer::Create(width(), height());\n  libyuv::I210ToI420(DataY(), StrideY(), DataU(), StrideU(), DataV(), StrideV(),\n                     i010buffer-\u003eMutableDataY(), i010buffer-\u003eStrideY(),\n                     i010buffer-\u003eMutableDataU(), i010buffer-\u003eStrideU(),\n                     i010buffer-\u003eMutableDataV(), i010buffer-\u003eStrideV(), width(),\n                     height());\n  return i42buffer;",
      "parentUuid": "a57b9e7f_c9bcf4a9",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51fc252b_01b0a5d9",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-05-18T09:07:20Z",
      "side": 1,
      "message": "I think adding a I210toI420 now in libyuv (even as a two-step process) and leaving a todo(crbug.com/p/libyuv/931) there is better, since the code in webrtc won\u0027t have to be changed after libyuv issue is fixed. Otherwise someone has to keep an eye on it and update the webrtc code later, which might get forgotten.\n\nThus, I\u0027m asking you to move the code to libyuv now, so that the remaining work would happen only in libyuv.",
      "parentUuid": "fffd897d_e57d3cc9",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c199956a_c4b1116c",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-05-18T09:37:02Z",
      "side": 1,
      "message": "We can\u0027t name the function as I210toI420 as we will have a compilation issue when that same function is added to libyuv (that already happened on the 422 patch), so we would have to name it webrtcI210toI420 or similar, which would still require someone to keep an eye to rename the function once it lands in libyuv.\n\nMoreover, if we want to make that change we should make the function available to common_video/video_frame_buffer.cc so we would have to make webrtcI210toI420 public as webrtc::I210toI420 and also add it to a header file.",
      "parentUuid": "51fc252b_01b0a5d9",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aced8788_c474b05f",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-05-18T09:41:46Z",
      "side": 1,
      "message": "Since there\u0027s no I210toI420 function in webrtc for now, you can just make a CL in libyuv with a TODO, wait for the libyuv roll into webrtc and then just use this function in this CL and land it.",
      "parentUuid": "c199956a_c4b1116c",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f900c48_6115e469",
        "filename": "api/video/i210_buffer.cc",
        "patchSetId": 4
      },
      "lineNbr": 269,
      "author": {
        "id": 5963
      },
      "writtenOn": "2022-05-18T10:02:29Z",
      "side": 1,
      "message": "oh, I see your point. \n\nI will do my best and try to create a CL to libyuv for that function. If it does get merged soon and lands in libwbertc, I will update this code to use it so we can merge it.\n\nHowever, if the libuv CL is stalled for any reason I will ask you in the following weeks to merge it as it is ;)",
      "parentUuid": "aced8788_c474b05f",
      "revId": "d3bcc3f51652bb78fd712364fea609aa0459ce65",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}