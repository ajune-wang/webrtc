{
  "comments": [
    {
      "key": {
        "uuid": "b2116b8d_a8483eb1",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 412,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T12:42:38Z",
      "side": 1,
      "message": "Seems like the code is run in periodic mode as well? Even if there\u0027s no change to the behavior in practice, it might make sense to add an if here?",
      "range": {
        "startLine": 412,
        "startChar": 4,
        "endLine": 412,
        "endChar": 36
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "007c1d77_908e4d41",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 412,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T12:42:38Z",
      "side": 1,
      "message": "I\u0027d expect that we will always wake up after the scheduled time (since the scheduler would typically guarantee that we wait for \u003e\u003d the target), unless you are subtracting something like 1 ms on the target?\n\nMaybe we could simply more or less assume that we \"are too late\"?",
      "range": {
        "startLine": 412,
        "startChar": 45,
        "endLine": 412,
        "endChar": 78
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3ead7a6_8de9015c",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 412,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T13:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b2116b8d_a8483eb1",
      "range": {
        "startLine": 412,
        "startChar": 4,
        "endLine": 412,
        "endChar": 36
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0617bbf5_9bfdd651",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 412,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T13:21:39Z",
      "side": 1,
      "message": "This seems to not be guaranteed. I\u0027ve seen tasks executed both early and late in practice.",
      "parentUuid": "007c1d77_908e4d41",
      "range": {
        "startLine": 412,
        "startChar": 45,
        "endLine": 412,
        "endChar": 78
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1051ae87_ea947b8a",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T12:42:38Z",
      "side": 1,
      "message": "How about:\nRTC_DCHECK_GT(scheduled_time, time_last_process_); (clock should be monotonically increasing)\ntarget_send_time \u003d std::max(scheduled_time, now);",
      "range": {
        "startLine": 414,
        "startChar": 1,
        "endLine": 415,
        "endChar": 29
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8248cfc1_95dbf309",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T13:21:39Z",
      "side": 1,
      "message": "We can\u0027t guarantee that ordering, there could be an unscheduled process call that updates time_last_process_ followed shortly afterwards by a slightly delayed scheduled task that should really have been executed first.",
      "parentUuid": "1051ae87_ea947b8a",
      "range": {
        "startLine": 414,
        "startChar": 1,
        "endLine": 415,
        "endChar": 29
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db5ef560_23d8e0dd",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T15:10:51Z",
      "side": 1,
      "message": "Would we in practice have done all the processing prepared for scheduled_time at that call then? If so, we should be able to simply return if that happens, right?\n\nif(scheduled_time \u003c time_last_process_)\n return;\n...",
      "parentUuid": "8248cfc1_95dbf309",
      "range": {
        "startLine": 414,
        "startChar": 1,
        "endLine": 415,
        "endChar": 29
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "181f52be_9333609c",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T15:42:39Z",
      "side": 1,
      "message": "Hm, yeah that should work. We will anyway always check for time to next process otherwise.",
      "parentUuid": "db5ef560_23d8e0dd",
      "range": {
        "startLine": 414,
        "startChar": 1,
        "endLine": 415,
        "endChar": 29
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a26ecb33_72f92bbb",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 416,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T12:42:38Z",
      "side": 1,
      "message": "grammar",
      "range": {
        "startLine": 416,
        "startChar": 25,
        "endLine": 416,
        "endChar": 44
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "209e3e60_34802687",
        "filename": "modules/pacing/pacing_controller.cc",
        "patchSetId": 3
      },
      "lineNbr": 416,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T13:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a26ecb33_72f92bbb",
      "range": {
        "startLine": 416,
        "startChar": 25,
        "endLine": 416,
        "endChar": 44
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3f5f544_f7670014",
        "filename": "modules/pacing/pacing_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 5531
      },
      "writtenOn": "2019-11-05T12:42:38Z",
      "side": 1,
      "message": "Thanks, now it\u0027s easy to follow, just add a comment here as well on what the modes mean.",
      "range": {
        "startLine": 47,
        "startChar": 2,
        "endLine": 47,
        "endChar": 49
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "550e3099_02382c0d",
        "filename": "modules/pacing/pacing_controller.h",
        "patchSetId": 3
      },
      "lineNbr": 47,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-05T13:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3f5f544_f7670014",
      "range": {
        "startLine": 47,
        "startChar": 2,
        "endLine": 47,
        "endChar": 49
      },
      "revId": "c5c1a946b54c2f5e8e5fe1cd6c7cae5de562f092",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}