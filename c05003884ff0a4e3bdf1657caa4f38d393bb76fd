{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "703ce199_83d2aee5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 5091
      },
      "writtenOn": "2023-02-01T13:14:59Z",
      "side": 1,
      "message": "I am trying to figure out the distribution of usage to compare DXGI and GDI since we today count them as equally common based on the fact that their occurrence is added when they start and both always start at the same time.\n\nI then turned to WebRTC.DesktopCapture.Win.DirectXCapturerFrameTime and WebRTC.DesktopCapture.Win.ScreenGDICapturerFrameTime for a better view but I am not able to find any traces of WebRTC.DesktopCapture.Win.ScreenGDICapturerFrameTime [1] which would mean that DXGI never fails.\n\nI am now adding this new UMA to check if that is really the case or not.\nUsing this new UMA should also give us support to derive the number of times we \nfall back to GDI.\n\n[1] https://screenshot.googleplex.com/3BeoGhNNkvG5jYB",
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01bd07e7_8cb9b9b0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 5091
      },
      "writtenOn": "2023-02-01T13:16:22Z",
      "side": 1,
      "message": "Plan to add XML parts once this change has been approved.",
      "parentUuid": "703ce199_83d2aee5",
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67340e23_ebaab28e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 18474
      },
      "writtenOn": "2023-02-01T18:50:41Z",
      "side": 1,
      "message": "It looks like WindowGDI isn\u0027t captured either. I think the issue is that histograms.xml[1] has them as \"ScreenGDI\" and \"WindowGDI\", but the code tries to log them as \"ScreenGdi\"[2] and \"WindowGdi\"[3] so they got omitted...\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:tools/metrics/histograms/metadata/web_rtc/histograms.xml;drc\u003d788950873060265b3be7c06b1c08c4700f8e6d40;l\u003d995\n\n[2]https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/modules/desktop_capture/win/screen_capturer_win_gdi.cc;drc\u003def5b21e6374a499c74827ee52958bc0a15a60b30;l\u003d104\n\n[3]https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/modules/desktop_capture/win/window_capturer_win_gdi.cc;drc\u003db1372f973adfcd7b279f819a98350142fc3f8556;l\u003d174\n\nI\u0027ll start a thread with the metrics folks. If you think there\u0027s value in this change still LMK; but it mostly looks fine.",
      "parentUuid": "01bd07e7_8cb9b9b0",
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c570463_5183626b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 5091
      },
      "writtenOn": "2023-02-02T10:06:31Z",
      "side": 1,
      "message": "Thanks for driving this change. That will give us a better view of the real usage of GDI and DXGI. Given that I expect DXGI to be the most common API, adding this extra level of stats makes sense imo. Will upload a corresponding Chrome CL today and link to this one as FYI.",
      "parentUuid": "67340e23_ebaab28e",
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e1271800_3c4c899d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 5091
      },
      "writtenOn": "2023-02-02T10:17:20Z",
      "side": 1,
      "message": "Verified existence and functionality manually by enabling screen sharing for a few seconds and then visit chrome://histograms/DirectXCapturerResult\n\n[1] https://screenshot.googleplex.com/AVQDkmN93tHC7HB",
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2981cc71_c3f7eff7",
        "filename": "modules/desktop_capture/win/screen_capturer_win_directx.cc",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 18474
      },
      "writtenOn": "2023-02-01T18:50:41Z",
      "side": 1,
      "message": "This needs a comment that it\u0027s persisted to logs and that values shouldn\u0027t be re-used/re-ordered.",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 32
      },
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "268e54f0_61cb9603",
        "filename": "modules/desktop_capture/win/screen_capturer_win_directx.cc",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 5091
      },
      "writtenOn": "2023-02-02T10:06:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2981cc71_c3f7eff7",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 32
      },
      "revId": "c05003884ff0a4e3bdf1657caa4f38d393bb76fd",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}