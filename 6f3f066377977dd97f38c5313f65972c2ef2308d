{
  "comments": [
    {
      "key": {
        "uuid": "ccb4baf0_f569e18b",
        "filename": "media/engine/webrtcvideoengine_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 569,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-05T08:40:27Z",
      "side": 1,
      "message": "Should we add tests for other profiles then?",
      "range": {
        "startLine": 569,
        "startChar": 11,
        "endLine": 569,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68a84b7a_9ae81cc2",
        "filename": "media/engine/webrtcvideoengine_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 569,
      "author": {
        "id": 5098
      },
      "writtenOn": "2017-10-05T11:13:59Z",
      "side": 1,
      "message": "It depends on what we want to test. I would be more happy if the videoengine and the tests didn\u0027t have any codec specific knowledge (I know this is far from the case today) and we could use codec names like \"foo\" instead. I\u0027m trying to rip out the internal SW codecs so soon we won\u0027t have any internal support for H264, and then we can remove a lot of stuff from here.",
      "parentUuid": "ccb4baf0_f569e18b",
      "range": {
        "startLine": 569,
        "startChar": 11,
        "endLine": 569,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1cfec02_f434a6f0",
        "filename": "media/engine/webrtcvideoengine_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 569,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-05T11:47:01Z",
      "side": 1,
      "message": "If we can reduce VideoEngine\u0027s knowledge of codecs to the SDP codec name alone, that would be nice. But is it possible, since different H.264 profiles (signaled as the \u0027profile-level-id\u0027 fmtp param but same SDP codec name) are essentially different codecs?\n\nAbout adding tests: I was thinking of tests that check the negotiation of different H.264 profiles. But maybe that exists somewhere else?",
      "parentUuid": "68a84b7a_9ae81cc2",
      "range": {
        "startLine": 569,
        "startChar": 11,
        "endLine": 569,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94e7d028_dcec877b",
        "filename": "media/engine/webrtcvideoengine_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 569,
      "author": {
        "id": 5098
      },
      "writtenOn": "2017-10-06T10:55:22Z",
      "side": 1,
      "message": "The code for negotiating codecs is in mediasession with corresponding tests in mediasession_unittest.cc. Taylor filed an issue for adding tests for H264 profiles here: https://bugs.chromium.org/p/webrtc/issues/detail?id\u003d8345. We also have some related tests in h264/profile_level_id_unittest.cc that I added a while back.",
      "parentUuid": "f1cfec02_f434a6f0",
      "range": {
        "startLine": 569,
        "startChar": 11,
        "endLine": 569,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5bc040fb_909836e3",
        "filename": "media/engine/webrtcvideoengine_unittest.cc",
        "patchSetId": 3
      },
      "lineNbr": 569,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-06T12:09:15Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "94e7d028_dcec877b",
      "range": {
        "startLine": 569,
        "startChar": 11,
        "endLine": 569,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc39c9f4_8340e1e9",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-05T08:40:27Z",
      "side": 1,
      "message": "So CBP is a true subset of all other profiles here?",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd1bfbf5_0a94f578",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5098
      },
      "writtenOn": "2017-10-05T11:13:59Z",
      "side": 1,
      "message": "Yes. I read the H264 spec from https://www.itu.int/rec/T-REC-H.264-201704-I/en.\n\nThe main points are this:\nConformance of a bitstream to the Constrained Baseline profile is indicated by profile_idc being equal to 66 with constraint_set1_flag being equal to 1.\n\nAnd then for the other profiles (e.g. High) it says:\nDecoders conforming to the High profile at a specific level shall be capable of decoding all bitstreams in which either or both of the following conditions are true:\n * (profile_idc is equal to 77 or constraint_set1_flag is equal to 1) and the combination of level_idc and constraint_set3_flag represent a level less than or equal to the specified level,\n * profile_idc is equal to 100 and level_idc represents a level less than or equal to the specified level.\n\nThe key here is constraint_set1_flag for CBP and decoders conforming to some of the higher profiles are required to be able to decode these bitstreams.\n\nI reduced the number of profiles I added, because we are kind of running out of payload types... Supporting High and Baseline is the most critical for now. We can consider adding more profiles in the future.",
      "parentUuid": "fc39c9f4_8340e1e9",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0403878e_bfc31246",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-05T11:47:01Z",
      "side": 1,
      "message": "Ok, sounds good.\n\nDid you mean to upload a patch set with fewer profiles here?",
      "parentUuid": "fd1bfbf5_0a94f578",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c0142e5_a7ed5164",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5098
      },
      "writtenOn": "2017-10-06T10:55:22Z",
      "side": 1,
      "message": "Yes, the latest patch set only contains High, Constrained Baseline, and Baseline.",
      "parentUuid": "0403878e_bfc31246",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf15d528_470cea10",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-06T12:09:15Z",
      "side": 1,
      "message": "Right, I didn\u0027t realize that there was a never PS available.",
      "parentUuid": "6c0142e5_a7ed5164",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0966d34e_c4419ac6",
        "filename": "modules/video_coding/codecs/h264/h264.cc",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 5023
      },
      "writtenOn": "2017-10-06T12:09:32Z",
      "side": 1,
      "message": "*newer",
      "parentUuid": "bf15d528_470cea10",
      "range": {
        "startLine": 66,
        "startChar": 5,
        "endLine": 66,
        "endChar": 51
      },
      "revId": "6f3f066377977dd97f38c5313f65972c2ef2308d",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}