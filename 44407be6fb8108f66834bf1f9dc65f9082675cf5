{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6b4617f8_be4524d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 19549
      },
      "writtenOn": "2022-11-14T07:07:37Z",
      "side": 1,
      "message": "still pondering where the right test for this should live, so far I have only demonstrated no change in behavior.\n\nSimilar to TestSimulcastEncoderAdapterFake.ActivatesCorrectStreamsInInitEncode maybe?",
      "revId": "44407be6fb8108f66834bf1f9dc65f9082675cf5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7385faef_8b29e071",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 19549
      },
      "writtenOn": "2022-11-14T07:07:37Z",
      "side": 1,
      "message": "the stream_frame_types.size() \u003d\u003d 1 here was required or some tests started crashing with out of bounds. Which seems a bit like those tests are not set up correctly? See https://webrtc-review.googlesource.com/c/src/+/281002?checksPatchset\u003d1\u0026tab\u003dchecks",
      "revId": "44407be6fb8108f66834bf1f9dc65f9082675cf5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6ef0d8d_866dc79a",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-11-14T09:55:55Z",
      "side": 1,
      "message": "Weird... For this to have any effect, the stream_frame_types should have size 1.\nSo |total_streams_count_| should be 1, yet it\u0027s not a bypass mode somehow?\n\nI can only guess that it\u0027s happening because the simulcast bitrate isn\u0027t set up correctly here [1]\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/media/engine/simulcast_encoder_adapter.cc;l\u003d70;drc\u003d26f382174adc04c0d92e7dff24c6aed5d5e0246b\n\nCould you instead try to set some bitrate in the tests?\n\nAlso, please additional hardening below: In addition to checking that |layer.stream_idx()| fits in the |frame_types|, check that it fits in |stream_frame_types| in the code below.",
      "parentUuid": "7385faef_8b29e071",
      "revId": "44407be6fb8108f66834bf1f9dc65f9082675cf5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b9cb2d2_98642511",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 2
      },
      "lineNbr": 473,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-11-14T09:55:55Z",
      "side": 1,
      "message": "Why though? If we just pass frame_types as is to the encode (presumably libvpx, if there\u0027s more than one stream), would it not handle it correctly?",
      "range": {
        "startLine": 472,
        "startChar": 9,
        "endLine": 473,
        "endChar": 41
      },
      "revId": "44407be6fb8108f66834bf1f9dc65f9082675cf5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d459a7ff_e9d52b96",
        "filename": "media/engine/simulcast_encoder_adapter.cc",
        "patchSetId": 2
      },
      "lineNbr": 494,
      "author": {
        "id": 5117
      },
      "writtenOn": "2022-11-14T09:55:55Z",
      "side": 1,
      "message": "What layer is \"new\"? Shouldn\u0027t it be \"when requesting keyframe on any layer\" instead?",
      "range": {
        "startLine": 494,
        "startChar": 35,
        "endLine": 494,
        "endChar": 44
      },
      "revId": "44407be6fb8108f66834bf1f9dc65f9082675cf5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}