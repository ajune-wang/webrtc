{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c63e0444_6c7fc49b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-12T14:52:06Z",
      "side": 1,
      "message": "When does OnRenderedFrame happen? Before handing the frame off (i.e. before buffering by the sink) or after rendering has actually happened (in which case is this before or after vsync) etc?\n\nIf the delay is aggregated later than framesDecoded, then we can no longer perform the calculations in https://w3c.github.io/webrtc-stats/#dom-rtcinboundrtpstreamstats-totalinterframedelay.\n\nDo we need to add framesRendered counters too?\n\nLet\u0027s wait before landing",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1a67da9_b5d4ca69",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5825
      },
      "writtenOn": "2022-12-13T09:40:23Z",
      "side": 1,
      "message": "OnRenderedFrame is supposed to be called after frame is passed to renderer (where it is rendered or not is up to renderer implementation; on practice frame is queued after rendered with some delay).\n\nIdeally, yes, we need framesRendered counter. On practice framesRendered should not be too off from framesDecoded and the error in variance should be insignificant when number of frames is large enough.",
      "parentUuid": "c63e0444_6c7fc49b",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdc4a6e3_1303b19e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-13T09:52:34Z",
      "side": 1,
      "message": "In practise, apps poll at 1 Hz and do \"delta x / delta y\", and this error will always be present.\n\nWe could add framesRendered counters and inter-frame delay for rendering, perhaps as new metrics.\n\nInitial implementation could measure at hand-off-to-render-pipeline, but a correct implementation would be to move it to some feedback from the rendering. In case of renderer dropping frames, framesRendered could be less than framesDecoded too just to make things more complicated. But for this case I think we mostly care about timing.\n\nI\u0027m OK with doing an imperfect implementation, but I am starting to think we should do this as new metrics rather than break decode harmonic frame rate which is already standardized and implemented correctly.",
      "parentUuid": "b1a67da9_b5d4ca69",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "617ab6b1_68474780",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-13T09:54:18Z",
      "side": 1,
      "message": "+Harald, thoughts?",
      "parentUuid": "bdc4a6e3_1303b19e",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "547fee2e_67728861",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-13T10:03:00Z",
      "side": 1,
      "message": "Actually considering the pause metrics already talk about render, I think we can update the impl+spec to say render time regarding these metrics as well, which would be easier than to introduce more inter-delay metrics.\n\nMy concern with \"render\" is \"what if multiple sinks?\" but since there is already exists metrics for this I think we can easily make this work by just saying we are aligning the two metrics.\n\nYour initial proposal is making sense to me now.",
      "parentUuid": "617ab6b1_68474780",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "911187bd_96a94255",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-13T10:12:16Z",
      "side": 1,
      "message": "Had a chat, I think we are in agreement. I\u0027ll make a PR on the spec so we can unblock this CL and a CL to add framesRendered to avoid the out of sync issue",
      "parentUuid": "547fee2e_67728861",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3a55304_d6ebc6a1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-13T10:55:47Z",
      "side": 1,
      "message": "See https://github.com/w3c/webrtc-stats/pull/717",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0474201_ff862032",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 5825
      },
      "writtenOn": "2022-12-16T09:48:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3a55304_d6ebc6a1",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18f6b9cf_98b15c3f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2022-12-16T09:43:53Z",
      "side": 1,
      "message": "Approving after checking with hbos that landing before FramesRendered exists is OK.",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d5b92e9_27e969bd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5142
      },
      "writtenOn": "2022-12-16T09:45:57Z",
      "side": 1,
      "message": "Landing before framesRendered is OK with me",
      "revId": "c7d26e6c95b8b5237c7025685070587d50b4b033",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}