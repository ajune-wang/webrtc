{
  "comments": [
    {
      "key": {
        "uuid": "1e8d3de6_9408325c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T14:43:20Z",
      "side": 1,
      "message": "I\u0027m considering that may be ScalabilityStructureFullSvc class that supports any number of spatial and up to 3 temporal layers layers would be easier to support long term. Sketching a structure with both temporal and spatial scalability is a step towards understanding how more general code would look like.\n\ndo you find this step helpful, or do you think I should jump directly to generic FullSvc scalability structure?",
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c46eff6_e39ce0a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "LG, just some comments about style",
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b2e2231_cb7af53f",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "Clearer if you just remove these comments I think.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 30,
        "endChar": 19
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7938e22d_d9e37aed",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "right, I forgot I\u0027ve restored the comments on each line.",
      "parentUuid": "1b2e2231_cb7af53f",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 30,
        "endChar": 19
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e714bfbc_c84ae087",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "Maybe:\n  if (sid \u003e 1) {\n    ...\n  }\n\nand remove use_spatial_dependency",
      "range": {
        "startLine": 105,
        "startChar": 12,
        "endLine": 105,
        "endChar": 34
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e59cceb2_71a19d48",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 105,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "removed use_spatial_dependency boolean. \nI guess that is better because condition is actually different.",
      "parentUuid": "e714bfbc_c84ae087",
      "range": {
        "startLine": 105,
        "startChar": 12,
        "endLine": 105,
        "endChar": 34
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6315ddb0_ed4ca2ef",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "Maybe:\n  if (ActiveDecodeTarget(/*sid\u003d*/0, /*tid\u003d*/1) || ActiveDecodeTarget(/*sid\u003d*/1, /*tid\u003d*/1) {\n    next_pattern_ \u003d kDeltaT1;\n  }\n\nand remove the if case on line 77.",
      "range": {
        "startLine": 115,
        "startChar": 6,
        "endLine": 115,
        "endChar": 30
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fdf9b91_fa089b47",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "that will miss the case where active decode targets change right after T0 frame is produced.\nspecially if T1 is deactivated.\n\n(Do you think I should add a unit tests with edge cases like that one?)",
      "parentUuid": "6315ddb0_ed4ca2ef",
      "range": {
        "startLine": 115,
        "startChar": 6,
        "endLine": 115,
        "endChar": 30
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07bf830a_0fd5df20",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-02T08:44:15Z",
      "side": 1,
      "message": "Right, please add\n\n  // Check if T0 was disabled in between between calls to NextFrameConfig\n\nor something like that to line 77",
      "parentUuid": "3fdf9b91_fa089b47",
      "range": {
        "startLine": 115,
        "startChar": 6,
        "endLine": 115,
        "endChar": 30
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e34c4d8_e1f11843",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-02T10:04:04Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "07bf830a_0fd5df20",
      "range": {
        "startLine": 115,
        "startChar": 6,
        "endLine": 115,
        "endChar": 30
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "020419a2_007e46c8",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 177,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "/*tid\u003d*/",
      "range": {
        "startLine": 177,
        "startChar": 54,
        "endLine": 177,
        "endChar": 55
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee12e455_613eb333",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.cc",
        "patchSetId": 2
      },
      "lineNbr": 177,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "020419a2_007e46c8",
      "range": {
        "startLine": 177,
        "startChar": 54,
        "endLine": 177,
        "endChar": 55
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab207e3a_ee573346",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "WDYT about replacing these with an enum:\n\n  enum DecodeTarget {\n    S0T0,\n    S0T1,\n    S1T0,\n    S1T1,\n  };\n\nThen you can simply do |ActiveDecodeTarget(S0T0)| or |.Reference(BufferIndex(S0T0))| and stuff like that.",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 58,
        "endChar": 3
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3414926_76dcf7b5",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "I did consider that, but there are few places where I pass variable rather than constant. Enum doesn\u0027t work in that case (or looks less nice and wouldn\u0027t scale to 3 layers)",
      "parentUuid": "ab207e3a_ee573346",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 58,
        "endChar": 3
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89f33987_61bcdc32",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-02T08:44:15Z",
      "side": 1,
      "message": "Do we aim to make this generic to any LXTX (for reasonable big Xs)?",
      "parentUuid": "d3414926_76dcf7b5",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 58,
        "endChar": 3
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd6ba0a3_6163f2ee",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-02T10:04:04Z",
      "side": 1,
      "message": "This code looks repeatitive, so yes, I would like to put repeating part into base class. It seems it would work for any number of spatial layers and up to 3 temporal layers.\nMay be it would work for K-SVC and S-mode similarly too, but I haven\u0027t thought about it yet.",
      "parentUuid": "89f33987_61bcdc32",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 58,
        "endChar": 3
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9977f468_428e0380",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "DecodeTargetActive\n\nMaybe return a std::bitset::reference, or maybe add a SetActiveDecodeTarget function as well?\n\nI don\u0027t feel strongly about it, but it is a little weird to have a getter but not setter.",
      "range": {
        "startLine": 59,
        "startChar": 7,
        "endLine": 59,
        "endChar": 25
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c220bc81_b00d763e",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "there are multiple places where I read it, but single place where I write it.\nAdded a setter instead of DecodeTargetIndex function. looks nicer.\n\nalso slightly renamed getter and setter",
      "parentUuid": "9977f468_428e0380",
      "range": {
        "startLine": 59,
        "startChar": 7,
        "endLine": 59,
        "endChar": 25
      },
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f4b8511_0fee8707",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 5527
      },
      "writtenOn": "2020-10-01T16:05:48Z",
      "side": 1,
      "message": "_",
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3968b66_895e7f6a",
        "filename": "modules/video_coding/codecs/av1/scalability_structure_l2t2.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 5019
      },
      "writtenOn": "2020-10-01T16:46:58Z",
      "side": 1,
      "message": "oops",
      "parentUuid": "2f4b8511_0fee8707",
      "revId": "d3777b58d292df3f7c8b98bb5e3869095fc468fe",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}