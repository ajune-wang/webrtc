{
  "comments": [
    {
      "key": {
        "uuid": "cda3e33b_758913f6",
        "filename": "api/test/videoprocessor_integrationtest_fixture.h",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "Stats and TestConfig should be part of the API as well, or the parts we need in the test fixture broken out and included in both places. The goal is that things in api/ only depend on things in api/.\n\n(But it is fine to me if you want to fix it in a follow-up.)",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "096bd42f_432478e2",
        "filename": "api/test/videoprocessor_integrationtest_fixture.h",
        "patchSetId": 6
      },
      "lineNbr": 72,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "An interface shouldn\u0027t contain state. Also, exposing the config like this provides the client/implementation with no guarantee about how it is used. What happens if the config state is changed midway through the test? What changes to the config are acceptable? -\u003e Test matrix explosion.\n\nCan the config go in the Create() method(s)?\nCan we add a GetStats() on the interface, or even better, return the stats from ProcessFramesAnd...()?",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5ea077d_e1fefc7a",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest.cc",
        "patchSetId": 6
      },
      "lineNbr": 122,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "Why is this changed? If you changed it to kConfig that\u0027d to my knowledge be inline with the C++ style guide (https://google.github.io/styleguide/cppguide.html). Personally I\u0027d have just kept the trailing \u0027_\u0027. Please educate me!",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a846e184_525a91ec",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest.h",
        "patchSetId": 6
      },
      "lineNbr": 52,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "decoder_factory",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aacc775d_2c31cc1c",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-04-27T08:46:30Z",
      "side": 1,
      "message": "I\u0027d get rid of this fixture, do TEST_F -\u003e TEST and just make a function CreateLibvpxIntegrationTestFixture() that does the work currently in the constructor. PrintRdPerf can similarly just be a plain function. That won\u0027t amount to a major difference, but it doesn\u0027t mix the inheritance-based style with the independent fixture style:\n\nTEST(VideoProcessorIntegrationTestLibvpx, HighBitrateVp9) {\n  auto fixture \u003d CreateLibvpxIntegrationTestFixture();\n  \n  fixture-\u003econfig.SetCodecSettings(...);\n  fixture-\u003eProcessFramesAndMaybeVerify(...):\n}",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 40,
        "endChar": 66
      },
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56c8d184_3e1a4c32",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 5520
      },
      "writtenOn": "2018-04-27T11:03:19Z",
      "side": 1,
      "message": "The reasoning here was basically keeping the diff as small as possible. We could certainly go the route mentioned but I don\u0027t see a clear benefit - other than hygiene.",
      "parentUuid": "aacc775d_2c31cc1c",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 40,
        "endChar": 66
      },
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1bc8f310_57c5e29d",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-04-27T12:21:46Z",
      "side": 1,
      "message": "Keeping CLs small SGTM, but please do a follow up CL after this one. I think that will save future maintainers some confusing.",
      "parentUuid": "56c8d184_3e1a4c32",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 40,
        "endChar": 66
      },
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f713cb6_2c3aea35",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 43,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "If the config was sent to the create method above, the encoder and decoder factories could go there as well. Plus there would be no ambiguity about the state.",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f111b43c_75b9fdae",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 104,
      "author": {
        "id": 5027
      },
      "writtenOn": "2018-04-27T08:46:30Z",
      "side": 1,
      "message": "This arguably breaks the law of Demeter, which is unfortunate. This means the test is highly coupled to the config and its place within fixture_. You could put SetCodecSettings into the fixture base class and make it forward to the config\u0027s SetCodecSettings, but that comes with the cost of duplicating the parameter list. There\u0027s also a bunch of other things we want to do with the config, and we can\u0027t create proxy methods for all of those in the fixture. You could also make an accessor that returns a pointer to config which gives you some flexibility, but I doubt that kind of flexibility will help us.\n\nI think it\u0027s OK to keep things as is and keep it simple, at least if the config changes relatively infrequently. It will be painful to rename or remove fields in the config since it will break both tests here and downstream, but it doesn\u0027t help if we layer proxy methods on top of it.",
      "range": {
        "startLine": 104,
        "startChar": 2,
        "endLine": 104,
        "endChar": 35
      },
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7a1ca20_668e1b16",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_libvpx.cc",
        "patchSetId": 6
      },
      "lineNbr": 104,
      "author": {
        "id": 5520
      },
      "writtenOn": "2018-04-27T11:03:19Z",
      "side": 1,
      "message": "Agreed. We should really move the TestConfig stuff to api/test, to make it explicit that there are downstream deps on it.\n\nI would like to keep it like this for now, but I\u0027m prepared to revisit this if we do have to change the config sometime.",
      "parentUuid": "f111b43c_75b9fdae",
      "range": {
        "startLine": 104,
        "startChar": 2,
        "endLine": 104,
        "endChar": 35
      },
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db90a11c_879bcc78",
        "filename": "modules/video_coding/codecs/test/videoprocessor_integrationtest_mediacodec.cc",
        "patchSetId": 6
      },
      "lineNbr": 31,
      "author": {
        "id": 5077
      },
      "writtenOn": "2018-05-02T09:01:14Z",
      "side": 1,
      "message": "This test fixture could be removed and replaced with a function which provides a default test config for these tests, then each TEST_F is changed to a TEST and calls the function + Create...() to set up the VideoProcessorIntegrationTestFixture.\n\nThat would be easier to follow IMO.",
      "revId": "83fd5328fb3d9fb29002cbc2897b7e3eb120d90a",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}