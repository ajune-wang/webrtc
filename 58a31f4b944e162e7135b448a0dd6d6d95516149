{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2ee78422_4bc594ba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-02-07T16:14:31Z",
      "side": 1,
      "message": "PTAL. Cleanup triggered by reported use-after-free crashes related to BasicNetworkManager::UpdateNetworksContinually.",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1117412_55967bb6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5508
      },
      "writtenOn": "2022-02-08T08:02:19Z",
      "side": 1,
      "message": "This is definitely an improvement. A couple of questions before landing. We could decide that these things are not worth it, do it as part of this CL or as a follow up.",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cff9db26_0be67661",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5613
      },
      "writtenOn": "2022-02-08T08:07:39Z",
      "side": 1,
      "message": "not expert in this area (webrtc task queue details), but LGTM",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "72fea296_b5de4b88",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 532,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-02-07T16:14:31Z",
      "side": 1,
      "message": "Alternatively, could RTC_CHECK that task_safety_flag_ is null here, and start_count_ \u003d\u003d 0, if it is required that StopUpdating as called before the object is destroyed. That\u0027s not clearly documented, but I note that it seems StopNetworkMonitor is never called if the object is destroyed without StopUpdating.",
      "range": {
        "startLine": 530,
        "startChar": 0,
        "endLine": 532,
        "endChar": 3
      },
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a793e90_59261c6b",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 532,
      "author": {
        "id": 5508
      },
      "writtenOn": "2022-02-08T08:02:19Z",
      "side": 1,
      "message": "Is using ScopedTaskSafety not an option?",
      "parentUuid": "72fea296_b5de4b88",
      "range": {
        "startLine": 530,
        "startChar": 0,
        "endLine": 532,
        "endChar": 3
      },
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31dec2c5_349b11af",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 532,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-02-08T09:03:34Z",
      "side": 1,
      "message": "No, since the main place where we set the flag to NotAlive is in StopUpdating, not in the destructor.",
      "parentUuid": "8a793e90_59261c6b",
      "range": {
        "startLine": 530,
        "startChar": 0,
        "endLine": 532,
        "endChar": 3
      },
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53fa2ae2_3df92c24",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 925,
      "author": {
        "id": 5508
      },
      "writtenOn": "2022-02-08T08:02:19Z",
      "side": 1,
      "message": "ah, I guess that if we used ScopedTaskSafety, then we\u0027d need some sort of a Reset() method that would do this (i.e. mark the current flag as not alive and create a new one)?",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bbcdf5bd_6f9ce9d0",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 925,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-02-08T09:03:34Z",
      "side": 1,
      "message": "Exactly. Unclear if we really support Start/Stop/Start/Stop, but I try to support that, by creating a new flag for each Start/Stop segment.",
      "parentUuid": "53fa2ae2_3df92c24",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83569749_a29cc889",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 1029,
      "author": {
        "id": 5508
      },
      "writtenOn": "2022-02-08T08:02:19Z",
      "side": 1,
      "message": "Would it make sense to use RepeatingTaskHandle?",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5327a65_b0005868",
        "filename": "rtc_base/network.cc",
        "patchSetId": 2
      },
      "lineNbr": 1029,
      "author": {
        "id": 5234
      },
      "writtenOn": "2022-02-08T09:03:34Z",
      "side": 1,
      "message": "Sounds reasonable, but I prefer to not do that in this cl.",
      "parentUuid": "83569749_a29cc889",
      "revId": "58a31f4b944e162e7135b448a0dd6d6d95516149",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}