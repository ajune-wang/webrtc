{
  "comments": [
    {
      "key": {
        "uuid": "52323da0_3376590b",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 24,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "nit: Isn\u0027t this too long update period for stats like OldestPacketWaitTime?",
      "range": {
        "startLine": 24,
        "startChar": 68,
        "endLine": 24,
        "endChar": 70
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "312336f8_1c200049",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 24,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "I think we only trigger on this oldest packet and expected queue time being very long, so shuold be fine. It\u0027s really only used when there\u0027s not calls going to ProcessPackets() that this will be used.",
      "parentUuid": "52323da0_3376590b",
      "range": {
        "startLine": 24,
        "startChar": 68,
        "endLine": 24,
        "endChar": 70
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5387b7b1_c3f7b042",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 117,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "Should this check for is_shutdown?",
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91971b0f_e097c502",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 117,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "It doesn\u0027t really need to. As long as we don\u0027t post new tasks from _within_ a task then we\u0027re fine.",
      "parentUuid": "5387b7b1_c3f7b042",
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09eec0c8_0c8999ef",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 162,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "How will the queue drain if nothing is processed?",
      "range": {
        "startLine": 162,
        "startChar": 4,
        "endLine": 162,
        "endChar": 10
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cf7df5d_c28b1993",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 162,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "If by queue you mean the packet queue, then it doesn\u0027t actually need to drain after shutdown. Me just need to drain the pending tasks from the task queue and then we can destroy both this class and the packet queue.",
      "parentUuid": "09eec0c8_0c8999ef",
      "range": {
        "startLine": 162,
        "startChar": 4,
        "endLine": 162,
        "endChar": 10
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78ed4132_40f856f9",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 167,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "no?",
      "range": {
        "startLine": 167,
        "startChar": 5,
        "endLine": 167,
        "endChar": 8
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "008f9d03_82b20a39",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 167,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "78ed4132_40f856f9",
      "range": {
        "startLine": 167,
        "startChar": 5,
        "endLine": 167,
        "endChar": 8
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7e750b02_8d8bc900",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 200,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "Note, this can still schedule a task arbitrary close to an already scheduled at next_process_time.\ne.g. kMinSleepTime\u003d0.1, now\u003d0.89, next_process_time\u003d0.891 next_process_time_\u003d1.0\n\nIt seems that there still is some limit to how often tasks are scheduled, but please consider to add an extra check here to not schedule a task too close to already existing one.",
      "range": {
        "startLine": 200,
        "startChar": 13,
        "endLine": 200,
        "endChar": 23
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78c923e5_3035dd3c",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 200,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "Not sure what you mean, that\u0027s exactly what the check on L196 does..? We don\u0027t allow scheduling a new within kMinSleepTime from an existing one.",
      "parentUuid": "7e750b02_8d8bc900",
      "range": {
        "startLine": 200,
        "startChar": 13,
        "endLine": 200,
        "endChar": 23
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78a2cbe4_f08297d4",
        "filename": "modules/pacing/task_queue_paced_sender.cc",
        "patchSetId": 32
      },
      "lineNbr": 200,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T14:37:41Z",
      "side": 1,
      "message": "The problem I see is that next_process_time might be now+0.000001ms (theoretically).\nThen this calculation here will add at least kMinSleepTime. Thus we might schedule something arbitrary close to the next process time.\n\nYou should maybe adjust next_process_time to now + sleep_time before checks at L196",
      "parentUuid": "78c923e5_3035dd3c",
      "range": {
        "startLine": 200,
        "startChar": 13,
        "endLine": 200,
        "endChar": 23
      },
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcd2c594_f6442278",
        "filename": "modules/pacing/task_queue_paced_sender_unittest.cc",
        "patchSetId": 32
      },
      "lineNbr": 168,
      "author": {
        "id": 5117
      },
      "writtenOn": "2019-11-26T11:07:00Z",
      "side": 1,
      "message": "ASSERT_TRUE(third_packet_time.IsFinite());",
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "add61dce_73df5f61",
        "filename": "modules/pacing/task_queue_paced_sender_unittest.cc",
        "patchSetId": 32
      },
      "lineNbr": 168,
      "author": {
        "id": 5524
      },
      "writtenOn": "2019-11-26T12:15:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcd2c594_f6442278",
      "revId": "e8e72bf4dbb620210f48a660f8f5c2f05ef74bd1",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": false
    }
  ]
}