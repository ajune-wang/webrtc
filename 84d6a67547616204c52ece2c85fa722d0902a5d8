{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b1b616fd_1c9f7602",
        "filename": "video/alignment_adjuster.cc",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 5492
      },
      "writtenOn": "2021-09-02T13:47:49Z",
      "side": 1,
      "message": "If the requested alignment is not needed on all layers, shouldnâ€™t apply_alignment_to_all_simulcast_layers just be set to false?",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "84d6a67547616204c52ece2c85fa722d0902a5d8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9dce8798_6503795e",
        "filename": "video/alignment_adjuster.cc",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 18194
      },
      "writtenOn": "2021-09-03T06:32:37Z",
      "side": 1,
      "message": "We\u0027ve reached this line because |apply_alignment_to_all_simulcast_layers| was true.\n\nHowever, after the if statement, the function just returns with the original |requested_alignment| and bypasses all the adjustments on scaling factors. \n\nI\u0027m wondering if you just want to modify the  |apply_alignment_to_all_simulcast_layers| to false since we don\u0027t go further to apply alignment to all the layers.\n\nAm I right?",
      "parentUuid": "b1b616fd_1c9f7602",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "84d6a67547616204c52ece2c85fa722d0902a5d8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f452da5_d7b16338",
        "filename": "video/alignment_adjuster.cc",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 5492
      },
      "writtenOn": "2021-09-03T14:20:00Z",
      "side": 1,
      "message": "Right, when apply_alignment_to_all_simulcast_layers is true, this method is used to ensure that each layer is divisible by the requested alignment (which could lead to scale factors being changed considerably, especially if alignment is large). If the requested alignment is for example set to 16 and this is not desirable, then maybe apply_alignment_to_all_simulcast_layers should be set to false?",
      "parentUuid": "9dce8798_6503795e",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "84d6a67547616204c52ece2c85fa722d0902a5d8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b85a56c_84b0a5f2",
        "filename": "video/alignment_adjuster.cc",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 18194
      },
      "writtenOn": "2021-09-06T06:08:54Z",
      "side": 1,
      "message": "With the patch subsequent to this CL, @Silkin and I agreed to set apply_alignment_to_all_simulcast_layers to false when using HardwareVideoEncoder in JAVA. \n\nsee:\nhttps://webrtc-review.googlesource.com/c/src/+/229460/comments/740f0479_587ed09f\n\nI think this modification would stop us right before the further adjustments of scaling factors on other layers if we have any.\n\nThe reason I cannot explicitly announce that we should not apply requested_alignment to all simulcast layers if the requested_alignemnt is same to kMaxAlignment(16) is that I\u0027m not sure about that value \"16\" is an absolute criteria since we haven\u0027t gone through tests with other resolutions.\n\nSo, setting the value in HardwareVideoEncoder seems adequate in current situation. Would you please take a look on the above option?",
      "parentUuid": "2f452da5_d7b16338",
      "range": {
        "startLine": 83,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "84d6a67547616204c52ece2c85fa722d0902a5d8",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}