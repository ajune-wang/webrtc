{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "be2e12fb_30f1064d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-08-05T13:20:02Z",
      "side": 1,
      "message": "I\u0027ve made an exploration huge unreadable cl https://webrtc-review.googlesource.com/c/src/+/227347\nIt looks like an improvement to me, so I would like to start talking about moving into that direction, starting with the most important parts:\n\nDo you think it is important enough to do the api change?\nCan we discuss the new api (names, types, placement. e.g. should the new configuration struct be member of the VideoDecoder class, or do you think it is better to have it at webrtc namespace?)",
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f463a8b_ed5417cb",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 5524
      },
      "writtenOn": "2021-08-05T14:29:35Z",
      "side": 1,
      "message": "Could you expand on this? Who is the promise to, what is the purpose?\nI\u0027m assuming now that this is a promise from webrtc to the decoder, so that the decoder can allocate buffer surfaces of this size?",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 75,
        "endChar": 24
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16d8b954_f7d4740d",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-08-05T15:24:11Z",
      "side": 1,
      "message": "webrtc is large actor. so I\u0027m using term \u0027user of the VideoDecoder interface\u0027. does it make it clearer?\n\nYep, my understand the main point to specify resolution here is so that decoder can allocate enough buffer.\nBecause modern codecs may change resolution without a key frame, I\u0027m relaxing it from \u0027exactly that resolution\u0027 to \u0027not larger than that\u0027.\nIt is also how it is defined in dependency descriptor rtp header extension.\n(Also modern codecs distinguish \u0027encoded\u0027 resolution and \u0027rendered\u0027 resolution. so specifying that here too)",
      "parentUuid": "8f463a8b_ed5417cb",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 75,
        "endChar": 24
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2e9ad7b_4145b5ab",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 5524
      },
      "writtenOn": "2021-08-05T14:29:35Z",
      "side": 1,
      "message": "Not sure \"supposed to use\" is the right word, this is an upper bound right? The maximum number of cpu cores the decoder is allowed to use in parallel?",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 50
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55c3ebb9_3c8e21f4",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-08-05T15:24:11Z",
      "side": 1,
      "message": "That\u0027s the issue with lack of documentation: I don\u0027t know. I trust you know better what this parameter suppose to mean.",
      "parentUuid": "a2e9ad7b_4145b5ab",
      "range": {
        "startLine": 79,
        "startChar": 4,
        "endLine": 79,
        "endChar": 50
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc8f540c_cb5278e3",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 5524
      },
      "writtenOn": "2021-08-05T14:29:35Z",
      "side": 1,
      "message": "We\u0027re moving away from the VideoCodec struct, would it be a good time to move away from the old constants in video_error_codes.h too?",
      "range": {
        "startLine": 98,
        "startChar": 13,
        "endLine": 98,
        "endChar": 44
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26c59ba6_a254fe49",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-08-05T15:24:11Z",
      "side": 1,
      "message": "I think yes. but what alternatives do we have?\nOne option is to return bool (success or failure). Do you think it is enough?\nText logging is the only place where exact error code is used as far as I can see.\n\nIf detailed error is desired, may be we can consider absl::Status, [or similar rtc::Error]. rtc::Error though has error space that doesn\u0027t look fitting for the encoder.\n\nI\u0027ll go with bool for now (like I did in the exploratory CL)",
      "parentUuid": "bc8f540c_cb5278e3",
      "range": {
        "startLine": 98,
        "startChar": 13,
        "endLine": 98,
        "endChar": 44
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0cd9db38_b9ab9ff1",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 5524
      },
      "writtenOn": "2021-08-06T14:34:00Z",
      "side": 1,
      "message": "Yeah, I think boolean is enough together with text logging where required.\nrtc::Error def seems like overkill for this use case.\nThe only error that we really treat differently afaik is WEBRTC_VIDEO_CODEC_FALLBACK_SOFTWARE. Do we need to do something special there in that case? Looks like there is some chromium code that uses it...",
      "parentUuid": "26c59ba6_a254fe49",
      "range": {
        "startLine": 98,
        "startChar": 13,
        "endLine": 98,
        "endChar": 44
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58434a2c_3ca936b4",
        "filename": "api/video_codecs/video_decoder.h",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 5019
      },
      "writtenOn": "2021-08-06T14:49:17Z",
      "side": 1,
      "message": "I can\u0027t find special treatment of that error code.\n\nhere are two non-passthrough non-test calls to InitDecode I found:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/modules/video_coding/decoder_database.cc;l\u003d176;drc\u003d7a2023ef5b81378d8c7da91f4caf944c60618794\nand\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/video/video_stream_decoder_impl.cc;l\u003d106;drc\u003d7a2023ef5b81378d8c7da91f4caf944c60618794\n\nboth only check if status is ok or not (plus one of them logs the error code. so either log should be done by each decoder individually, or we should drop the logging. I\u0027m leaning to latter, making debugging harder, but code simpler and smaller)\n\nCould you misremember special treatment for Decode function instead?\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/api/video_codecs/video_decoder_software_fallback_wrapper.cc;l\u003d202;drc\u003dc12f6259384d5d7fa313296f5cf7f7998458984a",
      "parentUuid": "0cd9db38_b9ab9ff1",
      "range": {
        "startLine": 98,
        "startChar": 13,
        "endLine": 98,
        "endChar": 44
      },
      "revId": "a3a592ee357c84609c411ca06a547f4379786ef5",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}