{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3d12a5f5_e3c0122c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-06T12:52:34Z",
      "side": 1,
      "message": "Comments addressed, please take another look! ðŸ˜Š",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ab614bd_26fd157b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-06T15:47:04Z",
      "side": 1,
      "message": "Thanks for the quick round, Zhaoliang!",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0fc07776_94b9e3e6",
        "filename": "api/peer_connection_interface.h",
        "patchSetId": 12
      },
      "lineNbr": 1448,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-06T15:47:04Z",
      "side": 1,
      "message": "(Deleting it here: https://webrtc-review.googlesource.com/c/src/+/330300)",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "baea1bd0_253d6067",
        "filename": "pc/peer_connection_factory.cc",
        "patchSetId": 12
      },
      "lineNbr": 352,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-06T15:47:04Z",
      "side": 1,
      "message": "nit: This can be simplified to `\u003d encode_metronome_.get()` (if it is not set than `.get()` returns `nullptr`).",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ea47c41_5a783a4c",
        "filename": "pc/peer_connection_factory.cc",
        "patchSetId": 12
      },
      "lineNbr": 352,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-07T02:06:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baea1bd0_253d6067",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5006ac65_400a5c5e",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 12
      },
      "lineNbr": 740,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-06T15:47:04Z",
      "side": 1,
      "message": "Are there any downsides with just encoding everything currently in the queue on each tick?\n\nFor example:\n```\nmetronome_-\u003eRequestCallOnNextTick([this] {\n  while (!input_queue_.empty()) {\n    OnReadyToEncode();\n  }\n});\n```\nAnd get rid of both the timestamp estimate as well as the OnReadyToEncode() posting to call itself.\n\nIf not, why do we need to do the timestamp estimation and extra logic?",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3db26b13_e5a7059c",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 12
      },
      "lineNbr": 740,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-07T02:06:45Z",
      "side": 1,
      "message": "We want to limit the maximum delay that VSync alignment brings. In some case, the metronome OnBeginFrame can be throttled as described in the DD, IIRC, the metronome can also be throttled to 15fps, the delay will be very large if we simply post the encode task to next tick.\nPer the experiment result, the average delay here is 12~15ms when we set 33ms maxmium delay.",
      "parentUuid": "5006ac65_400a5c5e",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1409eec_6aa3a36d",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 12
      },
      "lineNbr": 740,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-11T13:07:21Z",
      "side": 1,
      "message": "Would checking the tick period achieve similar results without needing to estimate, which might be simpler and less error prone?\n\n```\nif (metronome_-\u003eTickPeriod() \u003c\u003d kMaxAllowedDelay) {\n  // The metronome is ticking frequently enough that it is worth the extra delay.\n  metronome_-\u003eRequestCallOnNextTick([this] {\n    EncodeAllEnqueuedFrames();\n  });\n} else {\n  // The metronome is ticking too infrequently, encode immediately.\n  EncodeAllEnqueuedFrames();\n}\n```\n\nAlso in what scenarios does the vsync timer happen too infrequently? Does it happen when the tab is not visible?",
      "parentUuid": "3db26b13_e5a7059c",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a539c644_6c7e962a",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 12
      },
      "lineNbr": 740,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-12T09:04:46Z",
      "side": 1,
      "message": "Thanks, this is much simpler ðŸ˜Ž, and the OnBeginFrame would be throttled to 15fps if more than 1 videos are running at 15fps on the tab.",
      "parentUuid": "c1409eec_6aa3a36d",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2839460_710df830",
        "filename": "video/frame_cadence_adapter.cc",
        "patchSetId": 12
      },
      "lineNbr": 740,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-12T09:43:06Z",
      "side": 1,
      "message": "Awesome!",
      "parentUuid": "a539c644_6c7e962a",
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7632a393_93782b71",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 615,
      "author": {
        "id": 9515
      },
      "writtenOn": "2023-12-07T08:37:35Z",
      "side": 1,
      "message": "Can you figure out a better name of what the test tests?",
      "range": {
        "startLine": 615,
        "startChar": 30,
        "endLine": 615,
        "endChar": 50
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2fe36adb_4ecc27b6",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 615,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-08T06:52:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7632a393_93782b71",
      "range": {
        "startLine": 615,
        "startChar": 30,
        "endLine": 615,
        "endChar": 50
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60fb12eb_eb564c45",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 633,
      "author": {
        "id": 9515
      },
      "writtenOn": "2023-12-07T08:37:35Z",
      "side": 1,
      "message": "From what I read from the code we\u0027re not testing queue_overload here - you can omit the expected parameter list here and below.",
      "range": {
        "startLine": 633,
        "startChar": 31,
        "endLine": 633,
        "endChar": 44
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98daa004_9decd729",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 633,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-08T06:52:06Z",
      "side": 1,
      "message": "Currently the queue_overload always set false in VSYNC case, Im not sure if it\u0027s suitable.",
      "parentUuid": "60fb12eb_eb564c45",
      "range": {
        "startLine": 633,
        "startChar": 31,
        "endLine": 633,
        "endChar": 44
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ffb65dc_49f7ac76",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 633,
      "author": {
        "id": 5142
      },
      "writtenOn": "2023-12-12T09:43:06Z",
      "side": 1,
      "message": "If it was true then the frame would have been dropped by VideoStreamEncoder, so testing \"false\" here does protect against that hypothetical bug and makes sense to me.",
      "parentUuid": "98daa004_9decd729",
      "range": {
        "startLine": 633,
        "startChar": 31,
        "endLine": 633,
        "endChar": 44
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9c4fd69_f4609327",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 633,
      "author": {
        "id": 9515
      },
      "writtenOn": "2023-12-18T13:21:05Z",
      "side": 1,
      "message": "I think a couple of tests are missing to test queue_overload behavior. With those added there shouldn\u0027t be a need for testing for false in this method. OK to add and fix in another PS.",
      "parentUuid": "3ffb65dc_49f7ac76",
      "range": {
        "startLine": 633,
        "startChar": 31,
        "endLine": 633,
        "endChar": 44
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e819970_3d5d8a9c",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 649,
      "author": {
        "id": 9515
      },
      "writtenOn": "2023-12-07T08:37:35Z",
      "side": 1,
      "message": "Why is this needed? (+ all cases with Zero after Millis below)",
      "range": {
        "startLine": 649,
        "startChar": 2,
        "endLine": 649,
        "endChar": 49
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f82f19d_c31d87ab",
        "filename": "video/frame_cadence_adapter_unittest.cc",
        "patchSetId": 12
      },
      "lineNbr": 649,
      "author": {
        "id": 9741
      },
      "writtenOn": "2023-12-08T06:52:06Z",
      "side": 1,
      "message": "Thanks, this and below is no needed.",
      "parentUuid": "6e819970_3d5d8a9c",
      "range": {
        "startLine": 649,
        "startChar": 2,
        "endLine": 649,
        "endChar": 49
      },
      "revId": "4cba1eea381e0a0391b2bf36dbedf6dca161e9c0",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}