{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b6bcc787_55bb6ac0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9279
      },
      "writtenOn": "2021-04-06T08:47:32Z",
      "side": 1,
      "message": "** Presubmit ERRORS **\nBug entry requires issue tracker prefix, e.g. chromium:1188398\n\nDo you see, what the presubmit script is complaining about?\nAlso it appears that the fix is not that easy and more changes are required. Especially to ensure that unnecessary rollback wouldn\u0027t happen.",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4446f120_159e6481",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T09:09:45Z",
      "side": 1,
      "message": "Doesn\u0027t look quite right to me, but could be convinced otherwise.\n",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83d6f3d3_32fc069a",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1919,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T09:09:45Z",
      "side": 1,
      "message": "the pattern \"pc-\u003epc()\" is so ugly that I\u0027d like another name. Since you\u0027re doing CreateOffer() here, \"caller\" would be the traditional name.",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c68ddc6_b3dc4362",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1919,
      "author": {
        "id": 9279
      },
      "writtenOn": "2021-04-06T11:56:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83d6f3d3_32fc069a",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58587672_0c7b03f1",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1936,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T09:09:45Z",
      "side": 1,
      "message": "can you add a test that does an offer/answer with one set of encodings, changes the set of encodings in some fashion, does an offer/answer with that, and then does a SLD + rollback and verifies that the restored encodings are the second set, not the initial set?\n\nI think you may be unable to set the name and number of encodings, but should be able to flip around their enabled state.",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86b6428f_35cef3c1",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1936,
      "author": {
        "id": 9279
      },
      "writtenOn": "2021-04-06T11:56:52Z",
      "side": 1,
      "message": "I can look into that if it is still relevant after my last comments",
      "parentUuid": "58587672_0c7b03f1",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ad1f663_9ba8d265",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1936,
      "author": {
        "id": 9279
      },
      "writtenOn": "2021-04-06T15:08:30Z",
      "side": 1,
      "message": "I probably didn\u0027t quite understand your idea of the test. As far as I can see the rollback has something to restore only in case there isn\u0027t yet a completed negotiation. Also the bug report is about the case where init parameters got lost. Now the test just proves that the rollback doesn\u0027t do anything to send encodings, which is the expected behavior.",
      "parentUuid": "86b6428f_35cef3c1",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "825cca42_97517e69",
        "filename": "pc/peer_connection_jsep_unittest.cc",
        "patchSetId": 2
      },
      "lineNbr": 1936,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T18:56:03Z",
      "side": 1,
      "message": "Yeah, the active flag doesn\u0027t affect SDP in any way, so setParameters() doesn\u0027t fire negotiationNeeded. I had forgotten that. So the test doesn\u0027t test what I wanted it to test.....",
      "parentUuid": "6ad1f663_9ba8d265",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18d6492b_98af567b",
        "filename": "pc/sdp_offer_answer.cc",
        "patchSetId": 2
      },
      "lineNbr": 2732,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T09:09:45Z",
      "side": 1,
      "message": "This doesn\u0027t smell right to me. When you\u0027re rolling back, you\u0027re not changing the initialization data, you\u0027re changing the current data. set_init_send_encodings is only called from CreateSender at the moment.",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0504e7f_85a7619d",
        "filename": "pc/sdp_offer_answer.cc",
        "patchSetId": 2
      },
      "lineNbr": 2732,
      "author": {
        "id": 9279
      },
      "writtenOn": "2021-04-06T11:56:52Z",
      "side": 1,
      "message": "The logic there is that if media channel doesn\u0027t exist then RtpSenderBase::init_parameters_ is used for keeping the parameters. During rollback media channel gets destroyed, which leaves the init_parameters the place where parameters for next offer are taken.",
      "parentUuid": "18d6492b_98af567b",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30669922_9c082a29",
        "filename": "pc/sdp_offer_answer.cc",
        "patchSetId": 2
      },
      "lineNbr": 2732,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-04-06T12:04:04Z",
      "side": 1,
      "message": "That covers the case where you roll back from having created the media channel to the state of having no media hcannel\n\nBut if media channel does exist before the SLD/rollback, what then?\n\nMakes me even more certain that the test I mentioned is needed.",
      "parentUuid": "e0504e7f_85a7619d",
      "revId": "548aaaa366e296172277a3477862b26d7aecd416",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}